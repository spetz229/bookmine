---
layout: page
title: "Learning GNU Emacs, 3rd Edition"
prev: OEBPS/ch02s06.html
next: OEBPS/ch03.html
book_path: books/learning-gnu-emacs--_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="book" xml:lang="en"><div class="book"><div class="book"><div class="book"><h1 class="title"><a id="gnu3-CHP-2-SECT-7" class="calibre1"></a>Making Emacs Work the Way You Want</h1></div></div></div><p class="copyright">If you've been reading straight through this book,
you may have started a list of things you'd like to
change
<a id="gnu3-CHP-2-ITERM-1819" class="calibre2"></a>
            <a id="gnu3-CHP-2-ITERM-1820" class="calibre2"></a>
            <a id="gnu3-CHP-2-ITERM-1821" class="calibre2"></a>
            <a id="gnu3-CHP-2-ITERM-1822" class="calibre2"></a>
            <a id="gnu3-CHP-2-ITERM-1823" class="calibre2"></a>
            <a id="gnu3-CHP-2-ITERM-1824" class="calibre2"></a>
            <a id="gnu3-CHP-2-ITERM-1825" class="calibre2"></a>
            <a id="gnu3-CHP-2-ITERM-1826" class="calibre2"></a>
            <a id="gnu3-CHP-2-ITERM-1827" class="calibre2"></a>
            <a id="gnu3-CHP-2-ITERM-1828" class="calibre2"></a>
            <a id="gnu3-CHP-2-ITERM-1829" class="calibre2"></a>about
Emacs, such as</p><div class="book"><ul class="itemizedlist"><li class="listitem"><p class="copyright">Hiding the toolbar</p></li><li class="listitem"><p class="copyright">Changing Emacs cut and paste commands to <span><strong class="calibre5">C-x</strong></span>, <span><strong class="calibre5">C-c</strong></span>, and
<span><strong class="calibre5">C-v</strong></span>
               </p></li><li class="listitem"><p class="copyright">Turning on text mode and a fill mode so Emacs does word wrap</p></li><li class="listitem"><p class="copyright">Changing the way some of the keys work</p></li></ul></div><p class="copyright">We're going to tell you how to give Emacs the to-do
list, a list of options to turn on each time you enter Emacs. These
options are defined in an initialization file called
<span><em class="calibre7">.emacs</em></span>. Initialization files run automatically.
Some run when you start up your computer. Others, like
<span><em class="calibre7">.emacs</em></span>, run when you start up an associated
software program. So <span><em class="calibre7">.emacs</em></span> runs automatically
when you start Emacs and turns on whatever options the file defines.
Emacs doesn't need this file to run; its only
purpose is to make Emacs work the way you want it to.</p><p class="copyright">The <span><em class="calibre7">.emacs</em></span> file consists of Lisp statements. If
you're not a Lisp programmer, you can think of each
line as an incantation that follows a certain pattern; you need to
type it exactly.</p><p class="copyright">Emacs now has <a id="gnu3-CHP-2-ITERM-1830" class="calibre2"></a>another way to handle customization:
an interactive interface called Custom that writes Lisp for you and
automatically inserts it in your <span><em class="calibre7">.emacs</em></span> file.
The Custom interface is discussed in <a class="calibre2" href="ch10.html" title="Chapter 10. Customizing Emacs">Chapter 10</a>,
but we'll show you an even faster method for common
options. <a id="gnu3-CHP-2-ITERM-1831" class="calibre2"></a>
         </p><p class="copyright">When you want to add a line to your <span><em class="calibre7">.emacs</em></span> file
directly, take these steps:</p><div class="book"><ol class="orderedlist"><li class="listitem"><p class="copyright">Enter Emacs (if you're not already there).</p></li><li class="listitem"><p class="copyright">Type <span><strong class="calibre5">C-x C-f ~/.emacs</strong></span> 
                  <span><strong class="calibre5">Enter</strong></span>.</p></li><li class="listitem"><p class="copyright">Type the line to be added exactly as shown in this book and press
Enter.</p></li><li class="listitem"><p class="copyright">Press <span><strong class="calibre5">C-x C-s</strong></span> to save the
<span><em class="calibre7">.emacs</em></span> file.</p></li><li class="listitem"><p class="copyright">Press <span><strong class="calibre5">C-x C-c</strong></span> to exit Emacs.</p></li><li class="listitem"><p class="copyright">Restart Emacs to have the line take effect.</p></li></ol></div><p class="copyright">If you make a minor typing mistake (such as forgetting a single
quotation mark or a parenthesis), you are likely to get an error
message that says <code class="calibre21">Error in init file</code> when you
restart Emacs. Simply edit the <span><em class="calibre7">.emacs</em></span> file
again, checking the line you added against the place you got it from,
whether from this book or another user's
<span><em class="calibre7">.emacs</em></span> file. Usually, you can find the error if
you look hard enough; if not, find someone who has a
<span><em class="calibre7">.emacs</em></span> file (and preferably understands Lisp)
and ask for help. Make the changes, save the file, and restart Emacs.</p><p class="copyright">What if you make a change that essentially keeps Emacs from being
able to start? You can still exit Emacs, rename the file, edit it,
then save it as <code class="calibre21">.emacs</code> and try again.</p><div class="book" xml:lang="en"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="gnu3-CHP-2-SECT-7.1" class="calibre1"></a>Hiding the Toolbar</h2></div></div></div><p class="copyright">New users may find the
<a id="gnu3-CHP-2-ITERM-1832" class="calibre2"></a>
               <a id="gnu3-CHP-2-ITERM-1833" class="calibre2"></a>
               <a id="gnu3-CHP-2-ITERM-1834" class="calibre2"></a>toolbar helpful. Others may
not. It's easy to hide it by selecting
Options<span>→</span> Show/Hide<span>→</span> Toolbar, and then
Options<span>→</span> Save Options.</p><p class="copyright">When Emacs sets options for you through Custom (and this is what it
is doing even when you use the Options menu), it writes your
<span><em class="calibre7">.emacs</em></span> file. If you already have a
<span><em class="calibre7">.emacs</em></span> file, it appends to it. Custom
essentially groups all of its settings in one part of the file, and
it is commented to indicate that you should not change it manually.
Here's the <span><em class="calibre7">.emacs</em></span> file that we
created by selecting this option:</p><a id="I_2_tt71" class="calibre2"></a><pre class="programlisting"> (custom-set-variables
  ;; custom-set-variables was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 '(tool-bar-mode nil nil (tool-bar)))
(custom-set-faces
  ;; custom-set-faces was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 )</pre><p class="copyright">This may seem a bit bulky, but as we'll see in the
next section, Emacs adds this section only once and then augments it
when you set more options either through the options menu or directly
through the Custom interface. Also note that this auto-generated Lisp
is certainly less clean than Lisp statements you'll
typically see in <span><em class="calibre7">.emacs</em></span> files.
That's another reason not to edit
Custom's work directly.</p></div><div class="book" xml:lang="en"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="gnu3-CHP-2-SECT-7.2" class="calibre1"></a>Turning On CUA Mode for C-x, C-c, and C-v to Cut, Copy, and Paste</h2></div></div></div><p class="copyright">If you're new to Emacs, <a id="gnu3-CHP-2-ITERM-1835" class="calibre2"></a>
               <a id="gnu3-CHP-2-ITERM-1836" class="calibre2"></a>
               <a id="gnu3-CHP-2-ITERM-1837" class="calibre2"></a>
               <a id="gnu3-CHP-2-ITERM-1838" class="calibre2"></a>you might be
used to the Common User Access (CUA) conventions for cutting,
copying, and pasting, <span><strong class="calibre5">C-x</strong></span>, <span><strong class="calibre5">C-c</strong></span>, and <span><strong class="calibre5">C-v</strong></span>
respectively. You might reach for <span><strong class="calibre5">C-z</strong></span> for undo. CUA mode was once an add-on mode
that you had to install separately, but it became so popular that it
is now part of Emacs. It's coded in a clever way
that doesn't interfere with Emacs keystrokes that
are prefixed with <span><strong class="calibre5">C-x</strong></span> and <span><strong class="calibre5">C-c</strong></span>. Details on CUA mode can be found in <a class="calibre2" href="ch13.html" title="Chapter 13. Platform-Specific Considerations">Chapter 13</a>.</p><p class="copyright">You can turn this feature on through the Options menu to try it out.
Simply choose Options<span>→</span> C-x/C-c/C-v cut and paste (CUA).
After you select this option, a check mark appears next to it on the
Options menu. To keep it for subsequent sections, select Save Options
from the Options menu. Emacs writes your <span><em class="calibre7">.emacs</em></span>
file for you. If you turned off the toolbar and then set this option,
your <span><em class="calibre7">.emacs</em></span> file would look like this (note that
the line relating to CUA mode is bold so you can see the difference
from the previous example):</p><a id="I_2_tt72" class="calibre2"></a><pre class="programlisting"> (custom-set-variables
  ;; custom-set-variables was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 '<span><strong class="calibre5">(cua-mode t nil (cua-base))</strong></span>
 '(tool-bar-mode nil nil (tool-bar)))
(custom-set-faces
  ;; custom-set-faces was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 )</pre><p class="copyright">Interestingly, Emacs happily writes the <span><em class="calibre7">.emacs</em></span>
file even if it is open at the time. You can watch Emacs
change the file if you have it open when you choose Save Options.</p></div><div class="book" xml:lang="en"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="gnu3-CHP-2-SECT-7.3" class="calibre1"></a>Turning On Text Mode and Auto-Fill Mode Automatically</h2></div></div></div><p class="copyright">To make text mode the default <a id="gnu3-CHP-2-ITERM-1839" class="calibre2"></a>
               <a id="gnu3-CHP-2-ITERM-1840" class="calibre2"></a>
               <a id="gnu3-CHP-2-ITERM-1841" class="calibre2"></a>
               <a id="gnu3-CHP-2-ITERM-1842" class="calibre2"></a>major
mode and start auto-fill mode automatically each time you enter
Emacs, add these lines to your <span><em class="calibre7">.emacs</em></span> file:</p><a id="I_2_tt73" class="calibre2"></a><pre class="programlisting">(setq default-major-mode 'text-mode)
(add-hook 'text-mode-hook  'turn-on-auto-fill)</pre><p class="copyright">The first line tells Emacs to make text mode the default major mode;
in other words, "Turn on text mode unless I tell you
otherwise." The second line turns on auto-fill mode
whenever you are in text mode. Alternatively, selecting
Options<span>→</span> Word Wrap in Text Modes, and then Options<span>→</span>
Save Options adds auto-fill mode to your <span><em class="calibre7">.emacs</em></span>
file directly. It doesn't make text mode the default
major mode, however.</p><p class="copyright">If you prefer refill mode, replace the second line of code with this
line:</p><a id="I_2_tt74" class="calibre2"></a><pre class="programlisting">(add-hook 'text-mode-hook (lambda ( ) (refill-mode 1)))</pre></div><div class="book" xml:lang="en"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="gnu3-CHP-2-SECT-7.4" class="calibre1"></a>Remapping Keys</h2></div></div></div><p class="copyright">Another major use of the <span><em class="calibre7">.emacs</em></span> file is
<a id="gnu3-CHP-2-ITERM-1843" class="calibre2"></a>
               <a id="gnu3-CHP-2-ITERM-1844" class="calibre2"></a>
               <a id="gnu3-CHP-2-ITERM-1845" class="calibre2"></a>
               <a id="gnu3-CHP-2-ITERM-1846" class="calibre2"></a>to
redefine things about Emacs that irritate you. You may have ergonomic
concerns about Emacs; more than one person has aggravated carpal
tunnel syndrome using the default bindings. You may simply be used to
reaching for certain keys for certain functions and would rather
change Emacs than your habits. Whatever the case, this section gives
a brief introduction to key remapping; for more details, see <a class="calibre2" href="ch10.html" title="Chapter 10. Customizing Emacs">Chapter 10</a>.</p><p class="copyright">If you use the default bindings (rather than CUA mode), you may use
<span><strong class="calibre5">C-x u</strong></span> for undo.<sup class="calibre6">[<a id="gnu3-CHP-2-FNOTE-10" href="#ftn.gnu3-CHP-2-FNOTE-10" class="calibre2">10</a>]</sup> (Undo is such a common
command that it's easy to type <span><strong class="calibre5">C-x C-u</strong></span> by mistake when you undo repeatedly.
Unfortunately, <span><strong class="calibre5">C-x C-u</strong></span> is a disabled
command for <span><strong class="calibre5">upcase-region</strong></span>. If you
type <span><strong class="calibre5">C-x C-u</strong></span>, an annoying message
about enabling the command pops up.</p><p class="copyright">If you don't anticipate a big need for upcasing
regions, you can redefine <span><strong class="calibre5">C-x C-u</strong></span> so
that it also runs <span><strong class="calibre5">undo</strong></span>. To do so,
add this line to your <span><em class="calibre7">.emacs</em></span> file:</p><a id="I_2_tt75" class="calibre2"></a><pre class="programlisting">(define-key global-map "\C-x\C-u" 'undo)</pre><p class="copyright">After making this change, typing <span><strong class="calibre5">C-x
C-u</strong></span> runs undo, just as <span><strong class="calibre5">C-x
u</strong></span> does.</p><p class="copyright">Emacs customization is extremely powerful, and you can make Emacs
work just the way you want it to. A far more extensive treatment of
customization is found in <a class="calibre2" href="ch10.html" title="Chapter 10. Customizing Emacs">Chapter 10</a>. This brief
introduction is meant to whet your appetite and to make it possible
for you to add lines to your <span><em class="calibre7">.emacs</em></span> file as we
mention potential customizations throughout the book.</p><p class="copyright">The next chapter covers topics such as the many searches offered by
Emacs, including query-replace, as well as spell checking and word
abbreviation mode (often used to correct typos automatically). If you
want to learn about these features, go on to the next chapter. From
here on, you can take a selective approach to reading this book,
picking and choosing whatever you want to learn about; you
don't need to read the rest of the book
sequentially.</p></div><div class="book" xml:lang="en"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="gnu3-CHP-2-SECT-7.5" class="calibre1"></a>Problems You May Encounter</h2></div></div></div><div class="book"><ul class="itemizedlist"><li class="listitem"><p class="copyright">
                     <span><strong class="calibre5">You get an error message when you start Emacs
after changing the</strong></span> 
                     <span><em class="calibre7">.emacs</em></span> 
                     <span><strong class="calibre5">file</strong></span>. The message appears only
<a id="gnu3-CHP-2-ITERM-1847" class="calibre2"></a>
                     <a id="gnu3-CHP-2-ITERM-1848" class="calibre2"></a>briefly; press <span><strong class="calibre5">M-p</strong></span> to view it again. Edit your
<span><em class="calibre7">.emacs</em></span> file, checking the lines you added
carefully against their source for minor typographical errors.
Something as simple as a missing hyphen or apostrophe can cause this
error. Fix the error, save the file, exit Emacs, and reenter. In
extreme cases (the <span><em class="calibre7">.emacs</em></span> file is so messed up
that Emacs won't even let you edit it), exit Emacs,
rename the <span><em class="calibre7">.emacs</em></span> file, and then start Emacs and
edit it again to fix it. Rename it back to
<span><em class="calibre7">.emacs</em></span> and start again.</p></li><li class="listitem"><p class="copyright">
                     <span><strong class="calibre5">Paragraphs are not reformatted
properly</strong></span>. This
<a id="gnu3-CHP-2-ITERM-1849" class="calibre2"></a>
                     <a id="gnu3-CHP-2-ITERM-1850" class="calibre2"></a>
                     <a id="gnu3-CHP-2-ITERM-1851" class="calibre2"></a>seems to relate to window size. Try
resizing the window horizontally until paragraphs format properly.</p></li></ul></div></div><div class="book"><br class="book"/><hr class="calibre4"/><div class="book"><p class="copyright"><sup class="calibre6">[<a id="ftn.gnu3-CHP-2-FNOTE-10" href="#gnu3-CHP-2-FNOTE-10" class="calibre2">10</a>] </sup>You
could use <span><strong class="calibre5">C-_</strong></span> for undo instead and
then you wouldn't need to read this section. We
recommend that you read it anyway because you might find another
annoying key mapping that you want to change and this section tells a
bit about how to do so.</p></div></div></div></div>

{% endraw %}

