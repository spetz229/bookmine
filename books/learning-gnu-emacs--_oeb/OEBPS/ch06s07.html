---
layout: page
title: "Learning GNU Emacs, 3rd Edition"
prev: OEBPS/ch06s06.html
next: OEBPS/ch06s08.html
book_path: books/learning-gnu-emacs--_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="book" xml:lang="en"><div class="book"><div class="book"><div class="book"><h1 class="title"><a id="gnu3-CHP-6-SECT-7" class="calibre1"></a>Naming, Saving, and Executing Your Macros</h1></div></div></div><p class="copyright">In this section, we'll describe
<a id="gnu3-CHP-6-ITERM-2275" class="calibre2"></a>
            <a id="gnu3-CHP-6-ITERM-2276" class="calibre2"></a>
            <a id="gnu3-CHP-6-ITERM-2277" class="calibre2"></a>
            <a id="gnu3-CHP-6-ITERM-2278" class="calibre2"></a>
            <a id="gnu3-CHP-6-ITERM-2279" class="calibre2"></a>
            <a id="gnu3-CHP-6-ITERM-2280" class="calibre2"></a>how to save macros so that you can use
them in different editing sessions. To save a macro, bind it
permanently to a key, and load it in subsequent Emacs sessions,
follow these steps:</p><div class="book"><ol class="orderedlist"><li class="listitem"><p class="copyright">Define the macro, if you haven't already.</p></li><li class="listitem"><p class="copyright">Type <span><strong class="calibre5">C-x C-k n</strong></span> (for <span><strong class="calibre5">name-last-kbd-macro</strong></span>). Now type a name for
your macro and press <span><strong class="calibre5">Enter</strong></span>. A
non-Emacs sounding name is best so that Emacs
doesn't confuse it with one of its own commands.
Once you've executed this command, Emacs remembers
the macro for the rest of the editing session. To use it again, type
the command <span><strong class="calibre5">M-x</strong></span>
                  <span><em class="calibre7">name</em></span> (where <span><em class="calibre7">name</em></span>
is the name you've chosen). Emacs treats your named
macro like one of its own commands; it shows up in completion lists
if you press <span><strong class="calibre5">Tab</strong></span> after typing a few
letters of the name.</p></li><li class="listitem"><p class="copyright">If you want to save the macro definition permanently, you must insert
the macro definition into a file. This could be your
<span><em class="calibre7">.emacs</em></span> file or a macro file that you load
through your <span><em class="calibre7">.emacs</em></span> file. Type <span><strong class="calibre5">C-x C-f</strong></span> 
                  <span><em class="calibre7">filename</em></span>
                  <span><strong class="calibre5">Enter</strong></span> to find the file into which to
insert the definition and move to the end of it by typing <span><strong class="calibre5">M-&gt;</strong></span>.</p></li><li class="listitem"><p class="copyright">Type <span><strong class="calibre5">M-x insert-kbd-macro Enter</strong></span>
                  <span><em class="calibre7">macroname</em></span> 
                  <span><strong class="calibre5">Enter</strong></span>. Emacs inserts Lisp code that represents
your macro.</p></li><li class="listitem"><p class="copyright">Add a line to <span><em class="calibre7">.emacs</em></span> make the key binding
permanent. For example, if we called our macro <span><strong class="calibre5">transpose-names</strong></span> and bound it to <span><strong class="calibre5">C-x C-k T</strong></span>, we would add this line to our
<span><em class="calibre7">.emacs</em></span> file (or other macro definition file):</p><a id="I_6_tt181" class="calibre2"></a><pre class="programlisting">(global-set-key "\C-x\C-kT" 'transpose-names)</pre></li><li class="listitem"><p class="copyright">If you save the macro in some other file, it won't
be loaded automatically. For example, let's say that
you have defined a macro called <span><strong class="calibre5">transpose-names</strong></span> and placed it in the file
<span><em class="calibre7">html.macs</em></span>, in the directory
<span><em class="calibre7">~/macros</em></span>. Add this line to your
<span><em class="calibre7">.emacs</em></span> file to load your macros automatically:</p><a id="I_6_tt182" class="calibre2"></a><pre class="programlisting"> (load-file "~/macros/html.macs")</pre></li><li class="listitem"><p class="copyright">Save the <span><em class="calibre7">.emacs</em></span> file and, if different, the file
in which you inserted your macro. Exit and restart Emacs. You can now
execute this macro either by typing <span><strong class="calibre5">M-x
transpose-names Enter</strong></span> or by pressing <span><strong class="calibre5">C-x C-k T</strong></span>.</p></li></ol></div></div></div>

{% endraw %}

