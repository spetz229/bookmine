---
layout: page
title: "Learning GNU Emacs, 3rd Edition"
prev: OEBPS/ch09s05.html
next: OEBPS/ch09s07.html
book_path: books/learning-gnu-emacs--_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="book" xml:lang="en"><div class="book"><div class="book"><div class="book"><h1 class="title"><a id="gnu3-CHP-9-SECT-6" class="calibre1"></a>Perl Support</h1></div></div></div><p class="copyright">Emacs has Perl support. Indeed, <a id="gnu3-CHP-9-ITERM-2600" class="calibre2"></a>
            <a id="gnu3-CHP-9-ITERM-2601" class="calibre2"></a>much like Perl
itself, there are multiple ways to get things done—in this
case, multiple Perl modes: the classic Perl mode (which comes up by
default) and the more popular CPerl mode.</p><p class="copyright">You should have a version of CPerl mode
built right in, but you can also pick up the latest
release from CPAN (the Comprehensive Perl Archive Network)
<a id="gnu3-CHP-9-ITERM-2602" class="calibre2"></a>
            <a id="gnu3-CHP-9-ITERM-2603" class="calibre2"></a>online at
<a class="calibre2" href="http://www.cpan.org">http://www.cpan.org</a>.</p><p class="copyright">You can add one of the following pairs of lines to your
<span><em class="calibre7">.emacs</em></span> file to make sure CPerl mode is invoked
rather than Perl mode</p><a id="I_9_tt501" class="calibre2"></a><pre class="programlisting">;; load cperl-mode for perl files
(fset 'perl-mode 'cperl-mode)

;; or maybe use an alias
(defalias 'perl-mode 'cperl-mode)</pre><p class="copyright">CPerl mode is mostly like <span><strong class="calibre5">cc-mode</strong></span>
with respect to motion and other programming language features. It
also includes fun debug operations. You can start the debugger with
<span><strong class="calibre5">M-x cperl-db</strong></span>.
You'll be prompted to verify the debugger command
and then be dropped into a split-screen mode. One buffer allows you
to drive the normal <span><strong class="calibre5">perldb</strong></span>
environment with all the regular commands you're
accustomed to using in the Perl debugger.</p><p class="copyright">The other buffer shows your script and follows along as you work
through the debugger. It tracks the line you're
about to execute as you issue commands in the other buffer.
It's amazing how quickly you grow to depend on
having such tools available while you're developing
scripts. It is worth trying out if you've never done
it before.</p><div class="book" xml:lang="en"><div class="book"><div class="book"><div class="book"><h2 class="title1"><a id="gnu3-CHP-9-SECT-6.1" class="calibre1"></a>Perl Caveats</h2></div></div></div><p class="copyright">A big reason we wanted to mention Perl mode here is to highlight a
few caveats. Perl is an amazingly expressive language much more akin
to the idioms found in human languages than just about any other
computer language out there. That expressiveness can cause
problems—especially when considering the expressiveness of
regular expressions.</p><p class="copyright">Perl supports all sorts of "funny"
variable names like <strong class="calibre5"><code class="calibre21">$'</code></strong> and
<strong class="calibre5"><code class="calibre21">$/</code></strong>. CPerl mode boasts the use of a syntax
table to help understand most of Perl's odd and
occasionally disruptive verbiage. The older Perl mode has no such
trick up its sleeves and suffers under many circumstances in the
font-lock and indentation realms. This is one of the main reasons to
make the leap into CPerl mode.</p><p class="copyright">Even with that syntax table, though, you'll probably
find some combinations of variables and strings that give Emacs
headaches. Sometimes restructuring your code will help, sometimes
not. The important thing to remember is that it
won't harm your program at all. It might make things
a bit less readable, but the script itself should run just fine. And
if it doesn't, you can always launch the debugger to
find out why!</p><p class="copyright">Here are some parting <span><em class="calibre7">.emacs</em></span> thoughts for you
Perl programmers. These lines select <span><strong class="calibre5">cperl-mode</strong></span> as the default and make sure the
syntax highlighting is turned on. These lines also turn on
<span><em class="calibre7">folding</em></span> (<span><strong class="calibre5">outline-minor-mode</strong></span> in the snippet below).
Folding allows you to "hide" chunks
of your code, such as functions where the body of the function is
"folded" into the name. That can
make it easier to get a grip on everything that is going on in the
file. Try it—it can become addictive!</p><a id="I_9_tt502" class="calibre2"></a><pre class="programlisting">;; Turn on highlighting globally
(global-font-lock-mode t)

;; automatically load cperl-mode for perl files
(fset 'perl-mode 'cperl-mode)

;; show only the toplevel nodes when loading a file
(add-hook 'cperl-mode-hook 'hide-body)

;; outline minor mode with cperl
(add-hook 'cperl-mode-hook 'outline-minor-mode)

;; Change the prefix for outline commands from C-c @ to C-c C-o
(setq outline-minor-mode-prefix "\C-co")

(load-file "cperl-mode.el")</pre></div></div></div>

{% endraw %}

