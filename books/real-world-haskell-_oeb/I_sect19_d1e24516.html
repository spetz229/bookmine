---
layout: page
title: "Real World Haskell, 1st Edition"
prev: find_traverse_split_001.html
next: find_fold_split_000.html
book_path: books/real-world-haskell-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

    <a name="toppage" class="calibre5" id="toppage"></a>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody">
      <tr valign="top" class="calibre6">
        <td class="calibre7">
          <a name="MainContent" class="calibre5" id="MainContent"></a>
          <table width="95%" class="sfbody">
            <tr class="calibre6">
              <td class="v">
                <!--Copyright (c) 2002 Safari Tech Books Online-->
                <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody">
                  <tr class="calibre6">
                    <td valign="middle" class="v1" height="5">
                      <img src="pixel.gif" alt="" border="0" class="calibre8"/>
                    </td>
                  </tr>
                  <tr class="calibre6">
                    <td valign="middle" class="v1">
                      <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody">
                        <tr class="calibre6">
                          <td class="v"><span class="calibre9"> </span>
                   
                  <span class="calibre9">   </span>
             <span class="calibre9"> </span></td>
                        </tr>
                      </table>
                    </td>
                    <td class="v1"/>
                    <td valign="middle" class="v2"> 
           
          <span class="calibre9"><a target="_self" href="find_traverse_split_000.html" title="Previous section" class="calibre13"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre14"/></a></span>
				
				 
				
				<span class="calibre9"><a target="_self" href="find_fold_split_000.html" title="Next section" class="calibre13"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre14"/></a></span></td>
                  </tr>
                </table>
                <div id="section" class="calibre15">
                  <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v3">Safari IT Books Language Constructs Functional Programming Haskell Safari IT Books Programming Programming Programming Bryan O'Sullivan  Donald Bruce Stewart  John Goerzen  O'Reilly Media, Inc. Real World Haskell, 1st Edition<a name="I_sect19_d1e24516" class="calibre27" id="I_sect19_d1e24516"></a><h3 id="title-IDAXRYZH" class="docSection1Title">9.8. Density, Readability, and the Learning Process</h3><a name="x_tP" class="calibre27" id="x_tP"></a><p class="docText">Code as dense as <i class="docEmphasis">traverse</i> is<a name="I_indexterm9_d1e24524" class="calibre27" id="I_indexterm9_d1e24524"></a> not unusual in Haskell. The gain in expressiveness is
    significant, and it requires a relatively small amount of practice to be
    able to fluently read and write code in this style.</p><a name="x_uP" class="calibre27" id="x_uP"></a><p class="docText">For comparison, here's a less dense presentation of the
    same code (this might be more typical of a less experienced Haskell
    programmer):</p><pre class="calibre39">-- file: ch09/ControlledVisit.hs
traverseVerbose order path = do
    names &lt;- getDirectoryContents path
    let usefulNames = filter (`notElem` [".", ".."]) names
    contents &lt;- mapM getEntryName ("" : usefulNames)
    recursiveContents &lt;- mapM recurse (order contents)
    return (concat recursiveContents)
  where getEntryName name = getInfo (path &lt;/&gt; name)
        isDirectory info = case infoPerms info of
                             Nothing -&gt; False
                             Just perms -&gt; searchable perms
        recurse info = do
            if isDirectory info &amp;&amp; infoPath info /= path
                then traverseVerbose order (infoPath info)
                else return [info]</pre><br class="calibre48"/>
<a name="x_vP" class="calibre27" id="x_vP"></a><p class="docText">All we've done here is make a few substitutions. Instead
    of liberally using partial <span class="docEmphasis">application</span> and function composition, we've
    defined some local functions in a <tt class="calibre34">where</tt>
    block. In place of the <i class="docEmphasis">maybe</i>
    combinator, we're using a <tt class="calibre34">case</tt>
    expression. And instead of using <i class="docEmphasis">liftM</i>, we're manually lifting <i class="docEmphasis">concat</i> ourselves.</p><a name="x_wP" class="calibre27" id="x_wP"></a><p class="docText">This is not to say that density is a uniformly good
    property. Each line of the original <i class="docEmphasis">traverse</i> function is short. We introduce a
    local variable (<span class="docMonofont">usefulNames</span>) and a local function
    (<i class="docEmphasis">isDirectory</i>) specifically to keep
    the lines short and the code clearer. Our names are descriptive. While we
    use function composition and pipelining, the longest pipeline contains
    only three elements.</p><a name="x_xP" class="calibre27" id="x_xP"></a><p class="docText">The key to writing maintainable Haskell code is to find a
    balance between density and readability. Where your code falls on this
    continuum is likely to be influenced by your level of experience, as
    detailed here:</p><ul class="calibre18"><li class="calibre19"><p class="docText">As a beginning Haskell programmer, Andrew doesn't know
        his way around the standard libraries very well. As a result, he
        unwittingly duplicates a lot of existing code.</p></li><li class="calibre19"><p class="docText">Zack has been programming for a few months and has
        mastered the use of <i class="docEmphasis">(.)</i> to
        compose long pipelines of code. Every time the needs of his program
        change slightly, he has to construct a new pipeline from scratch; he
        can't understand the existing pipeline any longer, and it is in any
        case too fragile to change.</p></li><li class="calibre19"><p class="docText">Monica has been coding for a while. She's familiar
        enough with Haskell libraries and idioms to write tight code, but she
        avoids a hyperdense style. Her code is maintainable, and she finds it
        easy to refactor when faced with changing <span class="docEmphasis">requirements</span>.</p></li></ul>
<a href="21061538.html" class="calibre2"><img src="pixel.gif" alt="" border="0" class="calibre31"/></a><ul class="calibre18"></ul></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="middle" class="v3" height="5">
                        <img src="pixel.gif" alt="" border="0" class="calibre32"/>
                      </td>
                    </tr>
                    <tr class="calibre16">
                      <td valign="middle" class="v3">
                        <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody1">
                          <tr class="calibre16">
                            <td class="v5"><span class="calibre33"> </span>
                   
                  <span class="calibre33">   </span>
             <span class="calibre33"> </span></td>
                          </tr>
                        </table>
                      </td>
                      <td class="v3"/>
                      <td valign="middle" class="v6"> 
           
          <span class="calibre33"><a target="_self" href="find_traverse_split_000.html" title="Previous section" class="calibre2"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre17"/></a></span>
				
				 
				
				<span class="calibre33"><a target="_self" href="find_fold_split_000.html" title="Next section" class="calibre2"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre17"/></a></span></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v6">
                        <span class="calibre33"></span>
                      </td>
                    </tr>
                  </table>
                </div>
                <!--IP User 2-->
              </td>
            </tr>
          </table>
        </td>
        <td class="calibre7">
                         
                      </td>
      </tr>
      <tr class="calibre6">
        <td colspan="3" valign="bottom" class="calibre7">
          <br class="calibre20"/>
          <p class="v4"></p>
          <br class="calibre20"/>
        </td>
      </tr>
    </table>
  </div>

{% endraw %}

