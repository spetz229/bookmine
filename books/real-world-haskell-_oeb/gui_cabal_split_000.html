---
layout: page
title: "Real World Haskell, 1st Edition"
prev: gui_longrunning.html
next: gui_cabal_split_001.html
book_path: books/real-world-haskell-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

    <a name="toppage" class="calibre5" id="toppage"></a>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody">
      <tr valign="top" class="calibre6">
        <td class="calibre7">
          <a name="MainContent" class="calibre5" id="MainContent"></a>
          <table width="95%" class="sfbody">
            <tr class="calibre6">
              <td class="v">
                <!--Copyright (c) 2002 Safari Tech Books Online-->
                <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody">
                  <tr class="calibre6">
                    <td valign="middle" class="v1" height="5">
                      <img src="pixel.gif" alt="" border="0" class="calibre8"/>
                    </td>
                  </tr>
                  <tr class="calibre6">
                    <td valign="middle" class="v1">
                      <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody">
                        <tr class="calibre6">
                          <td class="v"><span class="calibre9"> </span>
                   
                  <span class="calibre9">   </span>
             <span class="calibre9"> </span></td>
                        </tr>
                      </table>
                    </td>
                    <td class="v1"/>
                    <td valign="middle" class="v2"> 
           
          <span class="calibre9"><a target="_self" href="gui_longrunning.html" title="Previous section" class="calibre13"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre14"/></a></span>
				
				 
				
				<span class="calibre9"><a target="_self" href="concurrent_split_000.html" title="Next section" class="calibre13"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre14"/></a></span></td>
                  </tr>
                </table>
                <div id="section" class="calibre15">
                  <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v3">Safari IT Books Language Constructs Functional Programming Haskell Safari IT Books Programming Programming Programming Bryan O'Sullivan  Donald Bruce Stewart  John Goerzen  O'Reilly Media, Inc. Real World Haskell, 1st Edition<a name="gui_cabal" class="calibre27" id="gui_cabal"></a><h3 id="title-IDA0N0XG" class="docSection1Title">23.8. Using Cabal</h3><a name="x_Cx" class="calibre27" id="x_Cx"></a><p class="docText">We presented a <a name="I_indexterm23_d1e46222" class="calibre27" id="I_indexterm23_d1e46222"></a>Cabal file to build this project for the command-line
    version in <a class="docLink" href="webclient_main.html#webclient_main">Section 22.5</a>. We need to make a few tweaks
    for it to work with our GUI version. First, there's the obvious need to
    add the gtk2hs packages to the list of build dependencies. There is also
    the matter of the Glade XML file.</p><a name="x_Dx" class="calibre27" id="x_Dx"></a><p class="docText">Earlier, we wrote a <i class="docEmphasis">PodLocalMain.hs</i>
    file that simply assumed this file is named <i class="docEmphasis">podresources.glade</i> and stored in the
    current working directory. For a real, system-wide installation, we can't
    make that assumption. Moreover, different systems may place the file in
    different locations.</p><a name="x_Ex" class="calibre27" id="x_Ex"></a><p class="docText">Cabal provides a way around this problem. It automatically
    generates a module that exports functions that can interrogate the
    environment. We must add a <tt class="calibre34">Data-files</tt>
    line to our Cabal description file. This file names all data files that
    will be part of a system-wide installation. Then, Cabal will export a
    <tt class="calibre34">Paths_pod</tt> module (the "pod" part comes
    from the <tt class="calibre34">Name</tt> line in the Cabal file)
    that we can interrogate for the location at runtime. Here's our new Cabal
    description file:</p><pre class="calibre39">-- ch24/pod.cabal
Name: pod
Version: 1.0.0
Build-type: Simple
Build-Depends: HTTP, HaXml, network, HDBC, HDBC-sqlite3, base, 
               gtk, glade
Data-files: podresources.glade

Executable: pod
Main-Is: PodCabalMain.hs
GHC-Options: -O2</pre><br class="calibre48"/>
<a name="x_Fx" class="calibre27" id="x_Fx"></a><p class="docText">And, to go with it,<a name="I_indexterm23_d1e46254" class="calibre27" id="I_indexterm23_d1e46254"></a><a name="I_indexterm23_d1e46255" class="calibre27" id="I_indexterm23_d1e46255"></a> here's
    <i class="docEmphasis">PodCabalMain.hs</i>:</p><pre class="calibre39">-- file: ch23/PodCabalMain.hs
module Main where

import qualified PodMainGUI
import Paths_pod(getDataFileName)

main = 
    do gladefn &lt;- getDataFileName "podresources.glade"
       PodMainGUI.main gladefn</pre><br class="calibre48"/>
<a name="I_sidebar23_d1e46262" class="calibre27" id="I_sidebar23_d1e46262"></a></td>
                    </tr>
                  </table>
                </div>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </div>

{% endraw %}

