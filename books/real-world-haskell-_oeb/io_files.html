---
layout: page
title: "Real World Haskell, 1st Edition"
prev: io_basics.html
next: io_example.html
book_path: books/real-world-haskell-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

    <a name="toppage" class="calibre5" id="toppage"></a>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody">
      <tr valign="top" class="calibre6">
        <td class="calibre7">
          <a name="MainContent" class="calibre5" id="MainContent"></a>
          <table width="95%" class="sfbody">
            <tr class="calibre6">
              <td class="v">
                <!--Copyright (c) 2002 Safari Tech Books Online-->
                <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody">
                  <tr class="calibre6">
                    <td valign="middle" class="v1" height="5">
                      <img src="pixel.gif" alt="" border="0" class="calibre8"/>
                    </td>
                  </tr>
                  <tr class="calibre6">
                    <td valign="middle" class="v1">
                      <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody">
                        <tr class="calibre6">
                          <td class="v"><span class="calibre9"> </span>
                   
                  <span class="calibre9">   </span>
             <span class="calibre9"> </span></td>
                        </tr>
                      </table>
                    </td>
                    <td class="v1"/>
                    <td valign="middle" class="v2"> 
           
          <span class="calibre9"><a target="_self" href="io_basics.html" title="Previous section" class="calibre13"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre14"/></a></span>
				
				 
				
				<span class="calibre9"><a target="_self" href="io_example.html" title="Next section" class="calibre13"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre14"/></a></span></td>
                  </tr>
                </table>
                <div id="section" class="calibre15">
                  <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v3">Safari IT Books Language Constructs Functional Programming Haskell Safari IT Books Programming Programming Programming Bryan O'Sullivan  Donald Bruce Stewart  John Goerzen  O'Reilly Media, Inc. Real World Haskell, 1st Edition<a name="io_files" class="calibre27" id="io_files"></a><h3 id="title-IDABKOVC" class="docSection1Title">7.2. Working with Files and Handles</h3><a name="x_VC" class="calibre27" id="x_VC"></a><p class="docText">So<a name="ch07-files001" class="calibre27" id="ch07-files001"></a><a name="ch07-handles001" class="calibre27" id="ch07-handles001"></a> far, you've seen how to interact with the user at the
    computer's terminal. Of course, you'll often need to manipulate specific
    files. That's easy to do, too.</p><a name="x_UC" class="calibre27" id="x_UC"></a><p class="docText">Haskell defines quite a few basic functions for I/O, many
    of which are similar to functions seen in other programming languages. The
    library reference<a name="I_indexterm7_d1e19080" class="calibre27" id="I_indexterm7_d1e19080"></a> for <tt class="calibre34">System.IO</tt> provides a
    good summary of all the basic I/O functions, should you need one that we
    aren't touching upon here.</p><a name="x_WC" class="calibre27" id="x_WC"></a><p class="docText">You will generally begin by using <tt class="calibre34">openFile</tt>, which<a name="I_indexterm7_d1e19092" class="calibre27" id="I_indexterm7_d1e19092"></a> <a name="I_indexterm7_d1e19096" class="calibre27" id="I_indexterm7_d1e19096"></a>will give you a file <tt class="calibre34">Handle</tt>. That <tt class="calibre34">Handle</tt> is then used to perform specific
    operations on the file. Haskell provides functions<a name="I_indexterm7_d1e19107" class="calibre27" id="I_indexterm7_d1e19107"></a> such as <tt class="calibre34">hPutStrLn</tt> that
    work just<a name="I_indexterm7_d1e19114" class="calibre27" id="I_indexterm7_d1e19114"></a> like <tt class="calibre34">putStrLn</tt> but take
    an additional argument, a <tt class="calibre34">Handle</tt>, that
    specifies which file to operate upon. When you're done, you'll use
    <tt class="calibre34">hClose</tt> to close the <tt class="calibre34">Handle</tt>. These functions are all defined in
    <tt class="calibre34">System.IO</tt>, so you'll need to import
    that module when working with files. There are "h" functions corresponding
    to virtually all of the non-"h" functions; for instance, there<a name="I_indexterm7_d1e19134" class="calibre27" id="I_indexterm7_d1e19134"></a><a name="I_indexterm7_d1e19137" class="calibre27" id="I_indexterm7_d1e19137"></a> is <i class="docEmphasis">print</i> for printing
    to the screen and <tt class="calibre34">hPrint</tt> for printing
    to a file.</p><a name="x_XC" class="calibre27" id="x_XC"></a><p class="docText">Let's start with an imperative way to read and write
    files. This should seem similar to a <tt class="calibre34">while</tt> loop that you may find in other languages.
    This isn't the best way to write it in Haskell; later, you'll see examples
    of more Haskellish approaches.</p><pre class="calibre39">-- file: ch07/toupper-imp.hs
import System.IO
import Data.Char(toUpper)

main :: IO ()
main = do 
       inh &lt;- openFile "input.txt" ReadMode
       outh &lt;- openFile "output.txt" WriteMode
       mainloop inh outh
       hClose inh
       hClose outh

mainloop :: Handle -&gt; Handle -&gt; IO ()
mainloop inh outh = 
    do ineof &lt;- hIsEOF inh
       if ineof
           then return ()
           else do inpStr &lt;- hGetLine inh
                   hPutStrLn outh (map toUpper inpStr)
                   mainloop inh outh</pre><br class="calibre48"/>
<a name="x_YC" class="calibre27" id="x_YC"></a><p class="docText">Like every Haskell program, execution of this program
    begins with <tt class="calibre34">main</tt>. Two files are opened:
    <i class="docEmphasis">input.txt</i> is opened for reading, and
    <i class="docEmphasis">output.txt</i> is opened for writing. Then we call
    <tt class="calibre34">mainloop</tt> to process the file.</p><a name="x_ZC" class="calibre27" id="x_ZC"></a><p class="docText"><tt class="calibre34">mainloop</tt><a name="I_indexterm7_d1e19172" class="calibre27" id="I_indexterm7_d1e19172"></a>begins by checking to see if we're at the<a name="I_indexterm7_d1e19176" class="calibre27" id="I_indexterm7_d1e19176"></a> end of file (EOF) for the input. If not, we read a line
    from the input. We write out the same line to the output, after first
    converting it to uppercase. Then we recursively call <tt class="calibre34">mainloop</tt> again to continue processing the
    file.<sup class="docFootnote"><a class="docLink1" href="#x_ZCd1e19536">[18]</a></sup></p><blockquote class="calibre30"><p class="docFootnote1"><sup class="calibre50"><a name="x_ZCd1e19536" class="calibre5" id="x_ZCd1e19536">[18]</a></sup> Imperative programmers might be concerned that such a
        recursive call would consume large amounts of stack space. In Haskell,
        recursion is a common idiom, and the compiler is smart enough to avoid
        consuming much stack by optimizing tail-recursive functions.</p></blockquote><a name="x_aC" class="calibre27" id="x_aC"></a><p class="docText">Notice that <tt class="calibre34">return</tt>
    call. <a name="I_indexterm7_d1e19191" class="calibre27" id="I_indexterm7_d1e19191"></a>This is not really the same as <tt class="calibre34">return</tt> in C or Python. In those languages,
    <tt class="calibre34">return</tt> is used to terminate execution
    of the current function immediately, and to return a value to the caller.
    In Haskell, <tt class="calibre34">return</tt> is the opposite of
    <tt class="calibre34">&lt;-</tt>. That is, <tt class="calibre34">return</tt> takes a pure value and wraps it inside
    IO. Since every I/O action must return some IO
    type, if your result came from pure computation, you must use <tt class="calibre34">return</tt> to wrap it in IO. As an
    example, if <tt class="calibre34">7</tt> is an <tt class="calibre34">Int</tt>, then <tt class="calibre34">return
    7</tt> would create an action stored in a value of type <tt class="calibre34">IO Int</tt>. When executed, that action would produce
    the result <tt class="calibre34">7</tt>. For more details on
    <tt class="calibre34">return</tt>, see <a class="docLink" href="io_monad.html#io_return">Section 7.5.3</a>.</p><a name="x_bC" class="calibre27" id="x_bC"></a><p class="docText">Let's try running the program. We've got a file named
    <i class="docEmphasis">input.txt</i> that looks like this:</p><pre class="calibre39">This is ch07/input.txt

Test Input
I like Haskell
Haskell is great
I/O is fun

123456789</pre><br class="calibre48"/>
<a name="x_cC" class="calibre27" id="x_cC"></a><p class="docText">Now, you can use <tt class="calibre34">runghc
    toupper-imp.hs</tt> and you'll find <tt class="calibre34">output.txt</tt> in your directory. It should look
    like this:</p><pre class="calibre39">THIS IS CH07/INPUT.TXT

TEST INPUT
I LIKE HASKELL
HASKELL IS GREAT
I/O IS FUN

123456789</pre><br class="calibre48"/>
<a name="io_files_openFile" class="calibre27" id="io_files_openFile"></a><h4 id="title-IDAJSOVC" class="docSection1Title">7.2.1. More on openFile</h4><a name="x_dC" class="calibre27" id="x_dC"></a><p class="docText">Let's use <i class="docEmphasis">ghci</i>
      to<a name="I_indexterm7_d1e19271" class="calibre27" id="I_indexterm7_d1e19271"></a> check on the type of <tt class="calibre34">openFile</tt>:</p><pre class="calibre39">ghci&gt; <b class="calibre40">:module System.IO</b>ghci&gt; <b class="calibre40">:type openFile</b>
openFile :: FilePath -&gt; IOMode -&gt; IO Handle</pre><a name="x_eC" class="calibre27" id="x_eC"></a><p class="docText"><tt class="calibre34">FilePath</tt> is simply
      another name for <tt class="calibre34">String</tt>. It is used
      in the types of I/O functions to help clarify that the parameter is
      being used as a filename, and not as regular data.</p><a name="x_fC" class="calibre27" id="x_fC"></a><p class="docText"><tt class="calibre34">IOMode</tt> specifies how
      the file is to be managed. The possible values for <tt class="calibre34">IOMode</tt> are listed in <a class="docLink" href="#io_files_openFile_IOModes">Table 7-2</a>.</p><a name="io_files_openFile_IOModes" class="calibre27" id="io_files_openFile_IOModes"></a><p class="calibre37"><table cellspacing="0" border="1" rules="all" cellpadding="4" width="100%" class="calibre54"><caption class="calibre55"><h5 class="docTableTitle">Table 7-2. Possible IOMode values</h5></caption><colgroup span="5" class="calibre56"><col class="calibre57"/><col class="calibre57"/><col class="calibre57"/><col class="calibre57"/><col class="calibre57"/></colgroup><thead class="calibre58"><tr class="calibre59"><th class="thead" scope="col">IOMode</th><th class="thead" scope="col">Can read?</th><th class="thead" scope="col">Can write?</th><th class="thead" scope="col">Starting position</th><th class="thead" scope="col">Notes</th></tr></thead><tr class="calibre16"><td class="docTableCell">
<tt class="calibre34">ReadMode</tt>
</td><td class="docTableCell">Yes</td><td class="docTableCell">No</td><td class="docTableCell">Beginning of file</td><td class="docTableCell">File must exist already.</td></tr><tr class="calibre16"><td class="docTableCell">
<tt class="calibre34">WriteMode</tt>
</td><td class="docTableCell">No</td><td class="docTableCell">Yes</td><td class="docTableCell">Beginning of file</td><td class="docTableCell">File is truncated (completely emptied) if it already
              existed.</td></tr><tr class="calibre16"><td class="docTableCell">
<tt class="calibre34">ReadWriteMode</tt>
</td><td class="docTableCell">Yes</td><td class="docTableCell">Yes</td><td class="docTableCell">Beginning of file</td><td class="docTableCell">File is created if it didn't exist; otherwise, existing
              data is left intact.</td></tr><tr class="calibre16"><td class="docTableCell">
<tt class="calibre34">AppendMode</tt>
</td><td class="docTableCell">No</td><td class="docTableCell">Yes</td><td class="docTableCell">End of file</td><td class="docTableCell">File is created if it didn't exist; otherwise, existing
              data is left intact.</td></tr></table></p><br class="calibre48"/><a name="x_gC" class="calibre27" id="x_gC"></a><p class="docText">While we are mostly working with text examples in this
      chapter, binary files can also be used in Haskell. If you are working
      with a binary file, you should use <tt class="calibre34">openBinaryFile</tt> instead of <tt class="calibre34">openFile</tt>. Operating systems such as Windows
      process files differently if they are opened as binary instead of as
      text. On operating systems such as Linux, both <tt class="calibre34">openFile</tt> and <tt class="calibre34">openBinaryFile</tt> perform the same operation.
      Nevertheless, for portability, it is still wise to always use <tt class="calibre34">openBinaryFile</tt> if you will be dealing with
      binary data.</p><a name="io_files_closing" class="calibre27" id="io_files_closing"></a><h4 id="title-IDAAXOVC" class="docSection1Title">7.2.2. Closing Handles</h4><a name="x_hC" class="calibre27" id="x_hC"></a><p class="docText">You've<a name="I_indexterm7_d1e19399" class="calibre27" id="I_indexterm7_d1e19399"></a><a name="I_indexterm7_d1e19404" class="calibre27" id="I_indexterm7_d1e19404"></a> already seen that <tt class="calibre34">hClose</tt> is used to close file handles. Let's
      take a moment and think about why this is important.</p><a name="x_iC" class="calibre27" id="x_iC"></a><p class="docText">As you'll see in <a class="docLink" href="io_buffering.html#io_buffering">Section 7.8</a>,
      Haskell maintains internal buffers for files. This provides an important
      performance boost. However, it means that until you call <tt class="calibre34">hClose</tt> on a file that is open for writing,
      your data may not be flushed out to the operating system.</p><a name="x_jC" class="calibre27" id="x_jC"></a><p class="docText">Another reason to make sure to <tt class="calibre34">hClose</tt> files is that open files take up
      resources on the system. If your program runs for a long time, and opens
      many files but fails to close them, it is conceivable that your program
      could even crash due to resource exhaustion. All of this is no different
      in Haskell than in other languages.</p><a name="x_kC" class="calibre27" id="x_kC"></a><p class="docText">When a program exits, Haskell will normally take care of
      closing any files that remain open. However, there are some
      circumstances in which this may not happen,<sup class="docFootnote"><a class="docLink1" href="#x_kCd1e19785">[19]</a></sup> so once again, it is best to be responsible and call
      <tt class="calibre34">hClose</tt> all the time.</p><blockquote class="calibre30"><p class="docFootnote1"><sup class="calibre50"><a name="x_kCd1e19785" class="calibre5" id="x_kCd1e19785">[19]</a></sup> If there was a bug in the C part of a hybrid
          program, for instance.</p></blockquote><a name="x_aN" class="calibre27" id="x_aN"></a><p class="docText">Haskell provides several tools for you to use to easily
      ensure this happens, regardless of whether errors are present. You can
      read about <tt class="calibre34">finally</tt> in <a class="docLink" href="io_example.html#io_example">Section 7.3</a> and <tt class="calibre34">bracket</tt>
      in <a class="docLink" href="I_sect19_d1e23695_split_000.html#find_acquire_use_release">Section 9.5.1</a>.</p><a name="io_files_seeking" class="calibre27" id="io_files_seeking"></a><h4 id="title-IDARZOVC" class="docSection1Title">7.2.3. Seek and Tell</h4><a name="x_mC" class="calibre27" id="x_mC"></a><p class="docText">When reading and writing from a <tt class="calibre34">Handle</tt> that corresponds to a file on disk, the
      operating system maintains an internal record of the current position.
      Each time you do another read, the operating system returns the next
      chunk of data that begins at the current position, and increments the
      position to reflect the data that you read.</p><a name="x_nC" class="calibre27" id="x_nC"></a><p class="docText">You can use <tt class="calibre34">hTell</tt>
      to<a name="I_indexterm7_d1e19457" class="calibre27" id="I_indexterm7_d1e19457"></a> find out your current position in the file. When the file
      is initially created, it is empty and your position will be 0. After you
      write out 5 bytes, your position will be 5, and so on. <tt class="calibre34">hTell</tt> takes a <tt class="calibre34">Handle</tt> and returns an <tt class="calibre34">IO Integer</tt> with your position.</p><a name="x_oC" class="calibre27" id="x_oC"></a><p class="docText">The companion to <tt class="calibre34">hTell</tt> is <tt class="calibre34">hSeek</tt>. <tt class="calibre34">hSeek</tt> lets <a name="I_indexterm7_d1e19481" class="calibre27" id="I_indexterm7_d1e19481"></a>you change the file position. It takes three parameters: a
      <tt class="calibre34">Handle</tt>, a <tt class="calibre34">SeekMode</tt>, and a position.</p><a name="x_pC" class="calibre27" id="x_pC"></a><p class="docText"><tt class="calibre34">SeekMode</tt>
      can<a name="I_indexterm7_d1e19496" class="calibre27" id="I_indexterm7_d1e19496"></a> be one of three different values, which specify how the
      given position is to be interpreted. <tt class="calibre34">AbsoluteSeek</tt> means that the position is a
      precise location in the file. This is the same kind of information that
      <tt class="calibre34">hTell</tt> gives you. <tt class="calibre34">RelativeSeek</tt> means to seek from the current
      position. A positive number requests going forwards in the file, and a
      negative number means going backwards. Finally, <tt class="calibre34">SeekFromEnd</tt> will seek to the specified number
      of bytes before the end of the file. <tt class="calibre34">hSeek
      handle SeekFromEnd 0</tt> will take you to the end of the file. For
      an example of <tt class="calibre34">hSeek</tt>, refer to <a class="docLink" href="io_example.html#io_example">Section 7.3</a>.</p><a name="x_qC" class="calibre27" id="x_qC"></a><p class="docText">Not all <tt class="calibre34">Handle</tt>s are
      seekable. A <tt class="calibre34">Handle</tt> usually
      corresponds to a file, but it can also correspond to other things such
      as network connections, tape drives, or terminals. You can use <tt class="calibre34">hIsSeekable</tt> to see if a given <tt class="calibre34">Handle</tt> is seekable.</p><a name="io_files_stdin" class="calibre27" id="io_files_stdin"></a><h4 id="title-IDAM3OVC" class="docSection1Title">7.2.4. Standard Input, Output, and Error</h4><a name="x_rC" class="calibre27" id="x_rC"></a><p class="docText">Earlier,<a name="I_indexterm7_d1e19540" class="calibre27" id="I_indexterm7_d1e19540"></a><a name="I_indexterm7_d1e19545" class="calibre27" id="I_indexterm7_d1e19545"></a> we pointed out that for each non-"h" function, there is
      usually also a corresponding "h" function that works on any <tt class="calibre34">Handle</tt>. In fact, the non-"h" functions are
      nothing more than shortcuts for their "h" counterparts.</p><a name="x_sC" class="calibre27" id="x_sC"></a><p class="docText">There are three predefined <tt class="calibre34">Handle</tt>s in <tt class="calibre34">System.IO</tt>. These<a name="I_indexterm7_d1e19562" class="calibre27" id="I_indexterm7_d1e19562"></a> <tt class="calibre34">Handle</tt>s are always
      available for your use. They are <tt class="calibre34">stdin</tt>, which corresponds to standard<a name="I_indexterm7_d1e19575" class="calibre27" id="I_indexterm7_d1e19575"></a><a name="I_indexterm7_d1e19578" class="calibre27" id="I_indexterm7_d1e19578"></a><a name="I_indexterm7_d1e19581" class="calibre27" id="I_indexterm7_d1e19581"></a> input; <tt class="calibre34">stdout</tt> for
      standard output; and <tt class="calibre34">stderr</tt> for
      standard error. Standard input normally refers to the keyboard, standard
      output to the monitor, and standard error also normally goes to the
      monitor.</p><a name="x_uC" class="calibre27" id="x_uC"></a><p class="docText">Functions such as <tt class="calibre34">getLine</tt> can thus be trivially defined like
      this:</p><pre class="calibre39">getLine = hGetLine stdin
putStrLn = hPutStrLn stdout
print = hPrint stdout</pre><br class="calibre48"/>
<p class="calibre37"><table border="0" cellspacing="0" cellpadding="1" width="90%" class="calibre41"><tr class="calibre16"><td class="v3"><table width="100%" border="0" cellspacing="0" cellpadding="6" class="calibre42"><tr class="calibre16"><td width="60" valign="top" class="v3"><img src="tip_yellow.gif" alt="" class="calibre43"/></td><td valign="top" class="v3"><a name="x_bN" class="calibre27" id="x_bN"></a><p class="docText">We're using partial application here. If this isn't
        making sense, consult <a class="docLink" href="fp_partialapp.html#fp_partialapp">Section 4.8</a> for a
        refresher.</p></td></tr></table></td></tr></table></p><br class="calibre48"/><a name="x_vC" class="calibre27" id="x_vC"></a><p class="docText">Earlier, we told you what the three standard file
      handles "normally" correspond to. That's because some operating systems
      let you redirect the file handles to come from (or go to) different
      places—files, devices, or even other programs. This feature is used
      extensively in shell scripting on POSIX (Linux, BSD, Mac) operating
      systems, but can also be used on Windows.</p><a name="x_wC" class="calibre27" id="x_wC"></a><p class="docText">It often makes sense to use standard input and output
      instead of specific files. This lets you interact with a human at the
      terminal. But it also lets you work with input and output files—or even
      combine your code with other programs—if that's what's <span class="docEmphasis">requested</span>.<sup class="docFootnote"><a class="docLink1" href="#x_wCd1e19970">[20]</a></sup></p><blockquote class="calibre30"><p class="docFootnote1"><sup class="calibre50"><a name="x_wCd1e19970" class="calibre5" id="x_wCd1e19970">[20]</a></sup> For more information on interoperating with other
          programs with pipes, see <a class="docLink" href="systems_piping.html#systems_piping">Section 20.5</a>.</p></blockquote><a name="x_xC" class="calibre27" id="x_xC"></a><p class="docText">As an example, we can provide input to <tt class="calibre34">callingpure.hs</tt> in advance like this:</p><pre class="calibre39">$ <b class="calibre40">echo John|runghc callingpure.hs</b>
Greetings once again.  What is your name?
Pleased to meet you, John.
Your name contains 4 characters.</pre><a name="x_yC" class="calibre27" id="x_yC"></a><p class="docText">While <tt class="calibre34">callingpure.hs</tt>
      was running, it did not wait for input at the keyboard; instead it
      received <tt class="calibre34">John</tt> from the <tt class="calibre34">echo</tt> program. Notice also that the output
      didn't contain the word <tt class="calibre34">John</tt> on a
      separate line as it did when this program was run at the keyboard. The
      terminal normally echoes everything you type back to you, but that is
      technically input and not included in the output stream.</p><a name="io_files_ops" class="calibre27" id="io_files_ops"></a><h4 id="title-IDAACPVC" class="docSection1Title">7.2.5. Deleting and Renaming Files</h4><a name="x_zC" class="calibre27" id="x_zC"></a><p class="docText">So far in this chapter,<a name="I_indexterm7_d1e19644" class="calibre27" id="I_indexterm7_d1e19644"></a> we've discussed the contents of the files. Let's now talk
      a bit about the files themselves.</p><a name="x_AD" class="calibre27" id="x_AD"></a><p class="docText"><tt class="calibre34">System.Directory</tt>
      provides<a name="I_indexterm7_d1e19654" class="calibre27" id="I_indexterm7_d1e19654"></a> two functions you may find useful. <tt class="calibre34">removeFile</tt> takes a single argument, a
      filename, and deletes that file.<sup class="docFootnote"><a class="docLink1" href="#x_ADd1e20021">[21]</a></sup> <tt class="calibre34">renameFile</tt> takes two
      filenames: the first is the old name and the second is the new name. If
      the new filename is in a different directory, you can also think of this
      as a move. The old filename must exist prior to the call to <tt class="calibre34">renameFile</tt>. If the new file already exists, it
      is removed before the rename takes place.</p><blockquote class="calibre30"><p class="docFootnote1"><sup class="calibre50"><a name="x_ADd1e20021" class="calibre5" id="x_ADd1e20021">[21]</a></sup> POSIX programmers may be interested to know that
          this corresponds to <tt class="calibre34">unlink()</tt> in
          C.</p></blockquote><a name="x_rp" class="calibre27" id="x_rp"></a><p class="docText">Like many other functions that take a filename, if the
      "old" name doesn't exist, <tt class="calibre34">renameFile</tt> will raise an exception. More
      information on exception handling can be found in <a class="docLink" href="errors_split_000.html#errors">Chapter 19</a>.</p><a name="x_CD" class="calibre27" id="x_CD"></a><p class="docText">There are many other functions in <tt class="calibre34">System.Directory</tt> for doing things such as
      creating and removing directories, finding lists of files in
      directories, and testing for file existence. These are discussed in
      <a class="docLink" href="systems_directories.html#systems_directories">Section 20.2</a>.</p><a name="io_files_temp" class="calibre27" id="io_files_temp"></a><h4 id="title-IDAKEPVC" class="docSection1Title">7.2.6. Temporary Files</h4><a name="x_DD" class="calibre27" id="x_DD"></a><p class="docText">Programmers<a name="I_indexterm7_d1e19693" class="calibre27" id="I_indexterm7_d1e19693"></a><a name="I_indexterm7_d1e19696" class="calibre27" id="I_indexterm7_d1e19696"></a> frequently need temporary files. These files may be used
      to store large amounts of data needed for computations, data to be used
      by other programs, or any number of other uses.</p><a name="x_ED" class="calibre27" id="x_ED"></a><p class="docText">While you could craft a way to manually open files with
      unique names, the details of doing this in a secure way differ from
      platform to platform. Haskell provides a convenient function <a name="I_indexterm7_d1e19704" class="calibre27" id="I_indexterm7_d1e19704"></a>called <tt class="calibre34">openTempFile</tt>
      (and a corresponding <tt class="calibre34">openBinaryTempFile</tt>) to handle the difficult
      bits for<a name="I_indexterm7_d1e19714" class="calibre27" id="I_indexterm7_d1e19714"></a> you.</p><a name="x_FD" class="calibre27" id="x_FD"></a><p class="docText"><tt class="calibre34">openTempFile</tt> takes
      two parameters: the directory in which to create the file, and a
      "template" for naming the file. The directory could simply be <tt class="calibre34">"."</tt> for the current <span class="docEmphasis">working</span> directory. Or you could use
      <tt class="calibre34">System.Directory.getTemporaryDirectory</tt> to find
      the best place for temporary files on a given machine. The template is
      used as the basis for the filename; it will have some random characters
      added to it to ensure that the result is truly unique. It guarantees
      that it will be working on a unique filename, in fact.</p><a name="x_GD" class="calibre27" id="x_GD"></a><p class="docText">The return type of <tt class="calibre34">openTempFile</tt> is <tt class="calibre34">IO
      (FilePath, Handle)</tt>. The first part of the tuple is the name of
      the file created, and the second is a <tt class="calibre34">Handle</tt> opened in <tt class="calibre34">ReadWriteMode</tt> over that file. When you're done
      with the file, you'll want to <tt class="calibre34">hClose</tt>
      it and then call <tt class="calibre34">removeFile</tt> to delete
      it. See the following example for a sample function to use.</p>
<ul class="calibre18"></ul></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="middle" class="v3" height="5">
                        <img src="pixel.gif" alt="" border="0" class="calibre32"/>
                      </td>
                    </tr>
                    <tr class="calibre16">
                      <td valign="middle" class="v3">
                        <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody1">
                          <tr class="calibre16">
                            <td class="v5"><span class="calibre33"> </span>
                   
                  <span class="calibre33">   </span>
             <span class="calibre33"> </span></td>
                          </tr>
                        </table>
                      </td>
                      <td class="v3"/>
                      <td valign="middle" class="v6"> 
           
          <span class="calibre33"><a target="_self" href="io_basics.html" title="Previous section" class="calibre2"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre17"/></a></span>
				
				 
				
				<span class="calibre33"><a target="_self" href="io_example.html" title="Next section" class="calibre2"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre17"/></a></span></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v6">
                        <span class="calibre33"></span>
                      </td>
                    </tr>
                  </table>
                </div>
                <!--IP User 2-->
              </td>
            </tr>
          </table>
        </td>
        <td class="calibre7">
                         
                      </td>
      </tr>
      <tr class="calibre6">
        <td colspan="3" valign="bottom" class="calibre7">
          <br class="calibre20"/>
          <p class="v4"></p>
          <br class="calibre20"/>
        </td>
      </tr>
    </table>
  </div>

{% endraw %}

