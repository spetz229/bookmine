---
layout: page
title: "Real World Haskell, 1st Edition"
prev: I_sect15_d1e13228.html
next: I_sect15_d1e13394.html
book_path: books/real-world-haskell-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

    <a name="toppage" class="calibre5" id="toppage"></a>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody">
      <tr valign="top" class="calibre6">
        <td class="calibre7">
          <a name="MainContent" class="calibre5" id="MainContent"></a>
          <table width="95%" class="sfbody">
            <tr class="calibre6">
              <td class="v">
                <!--Copyright (c) 2002 Safari Tech Books Online-->
                <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody">
                  <tr class="calibre6">
                    <td valign="middle" class="v1" height="5">
                      <img src="pixel.gif" alt="" border="0" class="calibre8"/>
                    </td>
                  </tr>
                  <tr class="calibre6">
                    <td valign="middle" class="v1">
                      <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody">
                        <tr class="calibre6">
                          <td class="v"><span class="calibre9"> </span>
                   
                  <span class="calibre9">   </span>
             <span class="calibre9"> </span></td>
                        </tr>
                      </table>
                    </td>
                    <td class="v1"/>
                    <td valign="middle" class="v2"> 
           
          <span class="calibre9"><a target="_self" href="I_sect15_d1e13228.html" title="Previous section" class="calibre13"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre14"/></a></span>
				
				 
				
				<span class="calibre9"><a target="_self" href="I_sect15_d1e13394.html" title="Next section" class="calibre13"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre14"/></a></span></td>
                  </tr>
                </table>
                <div id="section" class="calibre15">
                  <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v3">Safari IT Books Language Constructs Functional Programming Haskell Safari IT Books Programming Programming Programming Bryan O'Sullivan  Donald Bruce Stewart  John Goerzen  O'Reilly Media, Inc. Real World Haskell, 1st Edition<a name="I_sect15_d1e13316" class="calibre27" id="I_sect15_d1e13316"></a><h3 id="title-IDAYLJN" class="docSection1Title">5.8. A More General Look at Rendering</h3><a name="x_Mn" class="calibre27" id="x_Mn"></a><p class="docText">Our<a name="I_indexterm5_d1e13321" class="calibre27" id="I_indexterm5_d1e13321"></a><a name="I_indexterm5_d1e13322" class="calibre27" id="I_indexterm5_d1e13322"></a> JSON rendering code is narrowly tailored to the exact needs
    of our data types and the JSON formatting conventions. The output it
    produces can be unfriendly to human eyes. We will now look at rendering as
    a more generic task: how can we build a library that is useful for
    rendering data in a variety of situations?</p><a name="x_mD1" class="calibre27" id="x_mD1"></a><p class="docText">We would like to produce output that is suitable either
    for human consumption (e.g., for debugging) or for machine processing.
    Libraries that perform this job are referred to as<a name="I_indexterm5_d1e13328" class="calibre27" id="I_indexterm5_d1e13328"></a> <span class="docEmphasis">pretty printers</span>. Several Haskell
    pretty-printing libraries already exist. We are creating one of our own
    not to replace them, but for the many useful insights we will gain into
    both library design and functional programming techniques.</p><a name="x_nD1" class="calibre27" id="x_nD1"></a><p class="docText">We will call our generic pretty-printing module
    <tt class="calibre34">Prettify</tt>, so our code will go into a source file named
    <i class="docEmphasis">Prettify.hs</i>.</p><a name="I_sect15_d1e13316d1e13407" class="calibre27" id="I_sect15_d1e13316d1e13407"></a><div class="docNote"><p class="docNormalTitle">NOTE</p><p class="calibre37"><a name="x_oD1" class="calibre27" id="x_oD1"></a></p><p class="docText">In our <tt class="calibre34">Prettify</tt> module, we will base our
      names on those used by several established Haskell pretty-printing
      libraries., which will give us a degree of compatibility with existing
      mature libraries.</p></div><a name="x_pD1" class="calibre27" id="x_pD1"></a><p class="docText">To make sure that <tt class="calibre34">Prettify</tt> meets practical
    needs, we write a new JSON renderer that uses the <tt class="calibre34">Prettify</tt>
    API. After we're done, we'll go back and fill in the details of the
    <tt class="calibre34">Prettify</tt> module.</p><a name="x_Nn" class="calibre27" id="x_Nn"></a><p class="docText">Instead of rendering straight to a string, our
    <tt class="calibre34">Prettify</tt> module will use an abstract type that we'll call
    Doc. By basing our generic rendering library on an abstract
    type, we can choose an implementation that is flexible and efficient. If
    we decide to change the underlying code, our users will not be able to
    tell.</p><a name="x_Pn" class="calibre27" id="x_Pn"></a><p class="docText">We will name our new JSON rendering module <i class="docEmphasis">PrettyJSON.hs</i> and retain the name <i class="docEmphasis">renderJValue</i> for the rendering function.
    Rendering one of the basic JSON values is straightforward:</p><pre class="calibre39">-- file: ch05/PrettyJSON.hs
renderJValue :: JValue -&gt; Doc
renderJValue (JBool True)  = text "true"
renderJValue (JBool False) = text "false"
renderJValue JNull         = text "null"
renderJValue (JNumber num) = double num
renderJValue (JString str) = string str</pre><br class="calibre48"/>
<a name="x_Qn" class="calibre27" id="x_Qn"></a><p class="docText">Our <tt class="calibre34">Prettify</tt> module provides the <i class="docEmphasis">text</i>, <i class="docEmphasis">double</i>, and <i class="docEmphasis">string</i> functions.</p>
<ul class="calibre18"></ul></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="middle" class="v3" height="5">
                        <img src="pixel.gif" alt="" border="0" class="calibre32"/>
                      </td>
                    </tr>
                    <tr class="calibre16">
                      <td valign="middle" class="v3">
                        <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody1">
                          <tr class="calibre16">
                            <td class="v5"><span class="calibre33"> </span>
                   
                  <span class="calibre33">   </span>
             <span class="calibre33"> </span></td>
                          </tr>
                        </table>
                      </td>
                      <td class="v3"/>
                      <td valign="middle" class="v6"> 
           
          <span class="calibre33"><a target="_self" href="I_sect15_d1e13228.html" title="Previous section" class="calibre2"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre17"/></a></span>
				
				 
				
				<span class="calibre33"><a target="_self" href="I_sect15_d1e13394.html" title="Next section" class="calibre2"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre17"/></a></span></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v6">
                        <span class="calibre33"></span>
                      </td>
                    </tr>
                  </table>
                </div>
                <!--IP User 2-->
              </td>
            </tr>
          </table>
        </td>
        <td class="calibre7">
                         
                      </td>
      </tr>
      <tr class="calibre6">
        <td colspan="3" valign="bottom" class="calibre7">
          <br class="calibre20"/>
          <p class="v4"></p>
          <br class="calibre20"/>
        </td>
      </tr>
    </table>
  </div>

{% endraw %}

