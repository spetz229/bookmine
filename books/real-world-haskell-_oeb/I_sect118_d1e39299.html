---
layout: page
title: "Real World Haskell, 1st Edition"
prev: monadtrans_split_001.html
next: I_sect118_d1e39405.html
book_path: books/real-world-haskell-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

    <a name="toppage" class="calibre5" id="toppage"></a>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody">
      <tr valign="top" class="calibre6">
        <td class="calibre7">
          <a name="MainContent" class="calibre5" id="MainContent"></a>
          <table width="95%" class="sfbody">
            <tr class="calibre6">
              <td class="v">
                <!--Copyright (c) 2002 Safari Tech Books Online-->
                <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody">
                  <tr class="calibre6">
                    <td valign="middle" class="v1" height="5">
                      <img src="pixel.gif" alt="" border="0" class="calibre8"/>
                    </td>
                  </tr>
                  <tr class="calibre6">
                    <td valign="middle" class="v1">
                      <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody">
                        <tr class="calibre6">
                          <td class="v"><span class="calibre9"> </span>
                   
                  <span class="calibre9">   </span>
             <span class="calibre9"> </span></td>
                        </tr>
                      </table>
                    </td>
                    <td class="v1"/>
                    <td valign="middle" class="v2"> 
           
          <span class="calibre9"><a target="_self" href="monadtrans_split_000.html" title="Previous section" class="calibre13"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre14"/></a></span>
				
				 
				
				<span class="calibre9"><a target="_self" href="I_sect118_d1e39405.html" title="Next section" class="calibre13"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre14"/></a></span></td>
                  </tr>
                </table>
                <div id="section" class="calibre15">
                  <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v3">Safari IT Books Language Constructs Functional Programming Haskell Safari IT Books Programming Programming Programming Bryan O'Sullivan  Donald Bruce Stewart  John Goerzen  O'Reilly Media, Inc. Real World Haskell, 1st Edition<a name="I_sect118_d1e39299" class="calibre27" id="I_sect118_d1e39299"></a><h3 id="title-IDAQLGBD" class="docSection1Title">18.1. Motivation: Boilerplate Avoidance</h3><a name="x_Ct" class="calibre27" id="x_Ct"></a><p class="docText">Monads<a name="ch18-monadstranformers" class="calibre27" id="ch18-monadstranformers"></a> provide a powerful way to build computations with effects.
    Each of the standard monads is specialized to do exactly one thing. In
    real code, we often need to be able to use several effects at once.</p><a name="x_Dt" class="calibre27" id="x_Dt"></a><p class="docText">Recall the Parse type<a name="I_indexterm18_d1e39315" class="calibre27" id="I_indexterm18_d1e39315"></a> that we developed in <a class="docLink" href="binary_split_000.html#binary">Chapter 10</a>, for
    instance. When we introduced monads, we mentioned that this type was a
    <tt class="calibre34">State</tt> monad<a name="I_indexterm18_d1e39324" class="calibre27" id="I_indexterm18_d1e39324"></a> in disguise. Our monad is more complex than the standard
    State monad, because it uses the Either
    type<a name="I_indexterm18_d1e39335" class="calibre27" id="I_indexterm18_d1e39335"></a> to allow the possibility of a parsing failure. In our case,
    if a parse fails early on, we want to stop parsing, not continue in some
    broken state. Our monad combines the effect of carrying state around with
    the effect of early exit.</p><a name="x_Et" class="calibre27" id="x_Et"></a><p class="docText">The normal State monad doesn't let us escape
    in this way; it carries state only. It uses the default implementation of
    <i class="docEmphasis">fail</i>: this calls <i class="docEmphasis">error</i>, which throws an exception that we can't
    catch in pure code. The State monad thus
    <span class="docEmphasis">appears</span> to allow for failure, without that capability
    actually being any use. (Once again, we recommend that you almost always
    avoid using <i class="docEmphasis">fail</i>!)</p><a name="x_Ft" class="calibre27" id="x_Ft"></a><p class="docText">It would be ideal if we could somehow take the standard
    State monad and add failure handling to it, without resorting
    to the wholesale construction of custom monads by hand. The standard
    monads in the <tt class="calibre34">mtl</tt> library<a name="I_indexterm18_d1e39368" class="calibre27" id="I_indexterm18_d1e39368"></a> don't allow us to combine them. Instead, the library
    provides a set of <span class="docEmphasis">monad transformers</span><sup class="docFootnote"><a class="docLink1" href="#x_Ftd1e39697">[39]</a></sup> to achieve the same result.</p><blockquote class="calibre30"><p class="docFootnote1"><sup class="calibre50"><a name="x_Ftd1e39697" class="calibre5" id="x_Ftd1e39697">[39]</a></sup> The name <tt class="calibre34">mtl</tt> stands for "monad
        transformer library."</p></blockquote><a name="x_Ht" class="calibre27" id="x_Ht"></a><p class="docText">A monad transformer is similar to a regular monad, but
    it's not a standalone entity. Instead, it modifies the behavior of an
    underlying monad. Most of the monads in the <tt class="calibre34">mtl</tt> library have
    transformer equivalents. By convention, the transformer version of a monad
    has the same name, with a <tt class="calibre34">T</tt> stuck on the end. For example,
    the transformer equivalent of State is StateT;
    it adds mutable state to an underlying monad. <a name="I_indexterm18_d1e39397" class="calibre27" id="I_indexterm18_d1e39397"></a>The WriterT monad transformer makes it possible
    to write data when stacked on top of another monad.</p>
<a href="21061538.html" class="calibre2"><img src="pixel.gif" alt="" border="0" class="calibre31"/></a><ul class="calibre18"></ul></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="middle" class="v3" height="5">
                        <img src="pixel.gif" alt="" border="0" class="calibre32"/>
                      </td>
                    </tr>
                    <tr class="calibre16">
                      <td valign="middle" class="v3">
                        <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody1">
                          <tr class="calibre16">
                            <td class="v5"><span class="calibre33"> </span>
                   
                  <span class="calibre33">   </span>
             <span class="calibre33"> </span></td>
                          </tr>
                        </table>
                      </td>
                      <td class="v3"/>
                      <td valign="middle" class="v6"> 
           
          <span class="calibre33"><a target="_self" href="monadtrans_split_000.html" title="Previous section" class="calibre2"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre17"/></a></span>
				
				 
				
				<span class="calibre33"><a target="_self" href="I_sect118_d1e39405.html" title="Next section" class="calibre2"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre17"/></a></span></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v6">
                        <span class="calibre33"></span>
                      </td>
                    </tr>
                  </table>
                </div>
                <!--IP User 2-->
              </td>
            </tr>
          </table>
        </td>
        <td class="calibre7">
                         
                      </td>
      </tr>
      <tr class="calibre6">
        <td colspan="3" valign="bottom" class="calibre7">
          <br class="calibre20"/>
          <p class="v4"></p>
          <br class="calibre20"/>
        </td>
      </tr>
    </table>
  </div>

{% endraw %}

