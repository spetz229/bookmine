---
layout: page
title: "Real World Haskell, 1st Edition"
prev: databases_metadata.html
next: webclient_split_000.html
book_path: books/real-world-haskell-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

    <a name="toppage" class="calibre5" id="toppage"></a>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody">
      <tr valign="top" class="calibre6">
        <td class="calibre7">
          <a name="MainContent" class="calibre5" id="MainContent"></a>
          <table width="95%" class="sfbody">
            <tr class="calibre6">
              <td class="v">
                <!--Copyright (c) 2002 Safari Tech Books Online-->
                <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody">
                  <tr class="calibre6">
                    <td valign="middle" class="v1" height="5">
                      <img src="pixel.gif" alt="" border="0" class="calibre8"/>
                    </td>
                  </tr>
                  <tr class="calibre6">
                    <td valign="middle" class="v1">
                      <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody">
                        <tr class="calibre6">
                          <td class="v"><span class="calibre9"> </span>
                   
                  <span class="calibre9">   </span>
             <span class="calibre9"> </span></td>
                        </tr>
                      </table>
                    </td>
                    <td class="v1"/>
                    <td valign="middle" class="v2"><a href="21061538.html" class="calibre13"><img src="btn_next_.gif" alt="Next" border="0" class="calibre26"/></a> 
           
          <span class="calibre9"><a target="_self" href="databases_metadata.html" title="Previous section" class="calibre13"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre14"/></a></span>
				
				 
				
				<span class="calibre9"><a target="_self" href="webclient_split_000.html" title="Next section" class="calibre13"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre14"/></a></span></td>
                  </tr>
                </table>
                <div id="section" class="calibre15">
                  <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v3">Safari IT Books Language Constructs Functional Programming Haskell Safari IT Books Programming Programming Programming Bryan O'Sullivan  Donald Bruce Stewart  John Goerzen  O'Reilly Media, Inc. Real World Haskell, 1st Edition<a name="databases_errors" class="calibre27" id="databases_errors"></a><h3 id="643999-812" class="docSection1Title">21.11. Error Handling</h3><a name="x_Jd" class="calibre27" id="x_Jd"></a><p class="docText">HDBC will raise exceptions when errors<a name="I_indexterm21_d1e45247" class="calibre27" id="I_indexterm21_d1e45247"></a> occur. The exceptions have type <tt class="calibre34">SqlError</tt>. They<a name="I_indexterm21_d1e45258" class="calibre27" id="I_indexterm21_d1e45258"></a> convey information from the underlying SQL engine, such as
    the database's state, the error message, and the database's numeric error
    code, if any.</p><a name="x_Kd" class="calibre27" id="x_Kd"></a><p class="docText"><i class="docEmphasis">ghc</i>i
    does not know how to display an <tt class="calibre34">SqlError</tt> on the screen when it occurs. While the
    exception will cause the program to terminate, it will not display a
    useful message. Here's an example:</p><pre class="calibre39">ghci&gt; <b class="calibre40">conn &lt;- connectSqlite3 "test1.db"</b>ghci&gt; <b class="calibre40">quickQuery' conn "SELECT * from test2" []</b>
*** Exception: (unknown)
ghci&gt; <b class="calibre40">disconnect conn</b></pre><a name="x_Ld" class="calibre27" id="x_Ld"></a><p class="docText">Here we tried to SELECT data from a table that didn't
    exist. The error message we got wasn't helpful. There's a utility
    function, <tt class="calibre34">handleSqlError</tt>, that will
    catch an <tt class="calibre34">SqlError</tt>
    and re-raise it as an <tt class="calibre34">IOError</tt>. In this
    form, it will be printable onscreen, but it will be more difficult to
    extract specific pieces of information programmatically. Let's look at its
    usage:</p><pre class="calibre39">ghci&gt; <b class="calibre40">conn &lt;- connectSqlite3 "test1.db"</b>ghci&gt; <b class="calibre40">handleSqlError $ quickQuery' conn "SELECT * from test2" []</b>
*** Exception: user error (SQL error: SqlError {seState = "", seNativeError = 1, 
seErrorMsg = "prepare 20: SELECT * from test2: no such table: test2"})
ghci&gt; <b class="calibre40">disconnect conn</b></pre><a name="x_Md" class="calibre27" id="x_Md"></a><p class="docText">Here we got more information, including a message saying
    that there is no such table as test2. This is much more helpful. Many HDBC
    programmers make it a standard practice to start their programs with
    <tt class="calibre34">main = handleSqlError $ do</tt>, which will
    ensure that every uncaught <tt class="calibre34">SqlError</tt>
    will be printed in a helpful manner.</p><a name="x_Nd" class="calibre27" id="x_Nd"></a><p class="docText">There are also <tt class="calibre34">catchSql</tt>
    and <tt class="calibre34">handleSql</tt>—similar to the standard
    <tt class="calibre34">catch</tt> and <tt class="calibre34">handle</tt> functions. <tt class="calibre34">catchSql</tt> and <tt class="calibre34">handleSql</tt> will intercept HDBC errors only.
    <a name="I_indexterm21_d1e45344" class="calibre27" id="I_indexterm21_d1e45344"></a>For
    more information on error handling, refer to <a class="docLink" href="errors_split_000.html#errors">Chapter 19</a>.</p>
<ul class="calibre18"></ul></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="middle" class="v3" height="5">
                        <img src="pixel.gif" alt="" border="0" class="calibre32"/>
                      </td>
                    </tr>
                    <tr class="calibre16">
                      <td valign="middle" class="v3">
                        <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody1">
                          <tr class="calibre16">
                            <td class="v5"><span class="calibre33"> </span>
                   
                  <span class="calibre33">   </span>
             <span class="calibre33"> </span></td>
                          </tr>
                        </table>
                      </td>
                      <td class="v3"/>
                      <td valign="middle" class="v6"><a href="21061538.html" class="calibre2"><img src="btn_next_.gif" alt="Next" border="0" class="calibre31"/></a> 
           
          <span class="calibre33"><a target="_self" href="databases_metadata.html" title="Previous section" class="calibre2"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre17"/></a></span>
				
				 
				
				<span class="calibre33"><a target="_self" href="webclient_split_000.html" title="Next section" class="calibre2"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre17"/></a></span></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v6">
                        <span class="calibre33"></span>
                      </td>
                    </tr>
                  </table>
                </div>
                <!--IP User 2-->
              </td>
            </tr>
          </table>
        </td>
        <td class="calibre7">
                         
                      </td>
      </tr>
      <tr class="calibre6">
        <td colspan="3" valign="bottom" class="calibre7">
          <br class="calibre20"/>
          <p class="v4"></p>
          <br class="calibre20"/>
        </td>
      </tr>
    </table>
  </div>

{% endraw %}

