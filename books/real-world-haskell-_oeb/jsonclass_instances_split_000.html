---
layout: page
title: "Real World Haskell, 1st Edition"
prev: I_sect16_d1e17824.html
next: jsonclass_instances_split_001.html
book_path: books/real-world-haskell-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

    <a name="toppage" class="calibre5" id="toppage"></a>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody">
      <tr valign="top" class="calibre6">
        <td class="calibre7">
          <a name="MainContent" class="calibre5" id="MainContent"></a>
          <table width="95%" class="sfbody">
            <tr class="calibre6">
              <td class="v">
                <!--Copyright (c) 2002 Safari Tech Books Online-->
                <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody">
                  <tr class="calibre6">
                    <td valign="middle" class="v1" height="5">
                      <img src="pixel.gif" alt="" border="0" class="calibre8"/>
                    </td>
                  </tr>
                  <tr class="calibre6">
                    <td valign="middle" class="v1">
                      <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody">
                        <tr class="calibre6">
                          <td class="v"><span class="calibre9"> </span>
                   
                  <span class="calibre9">   </span>
             <span class="calibre9"> </span></td>
                        </tr>
                      </table>
                    </td>
                    <td class="v1"/>
                    <td valign="middle" class="v2"> 
           
          <span class="calibre9"><a target="_self" href="I_sect16_d1e17824.html" title="Previous section" class="calibre13"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre14"/></a></span>
				
				 
				
				<span class="calibre9"><a target="_self" href="I_sect16_d1e18419.html" title="Next section" class="calibre13"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre14"/></a></span></td>
                  </tr>
                </table>
                <div id="section" class="calibre15">
                  <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v3">Safari IT Books Language Constructs Functional Programming Haskell Safari IT Books Programming Programming Programming Bryan O'Sullivan  Donald Bruce Stewart  John Goerzen  O'Reilly Media, Inc. Real World Haskell, 1st Edition<a name="jsonclass_instances" class="calibre27" id="jsonclass_instances"></a><h3 id="title-IDAUQJIL" class="docSection1Title">6.9. JSON Typeclasses Without Overlapping Instances</h3><a name="x_m01" class="calibre27" id="x_m01"></a><p class="docText">Enabling<a name="I_indexterm6_d1e18188" class="calibre27" id="I_indexterm6_d1e18188"></a><a name="I_indexterm6_d1e18189" class="calibre27" id="I_indexterm6_d1e18189"></a><a name="I_indexterm6_d1e18190" class="calibre27" id="I_indexterm6_d1e18190"></a><a name="I_indexterm6_d1e18191" class="calibre27" id="I_indexterm6_d1e18191"></a><a name="ch06-jsonoverlapp" class="calibre27" id="ch06-jsonoverlapp"></a><a name="ch06-overlapping" class="calibre27" id="ch06-overlapping"></a> <span class="docMonofont">GHC</span>'s support
    for overlapping instances is an effective and quick way to make our JSON
    code happy. In more complex cases, we will occasionally be faced with
    several equally good instances for some typeclass, in which case,
    overlapping instances will not help us and we will need to put some
    <tt class="calibre34">newtype</tt> declarations into place. To see what's involved,
    let's rework our JSON typeclass instances to use <tt class="calibre34">newtype</tt>s
    instead<a name="I_indexterm6_d1e18215" class="calibre27" id="I_indexterm6_d1e18215"></a> of overlapping instances.</p><a name="x_n01" class="calibre27" id="x_n01"></a><p class="docText">Our first task, then, is to help the compiler to
    distinguish between [a], the representation we use for JSON
    arrays, and [(String,[a])], which we use for objects. These
    were the types that gave us problems before we learned about
    <tt class="calibre34">OverlappingInstances</tt>. We wrap up the list type so that the
    compiler will not see it as a list:</p><pre class="calibre39">-- file: ch06/JSONClass.hs
newtype JAry a = JAry {
      fromJAry :: [a]
    } deriving (Eq, Ord, Show)</pre><br class="calibre48"/>
<a name="x_o01" class="calibre27" id="x_o01"></a><p class="docText">When we export this type from our module, we'll export
    the complete details of the type. Our module header will look like
    this:</p><pre class="calibre39">-- file: ch06/JSONClassExport.hs
module JSONClass
    (
      JAry(..)
    ) where</pre><br class="calibre48"/>
<a name="x_p01" class="calibre27" id="x_p01"></a><p class="docText">The <tt class="calibre34">(..)</tt> following the JAry
    name means "export all details of this type."</p><a name="I_sidebar6_d1e18246" class="calibre27" id="I_sidebar6_d1e18246"></a></td>
                    </tr>
                  </table>
                </div>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </div>

{% endraw %}

