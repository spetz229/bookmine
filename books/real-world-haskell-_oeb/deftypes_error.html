---
layout: page
title: "Real World Haskell, 1st Edition"
prev: deftypes_recursive_split_001.html
next: deftypes_locals.html
book_path: books/real-world-haskell-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

    <a name="toppage" class="calibre5" id="toppage"></a>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody">
      <tr valign="top" class="calibre6">
        <td class="calibre7">
          <a name="MainContent" class="calibre5" id="MainContent"></a>
          <table width="95%" class="sfbody">
            <tr class="calibre6">
              <td class="v">
                <!--Copyright (c) 2002 Safari Tech Books Online-->
                <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody">
                  <tr class="calibre6">
                    <td valign="middle" class="v1" height="5">
                      <img src="pixel.gif" alt="" border="0" class="calibre8"/>
                    </td>
                  </tr>
                  <tr class="calibre6">
                    <td valign="middle" class="v1">
                      <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody">
                        <tr class="calibre6">
                          <td class="v"><span class="calibre9"> </span>
                   
                  <span class="calibre9">   </span>
             <span class="calibre9"> </span></td>
                        </tr>
                      </table>
                    </td>
                    <td class="v1"/>
                    <td valign="middle" class="v2"> 
           
          <span class="calibre9"><a target="_self" href="deftypes_recursive_split_000.html" title="Previous section" class="calibre13"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre14"/></a></span>
				
				 
				
				<span class="calibre9"><a target="_self" href="deftypes_locals.html" title="Next section" class="calibre13"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre14"/></a></span></td>
                  </tr>
                </table>
                <div id="section" class="calibre15">
                  <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v3">Safari IT Books Language Constructs Functional Programming Haskell Safari IT Books Programming Programming Programming Bryan O'Sullivan  Donald Bruce Stewart  John Goerzen  O'Reilly Media, Inc. Real World Haskell, 1st Edition<a name="deftypes_error" class="calibre27" id="deftypes_error"></a><h3 id="title-IDACEXSB" class="docSection1Title">3.8. Reporting Errors</h3><a name="x_w3" class="calibre27" id="x_w3"></a><p class="docText">Haskell<a name="I_indexterm3_d1e7451" class="calibre27" id="I_indexterm3_d1e7451"></a><a name="I_indexterm3_d1e7452" class="calibre27" id="I_indexterm3_d1e7452"></a><a name="I_indexterm3_d1e7453" class="calibre27" id="I_indexterm3_d1e7453"></a> provides a standard function, <i class="docEmphasis">error :: String -&gt; a</i>, that we can call when
    something has gone terribly wrong in our code. We give it a string
    parameter, which is the error message to display. Its type signature looks
    peculiar: how can it produce a value of any type <span class="docMonofont">a</span> given only a string?</p><a name="x_x3" class="calibre27" id="x_x3"></a><p class="docText">It has a result type of <span class="docMonofont">a</span>
    so that we can call it anywhere and it will always have the right type.
    However, it does not return a value like a normal function. Instead, it
    <span class="docEmphasis">immediately aborts evaluation</span> and prints the error
    message we give it.</p><a name="x_eg" class="calibre27" id="x_eg"></a><p class="docText">The <i class="docEmphasis">mySecond</i> function
    returns the second element of its input list but fails if its input list
    isn't long enough:</p><pre class="calibre39">-- file: ch03/MySecond.hs
mySecond :: [a] -&gt; a

mySecond xs = if null (tail xs)
              then error "list too short"
              else head (tail xs)</pre><br class="calibre48"/>
<a name="x_y3" class="calibre27" id="x_y3"></a><p class="docText">As usual, we can see how this works in practice in
    <i class="docEmphasis">ghci</i>:</p><pre class="calibre39">ghci&gt; <b class="calibre40">mySecond "xi"</b>
'i'
ghci&gt; <b class="calibre40">mySecond [2]</b>
*** Exception: list too short
ghci&gt; <b class="calibre40">head (mySecond [[9]])</b>
*** Exception: list too short</pre><a name="x_z3" class="calibre27" id="x_z3"></a><p class="docText">Notice the third case, where we try to use the result of
    the call to <i class="docEmphasis">mySecond</i> as the argument
    to another function. Evaluation still terminates and drops us back to the
    <i class="docEmphasis">ghci</i> prompt. This is the major weakness
    of using <i class="docEmphasis">error</i>: it doesn't let our
    caller distinguish between a recoverable error and a problem so severe
    that it really should terminate our program.</p><a name="x_CC1" class="calibre27" id="x_CC1"></a><p class="docText">As we have already seen, a pattern matching failure
    causes a similar unrecoverable error:</p><pre class="calibre39">ghci&gt; <b class="calibre40">mySecond []</b>
*** Exception: Prelude.tail: empty list
</pre><a name="deftypes_morecontrolled" class="calibre27" id="deftypes_morecontrolled"></a><h4 id="title-IDAGHXSB" class="docSection1Title">3.8.1. A More Controlled Approach</h4><a name="x_fg" class="calibre27" id="x_fg"></a><p class="docText">We can use the <tt class="calibre34">Maybe</tt> type to represent the
      possibility of an error.</p><a name="x_gg" class="calibre27" id="x_gg"></a><p class="docText">If we want to indicate that an operation has failed, we
      can use the <i class="docEmphasis">Nothing</i> constructor.
      Otherwise, we wrap our value with the <i class="docEmphasis">Just</i> constructor.</p><a name="x_hg" class="calibre27" id="x_hg"></a><p class="docText">Let's see how our <i class="docEmphasis">mySecond</i> function changes if we return a
      <tt class="calibre34">Maybe</tt> value instead of calling <i class="docEmphasis">error</i>:</p><pre class="calibre39">-- file: ch03/MySecond.hs
safeSecond :: [a] -&gt; Maybe a

safeSecond [] = Nothing
safeSecond xs = if null (tail xs)
                then Nothing
                else Just (head (tail xs))</pre><br class="calibre48"/>
<a name="x_ig" class="calibre27" id="x_ig"></a><p class="docText">If the list we're passed is too short, we return
      <tt class="calibre34">Nothing</tt> to our caller. This lets them decide what to do,
      while a call to <i class="docEmphasis">error</i> would force a
      crash:</p><pre class="calibre39">ghci&gt; <b class="calibre40">safeSecond []</b>
Nothing
ghci&gt; <b class="calibre40">safeSecond [1]</b>
Nothing
ghci&gt; <b class="calibre40">safeSecond [1,2]</b>
Just 2
ghci&gt; <b class="calibre40">safeSecond [1,2,3]</b>
Just 2</pre><a name="x_jg" class="calibre27" id="x_jg"></a><p class="docText">To return to an earlier topic, we can further improve
      the readability of this function with pattern matching:</p><pre class="calibre39">-- file: ch03/MySecond.hs
tidySecond :: [a] -&gt; Maybe a

tidySecond (_:x:_) = Just x
tidySecond _       = Nothing</pre><br class="calibre48"/>
<a name="x_kg" class="calibre27" id="x_kg"></a><p class="docText">The first pattern matches only if the list is at least
      two elements long (it contains two list constructors), and it binds the
      variable <span class="docMonofont">x</span> to the list's second element. The second
      pattern is matched if the first fails.</p>
<a href="21061538.html" class="calibre2"><img src="pixel.gif" alt="" border="0" class="calibre31"/></a><ul class="calibre18"></ul></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="middle" class="v3" height="5">
                        <img src="pixel.gif" alt="" border="0" class="calibre32"/>
                      </td>
                    </tr>
                    <tr class="calibre16">
                      <td valign="middle" class="v3">
                        <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody1">
                          <tr class="calibre16">
                            <td class="v5"><span class="calibre33"> </span>
                   
                  <span class="calibre33">   </span>
             <span class="calibre33"> </span></td>
                          </tr>
                        </table>
                      </td>
                      <td class="v3"/>
                      <td valign="middle" class="v6"> 
           
          <span class="calibre33"><a target="_self" href="deftypes_recursive_split_000.html" title="Previous section" class="calibre2"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre17"/></a></span>
				
				 
				
				<span class="calibre33"><a target="_self" href="deftypes_locals.html" title="Next section" class="calibre2"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre17"/></a></span></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v6">
                        <span class="calibre33"></span>
                      </td>
                    </tr>
                  </table>
                </div>
                <!--IP User 2-->
              </td>
            </tr>
          </table>
        </td>
        <td class="calibre7">
                         
                      </td>
      </tr>
      <tr class="calibre6">
        <td colspan="3" valign="bottom" class="calibre7">
          <br class="calibre20"/>
          <p class="v4"></p>
          <br class="calibre20"/>
        </td>
      </tr>
    </table>
  </div>

{% endraw %}

