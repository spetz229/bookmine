---
layout: page
title: "Real World Haskell, 1st Edition"
prev: barcode_split_001.html
next: barcode_array_split_000.html
book_path: books/real-world-haskell-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

    <a name="toppage" class="calibre5" id="toppage"></a>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody">
      <tr valign="top" class="calibre6">
        <td class="calibre7">
          <a name="MainContent" class="calibre5" id="MainContent"></a>
          <table width="95%" class="sfbody">
            <tr class="calibre6">
              <td class="v">
                <!--Copyright (c) 2002 Safari Tech Books Online-->
                <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody">
                  <tr class="calibre6">
                    <td valign="middle" class="v1" height="5">
                      <img src="pixel.gif" alt="" border="0" class="calibre8"/>
                    </td>
                  </tr>
                  <tr class="calibre6">
                    <td valign="middle" class="v1">
                      <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody">
                        <tr class="calibre6">
                          <td class="v"><span class="calibre9"> </span>
                   
                  <span class="calibre9">   </span>
             <span class="calibre9"> </span></td>
                        </tr>
                      </table>
                    </td>
                    <td class="v1"/>
                    <td valign="middle" class="v2"> 
           
          <span class="calibre9"><a target="_self" href="barcode_split_000.html" title="Previous section" class="calibre13"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre14"/></a></span>
				
				 
				
				<span class="calibre9"><a target="_self" href="barcode_array_split_000.html" title="Next section" class="calibre13"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre14"/></a></span></td>
                  </tr>
                </table>
                <div id="section" class="calibre15">
                  <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v3">Safari IT Books Language Constructs Functional Programming Haskell Safari IT Books Programming Programming Programming Bryan O'Sullivan  Donald Bruce Stewart  John Goerzen  O'Reilly Media, Inc. Real World Haskell, 1st Edition<a name="I_sect112_d1e27234" class="calibre27" id="I_sect112_d1e27234"></a><h3 id="title-IDAVHYWD" class="docSection1Title">12.1. A Little Bit About Barcodes</h3><a name="x_GT" class="calibre27" id="x_GT"></a><p class="docText">The vast majority of packaged and mass-produced consumer
    goods sold have a barcode somewhere on them. Although there are dozens of
    barcode systems used across a variety of specialized domains, consumer
    products typically use<a name="I_indexterm12_d1e27239" class="calibre27" id="I_indexterm12_d1e27239"></a><a name="I_indexterm12_d1e27242" class="calibre27" id="I_indexterm12_d1e27242"></a> either UPC-A or EAN-13. UPC-A was developed in the United
    States, while EAN-13 is European in origin.</p><a name="x_HT" class="calibre27" id="x_HT"></a><p class="docText">EAN-13 was developed after UPC-A and is a superset of
    UPC-A. (In fact, UPC-A has been officially declared obsolete since 2005,
    though it's still widely used within the United States.) Any software or
    hardware that can understand EAN-13 barcodes will automatically handle
    UPC-A barcodes. This neatly reduces our descriptive problem to one
    standard.</p><a name="x_IT" class="calibre27" id="x_IT"></a><p class="docText">As the name suggests, EAN-13 describes a 13-digit
    sequence, which is broken into four groups:</p><a name="I_indexterm12_d1e27257" class="calibre27" id="I_indexterm12_d1e27257"></a><a name="I_indexterm12_d1e27267" class="calibre27" id="I_indexterm12_d1e27267"></a><a name="I_indexterm12_d1e27277" class="calibre27" id="I_indexterm12_d1e27277"></a><a name="I_indexterm12_d1e27287" class="calibre27" id="I_indexterm12_d1e27287"></a><dl class="docList1"><dt class="calibre48"><br class="calibre48"/><p class="calibre37"><i class="docEmphasis"><span class="docPubcolor">Number system</span></i></p></dt><dd class="calibre49"><p class="docText">The first two digits. <a name="I_indexterm12_d1e27257" class="calibre27" id="I_indexterm12_d1e27257"></a>This can either indicate the nationality of the
          manufacturer or describe one of a few other categories, such as ISBN
          (book identifier) numbers.</p></dd><dt class="calibre48"><br class="calibre48"/><p class="calibre37"><i class="docEmphasis"><span class="docPubcolor">Manufacturer ID</span></i></p></dt><dd class="calibre49"><p class="docText">The next <a name="I_indexterm12_d1e27267" class="calibre27" id="I_indexterm12_d1e27267"></a>five digits. These are assigned by a country's
          numbering authority.</p></dd><dt class="calibre48"><br class="calibre48"/><p class="calibre37"><i class="docEmphasis"><span class="docPubcolor">Product ID</span></i></p></dt><dd class="calibre49"><p class="docText">The next<a name="I_indexterm12_d1e27277" class="calibre27" id="I_indexterm12_d1e27277"></a> five digits. These are assigned by the manufacturer.
          (Smaller manufacturers may have a longer manufacturer ID and shorter
          product ID, but they still add up to 10 digits.)</p></dd><dt class="calibre48"><br class="calibre48"/><p class="calibre37"><i class="docEmphasis"><span class="docPubcolor">Check digit</span></i></p></dt><dd class="calibre49"><p class="docText">The last<a name="I_indexterm12_d1e27287" class="calibre27" id="I_indexterm12_d1e27287"></a> digit. This allows a scanner to validate the digit
          string it scans.</p></dd></dl><a name="x_JT" class="calibre27" id="x_JT"></a><p class="docText">The only way in which an EAN-13 barcode differs from a
    UPC-A barcode is that the latter uses a single digit to represent its
    number system. EAN-13 barcodes retain <span class="docEmphasis">UPC-A</span> compatibility by setting the first
    number system digit to zero.</p><a name="barcode_encode" class="calibre27" id="barcode_encode"></a><h4 id="title-IDA4JYWD" class="docSection1Title">12.1.1. EAN-13 Encoding</h4><a name="x_KT" class="calibre27" id="x_KT"></a><p class="docText">Before we worry about decoding an EAN-13 barcode, we
      need to understand how they are encoded. The system EAN-13 uses is a
      little involved. We start by computing the check digit, which is the
      last digit of a string:</p><pre class="calibre39">-- file: ch12/Barcode.hs
checkDigit :: (Integral a) =&gt; [a] -&gt; a
checkDigit ds = 10 - (sum products `mod` 10)
    where products = mapEveryOther (*3) (reverse ds)

mapEveryOther :: (a -&gt; a) -&gt; [a] -&gt; [a]
mapEveryOther f = zipWith ($) (cycle [f,id])</pre><br class="calibre48"/>
<a name="x_LT" class="calibre27" id="x_LT"></a><p class="docText">This is one of those algorithms that is more easily
      understood via the code than a verbal description. The computation
      proceeds from the right of the string. Each successive digit is either
      multiplied by three or left alone (the <i class="docEmphasis">cycle</i> function repeats its input list
      infinitely). The check digit is the difference between their sum, modulo
      10, and the number 10.</p><a name="x_MT" class="calibre27" id="x_MT"></a><p class="docText">A barcode is a series of fixed-width bars, where black
      represents a binary "one" bit, and white a "zero." A run of
      the same digits thus looks like a thicker bar.</p><a name="x_NT" class="calibre27" id="x_NT"></a><p class="docText">The sequence of bits in a barcode is as follows:</p><ul class="calibre18"><li class="calibre19"><p class="docText">The leading guard sequence, encoded as 101.</p></li><li class="calibre19"><p class="docText">A group of six digits, each seven bits wide.</p></li><li class="calibre19"><p class="docText">Another guard sequence, encoded as 01010.</p></li><li class="calibre19"><p class="docText">A group of six more digits.</p></li><li class="calibre19"><p class="docText">The trailing guard sequence, encoded as 101.</p></li></ul><a name="x_TT" class="calibre27" id="x_TT"></a><p class="docText">The digits in the left and right groups have separate
      encodings. On the left, digits are encoded with parity bits. The parity
      bits encode the 13th digit of the barcode.</p>
<a href="21061538.html" class="calibre2"><img src="pixel.gif" alt="" border="0" class="calibre31"/></a><ul class="calibre18"></ul></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="middle" class="v3" height="5">
                        <img src="pixel.gif" alt="" border="0" class="calibre32"/>
                      </td>
                    </tr>
                    <tr class="calibre16">
                      <td valign="middle" class="v3">
                        <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody1">
                          <tr class="calibre16">
                            <td class="v5"><span class="calibre33"> </span>
                   
                  <span class="calibre33">   </span>
             <span class="calibre33"> </span></td>
                          </tr>
                        </table>
                      </td>
                      <td class="v3"/>
                      <td valign="middle" class="v6"> 
           
          <span class="calibre33"><a target="_self" href="barcode_split_000.html" title="Previous section" class="calibre2"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre17"/></a></span>
				
				 
				
				<span class="calibre33"><a target="_self" href="barcode_array_split_000.html" title="Next section" class="calibre2"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre17"/></a></span></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v6">
                        <span class="calibre33"></span>
                      </td>
                    </tr>
                  </table>
                </div>
                <!--IP User 2-->
              </td>
            </tr>
          </table>
        </td>
        <td class="calibre7">
                         
                      </td>
      </tr>
      <tr class="calibre6">
        <td colspan="3" valign="bottom" class="calibre7">
          <br class="calibre20"/>
          <p class="v4"></p>
          <br class="calibre20"/>
        </td>
      </tr>
    </table>
  </div>

{% endraw %}

