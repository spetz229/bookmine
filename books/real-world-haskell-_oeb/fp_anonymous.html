---
layout: page
title: "Real World Haskell, 1st Edition"
prev: fp_loop_split_001.html
next: fp_partialapp.html
book_path: books/real-world-haskell-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

    <a name="toppage" class="calibre5" id="toppage"></a>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody">
      <tr valign="top" class="calibre6">
        <td class="calibre7">
          <a name="MainContent" class="calibre5" id="MainContent"></a>
          <table width="95%" class="sfbody">
            <tr class="calibre6">
              <td class="v">
                <!--Copyright (c) 2002 Safari Tech Books Online-->
                <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody">
                  <tr class="calibre6">
                    <td valign="middle" class="v1" height="5">
                      <img src="pixel.gif" alt="" border="0" class="calibre8"/>
                    </td>
                  </tr>
                  <tr class="calibre6">
                    <td valign="middle" class="v1">
                      <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody">
                        <tr class="calibre6">
                          <td class="v"><span class="calibre9"> </span>
                   
                  <span class="calibre9">   </span>
             <span class="calibre9"> </span></td>
                        </tr>
                      </table>
                    </td>
                    <td class="v1"/>
                    <td valign="middle" class="v2"> 
           
          <span class="calibre9"><a target="_self" href="fp_loop_split_000.html" title="Previous section" class="calibre13"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre14"/></a></span>
				
				 
				
				<span class="calibre9"><a target="_self" href="fp_partialapp.html" title="Next section" class="calibre13"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre14"/></a></span></td>
                  </tr>
                </table>
                <div id="section" class="calibre15">
                  <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v3">Safari IT Books Language Constructs Functional Programming Haskell Safari IT Books Programming Programming Programming Bryan O'Sullivan  Donald Bruce Stewart  John Goerzen  O'Reilly Media, Inc. Real World Haskell, 1st Edition<a name="fp_anonymous" class="calibre27" id="fp_anonymous"></a><h3 id="title-IDAXPNVC" class="docSection1Title">4.7. Anonymous (lambda) Functions</h3><a name="x_d9" class="calibre27" id="x_d9"></a><p class="docText">In<a name="I_indexterm4_d1e11536" class="calibre27" id="I_indexterm4_d1e11536"></a><a name="I_indexterm4_d1e11537" class="calibre27" id="I_indexterm4_d1e11537"></a><a name="I_indexterm4_d1e11540" class="calibre27" id="I_indexterm4_d1e11540"></a> many of the function definitions we've seen so far, we've
    written short helper <span class="docEmphasis">functions</span>:</p><pre class="calibre39">-- file: ch04/Partial.hs
isInAny needle haystack = any inSequence haystack
    where inSequence s = needle `isInfixOf` s</pre><br class="calibre48"/>
<a name="x_e9" class="calibre27" id="x_e9"></a><p class="docText">Haskell lets us write completely anonymous functions,
    which we can use to avoid the need to give names to our helper functions.
    Anonymous functions are often called "lambda" functions, in a
    nod to their heritage in lambda calculus. We introduce an anonymous
    function with a <a name="I_indexterm4_d1e11554" class="calibre27" id="I_indexterm4_d1e11554"></a><a name="I_indexterm4_d1e11557" class="calibre27" id="I_indexterm4_d1e11557"></a>backslash character (<tt class="calibre34">\</tt>) pronounced
    <span class="docEmphasis">lambda</span>.<sup class="docFootnote"><a class="docLink1" href="#x_e9d1e11634">[9]</a></sup> This is followed by the function's arguments (which can
    include patterns), and then<a name="I_indexterm4_d1e11586" class="calibre27" id="I_indexterm4_d1e11586"></a> an arrow (<tt class="calibre34">-&gt;)</tt> to introduce the function's
    body.</p><blockquote class="calibre30"><p class="docFootnote1"><sup class="calibre50"><a name="x_e9d1e11634" class="calibre5" id="x_e9d1e11634">[9]</a></sup> The backslash was chosen for its visual resemblance
        to the Greek letter lambda <tt class="calibre34">(</tt><tt class="calibre34">λ)</tt>. Although
        <span class="docMonofont">GHC</span> can accept Unicode
        input, it correctly treats <tt class="calibre34">λ</tt> as a letter, not as a
        synonym for <tt class="calibre34">\</tt>.</p></blockquote><a name="x_f9" class="calibre27" id="x_f9"></a><p class="docText">Lambdas are most easily illustrated by example. Here's a
    rewrite of <i class="docEmphasis">isInAny</i> using an anonymous
    function:</p><pre class="calibre39">-- file: ch04/Partial.hs
isInAny2 needle haystack = any (\s -&gt; needle `isInfixOf` s) haystack</pre><br class="calibre48"/>
<a name="x_g9" class="calibre27" id="x_g9"></a><p class="docText">We've wrapped the lambda in parentheses here so that
    Haskell can tell where the function body ends.</p><a name="x_h9" class="calibre27" id="x_h9"></a><p class="docText">In every respect, anonymous functions behave identically
    to functions that have names, but Haskell places a few important
    restrictions on how we can define them. Most importantly, while we can
    write a normal function using multiple clauses containing different
    patterns and guards, a lambda can have only a single clause in its
    definition.</p><a name="x_i9" class="calibre27" id="x_i9"></a><p class="docText">The limitation to a single clause restricts how we can use
    patterns in the definition of a lambda. We'll usually write a normal
    function with several clauses to cover different pattern matching
    possibilities:</p><pre class="calibre39">-- file: ch04/Lambda.hs
safeHead (x:_) = Just x
safeHead _ = Nothing</pre><br class="calibre48"/>
<a name="x_j9" class="calibre27" id="x_j9"></a><p class="docText">But as we can't write multiple clauses to define a lambda,
    we must be certain that any patterns we use will match:</p><pre class="calibre39">-- file: ch04/Lambda.hs
unsafeHead = \(x:_) -&gt; x</pre><br class="calibre48"/>
<a name="x_k9" class="calibre27" id="x_k9"></a><p class="docText">This definition of <i class="docEmphasis">unsafeHead</i> will explode in our faces if we call
    it with a value on which pattern matching fails:</p><pre class="calibre39">ghci&gt; <b class="calibre40">:type unsafeHead</b>
unsafeHead :: [t] -&gt; t
ghci&gt; <b class="calibre40">unsafeHead [1]</b>
1
ghci&gt; <b class="calibre40">unsafeHead []</b>
*** Exception: Lambda.hs:7:13-23: Non-exhaustive patterns in lambda</pre><a name="x_l9" class="calibre27" id="x_l9"></a><p class="docText">The definition typechecks, so it will compile, and the
    error will occur at runtime. The moral of this story is to be careful in
    how you use patterns when defining an anonymous function: make sure your
    patterns can't fail!</p><a name="x_m9" class="calibre27" id="x_m9"></a><p class="docText">Another thing to notice about the <i class="docEmphasis">isInAny</i> and <i class="docEmphasis">isInAny2</i> functions shown previously is that the
    first version, using a helper function that has a name, is a little easier
    to read than the version that plops an anonymous function into the middle.
    The named helper function doesn't disrupt the "flow" of the
    function in which it's used, and the judiciously chosen name gives us a
    little bit of information about what the function is expected to
    do.</p><a name="x_n9" class="calibre27" id="x_n9"></a><p class="docText">In contrast, when we run across a lambda in the middle of
    a function body, we have to switch gears and read its definition fairly
    carefully to understand what it does. To help with readability and
    maintainability, then, we tend to avoid lambdas in many situations where
    we could use them to trim a few characters from a function definition.
    Very often, we'll use a partially applied function instead, resulting in
    clearer and more readable code than either a lambda or an explicit
    function. Don't know what a partially applied function is yet? Read
    on!</p><a name="x_dL" class="calibre27" id="x_dL"></a><p class="docText">We don't intend these caveats to suggest that lambdas are
    useless, merely that we ought to be mindful of the potential pitfalls when
    we're thinking of using them. In later chapters, we will see that they are
    often invaluable as "glue."</p>
<ul class="calibre18"></ul></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="middle" class="v3" height="5">
                        <img src="pixel.gif" alt="" border="0" class="calibre32"/>
                      </td>
                    </tr>
                    <tr class="calibre16">
                      <td valign="middle" class="v3">
                        <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody1">
                          <tr class="calibre16">
                            <td class="v5"><span class="calibre33"> </span>
                   
                  <span class="calibre33">   </span>
             <span class="calibre33"> </span></td>
                          </tr>
                        </table>
                      </td>
                      <td class="v3"/>
                      <td valign="middle" class="v6"> 
           
          <span class="calibre33"><a target="_self" href="fp_loop_split_000.html" title="Previous section" class="calibre2"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre17"/></a></span>
				
				 
				
				<span class="calibre33"><a target="_self" href="fp_partialapp.html" title="Next section" class="calibre2"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre17"/></a></span></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v6">
                        <span class="calibre33"></span>
                      </td>
                    </tr>
                  </table>
                </div>
                <!--IP User 2-->
              </td>
            </tr>
          </table>
        </td>
        <td class="calibre7">
                         
                      </td>
      </tr>
      <tr class="calibre6">
        <td colspan="3" valign="bottom" class="calibre7">
          <br class="calibre20"/>
          <p class="v4"></p>
          <br class="calibre20"/>
        </td>
      </tr>
    </table>
  </div>

{% endraw %}

