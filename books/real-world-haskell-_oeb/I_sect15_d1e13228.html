---
layout: page
title: "Real World Haskell, 1st Edition"
prev: I_sect15_d1e13203.html
next: I_sect15_d1e13316.html
book_path: books/real-world-haskell-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

    <a name="toppage" class="calibre5" id="toppage"></a>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody">
      <tr valign="top" class="calibre6">
        <td class="calibre7">
          <a name="MainContent" class="calibre5" id="MainContent"></a>
          <table width="95%" class="sfbody">
            <tr class="calibre6">
              <td class="v">
                <!--Copyright (c) 2002 Safari Tech Books Online-->
                <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody">
                  <tr class="calibre6">
                    <td valign="middle" class="v1" height="5">
                      <img src="pixel.gif" alt="" border="0" class="calibre8"/>
                    </td>
                  </tr>
                  <tr class="calibre6">
                    <td valign="middle" class="v1">
                      <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody">
                        <tr class="calibre6">
                          <td class="v"><span class="calibre9"> </span>
                   
                  <span class="calibre9">   </span>
             <span class="calibre9"> </span></td>
                        </tr>
                      </table>
                    </td>
                    <td class="v1"/>
                    <td valign="middle" class="v2"> 
           
          <span class="calibre9"><a target="_self" href="I_sect15_d1e13203.html" title="Previous section" class="calibre13"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre14"/></a></span>
				
				 
				
				<span class="calibre9"><a target="_self" href="I_sect15_d1e13316.html" title="Next section" class="calibre13"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre14"/></a></span></td>
                  </tr>
                </table>
                <div id="section" class="calibre15">
                  <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v3">Safari IT Books Language Constructs Functional Programming Haskell Safari IT Books Programming Programming Programming Bryan O'Sullivan  Donald Bruce Stewart  John Goerzen  O'Reilly Media, Inc. Real World Haskell, 1st Edition<a name="I_sect15_d1e13228" class="calibre27" id="I_sect15_d1e13228"></a><h3 id="title-IDAPLP1" class="docSection1Title">5.7. Type Inference Is a Double-Edged Sword</h3><a name="x_Wn" class="calibre27" id="x_Wn"></a><p class="docText">A Haskell <a name="ch05-typeinference" class="calibre27" id="ch05-typeinference"></a>compiler's ability to infer types is powerful and valuable.
    Early on, you'll probably face a strong temptation to take advantage of
    type inference by omitting as many type declarations as possible. Let's
    simply make the compiler figure the whole lot out!</p><a name="x_Xn" class="calibre27" id="x_Xn"></a><p class="docText">Skimping on explicit type information has a downside, one
    that disproportionately affects new Haskell programmers. As such a
    programmer, we're extremely likely to write code that will fail to compile
    due to straightforward type <a name="I_indexterm5_d1e13239" class="calibre27" id="I_indexterm5_d1e13239"></a>errors.</p><a name="x_lD1" class="calibre27" id="x_lD1"></a><p class="docText">When we omit explicit type information, we force the
    compiler to figure out our <span class="docEmphasis">intentions</span>. It will infer types that are
    logical and consistent, but perhaps not at all what we meant. If we and
    the compiler unknowingly disagree about what is going on, it will
    naturally take us longer to find the source of our problem.</p><a name="x_Yn" class="calibre27" id="x_Yn"></a><p class="docText">Suppose, for instance, that we write a function that we
    believe returns a String, but we don't write a type signature
    for it:</p><pre class="calibre39">-- file: ch05/Trouble.hs
upcaseFirst (c:cs) = toUpper c -- forgot ":cs" here</pre><br class="calibre48"/>
<a name="x_Zn" class="calibre27" id="x_Zn"></a><p class="docText">Here, we want to uppercase the first character of a word,
    but we've forgotten to append the rest of the word onto the result. We
    think our function's type is String -&gt; String, but the
    compiler will correctly infer its type as String -&gt; Char.
    Let's say we then try to use this function somewhere else:</p><pre class="calibre39">-- file: ch05/Trouble.hs
camelCase :: String -&gt; String
camelCase xs = concat (map upcaseFirst (words xs))</pre><br class="calibre48"/>
<a name="x_an" class="calibre27" id="x_an"></a><p class="docText">When we try to compile this code or load it into <i class="docEmphasis">ghci</i>, we won't necessarily get an obvious error
    message:</p><pre class="calibre39">ghci&gt; <b class="calibre40">:load Trouble</b>
[1 of 1] Compiling Main             ( Trouble.hs, interpreted )

Trouble.hs:9:27:
    Couldn't match expected type `[Char]' against inferred type `Char'
      Expected type: [Char] -&gt; [Char]
      Inferred type: [Char] -&gt; Char
    In the first argument of `map', namely `upcaseFirst'
    In the first argument of `concat', namely
        `(map upcaseFirst (words xs))'
Failed, modules loaded: none.
</pre><a name="x_bn" class="calibre27" id="x_bn"></a><p class="docText">Notice that the error is reported where we
    <span class="docEmphasis">use</span> the <i class="docEmphasis">upcaseFirst</i> function. If we're <span class="docEmphasis"><span class="docEmphasis">erro</span>n</span>eously convinced that our
    definition and type for <i class="docEmphasis">upcaseFirst</i>
    are correct, we may end up staring at the wrong piece of code for quite a
    while, until enlightenment strikes.</p><a name="x_cn" class="calibre27" id="x_cn"></a><p class="docText">Every time we write a type signature, we remove a degree
    of freedom from the type inference engine. This reduces the likelihood of
    divergence between our understanding of our code and the compiler's. Type
    declarations also act as shorthand for us as readers of our own code,
    making it easier for us to develop a sense of what must be going
    on.</p><a name="x_dn" class="calibre27" id="x_dn"></a><p class="docText">This is not to say that we need to pepper every tiny
    fragment of code with a type declaration. It is, however, usually good
    form to add a signature to every top-level definition in our code. It's
    best to start out fairly aggressive with explicit type signatures, and
    slowly ease back as your mental model of how type checking works becomes
    more accurate.</p><p class="calibre37"><table border="0" cellspacing="0" cellpadding="1" width="90%" class="calibre41"><tr class="calibre16"><td class="v3"><table width="100%" border="0" cellspacing="0" cellpadding="6" class="calibre42"><tr class="calibre16"><td width="60" valign="top" class="v3"><img src="tip_yellow.gif" alt="" class="calibre43"/></td><td valign="top" class="v3"><p class="docNormalTitle">Explicit types, undefined values, and error</p><a name="x_en" class="calibre27" id="x_en"></a><p class="docText">The special value <tt class="calibre34">undefined</tt> will happily
      typecheck no matter where we use it, as will an expression like
      <tt class="calibre34">error "argh!"</tt>. It is especially important that we write
      type signatures when we use these. Suppose we use <tt class="calibre34">undefined</tt> or <tt class="calibre34">error "write me"</tt>
      as a placeholder in the body of a top-level definition. If we omit a
      type signature, we may be able to use the value we defined in places
      where a correctly typed version would be rejected by the compiler. This
      can easily lead us astray.</p></td></tr></table></td></tr></table></p><br class="calibre48"/>
<ul class="calibre18"></ul></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="middle" class="v3" height="5">
                        <img src="pixel.gif" alt="" border="0" class="calibre32"/>
                      </td>
                    </tr>
                    <tr class="calibre16">
                      <td valign="middle" class="v3">
                        <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody1">
                          <tr class="calibre16">
                            <td class="v5"><span class="calibre33"> </span>
                   
                  <span class="calibre33">   </span>
             <span class="calibre33"> </span></td>
                          </tr>
                        </table>
                      </td>
                      <td class="v3"/>
                      <td valign="middle" class="v6"> 
           
          <span class="calibre33"><a target="_self" href="I_sect15_d1e13203.html" title="Previous section" class="calibre2"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre17"/></a></span>
				
				 
				
				<span class="calibre33"><a target="_self" href="I_sect15_d1e13316.html" title="Next section" class="calibre2"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre17"/></a></span></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v6">
                        <span class="calibre33"></span>
                      </td>
                    </tr>
                  </table>
                </div>
                <!--IP User 2-->
              </td>
            </tr>
          </table>
        </td>
        <td class="calibre7">
                         
                      </td>
      </tr>
      <tr class="calibre6">
        <td colspan="3" valign="bottom" class="calibre7">
          <br class="calibre20"/>
          <p class="v4"></p>
          <br class="calibre20"/>
        </td>
      </tr>
    </table>
  </div>

{% endraw %}

