---
layout: page
title: "Real World Haskell, 1st Edition"
prev: I_sect116_d1e37006.html
next: I_sect116_d1e37117.html
book_path: books/real-world-haskell-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

    <a name="toppage" class="calibre5" id="toppage"></a>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody">
      <tr valign="top" class="calibre6">
        <td class="calibre7">
          <a name="MainContent" class="calibre5" id="MainContent"></a>
          <table width="95%" class="sfbody">
            <tr class="calibre6">
              <td class="v">
                <!--Copyright (c) 2002 Safari Tech Books Online-->
                <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody">
                  <tr class="calibre6">
                    <td valign="middle" class="v1" height="5">
                      <img src="pixel.gif" alt="" border="0" class="calibre8"/>
                    </td>
                  </tr>
                  <tr class="calibre6">
                    <td valign="middle" class="v1">
                      <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody">
                        <tr class="calibre6">
                          <td class="v"><span class="calibre9"> </span>
                   
                  <span class="calibre9">   </span>
             <span class="calibre9"> </span></td>
                        </tr>
                      </table>
                    </td>
                    <td class="v1"/>
                    <td valign="middle" class="v2"> 
           
          <span class="calibre9"><a target="_self" href="I_sect116_d1e37006.html" title="Previous section" class="calibre13"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre14"/></a></span>
				
				 
				
				<span class="calibre9"><a target="_self" href="I_sect116_d1e37117.html" title="Next section" class="calibre13"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre14"/></a></span></td>
                  </tr>
                </table>
                <div id="section" class="calibre15">
                  <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v3">Safari IT Books Language Constructs Functional Programming Haskell Safari IT Books Programming Programming Programming Bryan O'Sullivan  Donald Bruce Stewart  John Goerzen  O'Reilly Media, Inc. Real World Haskell, 1st Edition<a name="I_sect116_d1e37048" class="calibre27" id="I_sect116_d1e37048"></a><h3 id="title-IDAOOU1F" class="docSection1Title">16.9. Applicative Functors for Parsing</h3><a name="x_lj" class="calibre27" id="x_lj"></a><p class="docText">The standard Haskell<a name="I_indexterm16_d1e37053" class="calibre27" id="I_indexterm16_d1e37053"></a> libraries include a module named
    <tt class="calibre34">Control.Applicative</tt>, which we already encountered in <a class="docLink" href="binary_functor.html#binary_fmap">Section 10.5.2</a>. This module defines a typeclass named
    Applicative, which represents <a name="I_indexterm16_d1e37067" class="calibre27" id="I_indexterm16_d1e37067"></a>an <span class="docEmphasis">applicative functor</span>. This is a
    little bit more structured than a functor, but a little bit less than a
    monad. It also defines Alternative, which is similar to
    MonadPlus.</p><a name="x_mj" class="calibre27" id="x_mj"></a><p class="docText">As usual, we think that the best way to introduce
    applicative functors is to put them to work. In theory, every monad is an
    applicative functor, but not every applicative functor is a monad. Because
    applicative functors were added to the standard Haskell libraries long
    after monads, we often don't get an Applicative instance for
    free; frequently, we have to declare the monad we're using to be
    Applicative or Alternative.</p><a name="x_nj" class="calibre27" id="x_nj"></a><p class="docText">To do this for <tt class="calibre34">Parsec</tt>, we'll write a small
    module that we can import instead of the normal <tt class="calibre34">Parsec</tt>
    module:</p><pre class="calibre39">-- file: ch16/ApplicativeParsec.hs
module ApplicativeParsec
    (
      module Control.Applicative
    , module Text.ParserCombinators.Parsec
    ) where

import Control.Applicative
import Control.Monad (MonadPlus(..), ap)
-- Hide a few names that are provided by Applicative.
import Text.ParserCombinators.Parsec hiding (many, optional, (&lt;|&gt;))

-- The Applicative instance for every Monad looks like this.
instance Applicative (GenParser s a) where
    pure  = return
    (&lt;*&gt;) = ap

-- The Alternative instance for every MonadPlus looks like this.
instance Alternative (GenParser s a) where
    empty = mzero
    (&lt;|&gt;) = mplus</pre><br class="calibre48"/>
<a name="x_oj" class="calibre27" id="x_oj"></a><p class="docText">For convenience, our module's export section exports all
    the names we imported from both the <tt class="calibre34">Applicative</tt> and
    <tt class="calibre34">Parsec</tt> modules. Because we hid Parsec's version of <i class="docEmphasis">(&lt;|&gt;)</i> when importing, the one that will
    be exported is from <tt class="calibre34">Control.Applicative</tt>—as we would
    like.</p>
<a href="21061538.html" class="calibre2"><img src="pixel.gif" alt="" border="0" class="calibre31"/></a><ul class="calibre18"></ul></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="middle" class="v3" height="5">
                        <img src="pixel.gif" alt="" border="0" class="calibre32"/>
                      </td>
                    </tr>
                    <tr class="calibre16">
                      <td valign="middle" class="v3">
                        <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody1">
                          <tr class="calibre16">
                            <td class="v5"><span class="calibre33"> </span>
                   
                  <span class="calibre33">   </span>
             <span class="calibre33"> </span></td>
                          </tr>
                        </table>
                      </td>
                      <td class="v3"/>
                      <td valign="middle" class="v6"> 
           
          <span class="calibre33"><a target="_self" href="I_sect116_d1e37006.html" title="Previous section" class="calibre2"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre17"/></a></span>
				
				 
				
				<span class="calibre33"><a target="_self" href="I_sect116_d1e37117.html" title="Next section" class="calibre2"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre17"/></a></span></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v6">
                        <span class="calibre33"></span>
                      </td>
                    </tr>
                  </table>
                </div>
                <!--IP User 2-->
              </td>
            </tr>
          </table>
        </td>
        <td class="calibre7">
                         
                      </td>
      </tr>
      <tr class="calibre6">
        <td colspan="3" valign="bottom" class="calibre7">
          <br class="calibre20"/>
          <p class="v4"></p>
          <br class="calibre20"/>
        </td>
      </tr>
    </table>
  </div>

{% endraw %}

