---
layout: page
title: "Real World Haskell, 1st Edition"
prev: fp_thinking.html
next: fp_splitlines.html
book_path: books/real-world-haskell-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

    <a name="toppage" class="calibre5" id="toppage"></a>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody">
      <tr valign="top" class="calibre6">
        <td class="calibre7">
          <a name="MainContent" class="calibre5" id="MainContent"></a>
          <table width="95%" class="sfbody">
            <tr class="calibre6">
              <td class="v">
                <!--Copyright (c) 2002 Safari Tech Books Online-->
                <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody">
                  <tr class="calibre6">
                    <td valign="middle" class="v1" height="5">
                      <img src="pixel.gif" alt="" border="0" class="calibre8"/>
                    </td>
                  </tr>
                  <tr class="calibre6">
                    <td valign="middle" class="v1">
                      <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody">
                        <tr class="calibre6">
                          <td class="v"><span class="calibre9"> </span>
                   
                  <span class="calibre9">   </span>
             <span class="calibre9"> </span></td>
                        </tr>
                      </table>
                    </td>
                    <td class="v1"/>
                    <td valign="middle" class="v2"> 
           
          <span class="calibre9"><a target="_self" href="fp_thinking.html" title="Previous section" class="calibre13"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre14"/></a></span>
				
				 
				
				<span class="calibre9"><a target="_self" href="fp_splitlines.html" title="Next section" class="calibre13"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre14"/></a></span></td>
                  </tr>
                </table>
                <div id="section" class="calibre15">
                  <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v3">Safari IT Books Language Constructs Functional Programming Haskell Safari IT Books Programming Programming Programming Bryan O'Sullivan  Donald Bruce Stewart  John Goerzen  O'Reilly Media, Inc. Real World Haskell, 1st Edition<a name="fp_framework" class="calibre27" id="fp_framework"></a><h3 id="title-IDAKG5ZC" class="docSection1Title">4.2. A Simple Command-Line Framework</h3><a name="x_VC1" class="calibre27" id="x_VC1"></a><p class="docText">In most of this chapter,<a name="I_indexterm4_d1e8496" class="calibre27" id="I_indexterm4_d1e8496"></a> we will concern ourselves with code that has no interaction
    with the outside world. To maintain our focus on practical code, we will
    begin by developing a gateway between our "pure" code and the
    outside world. Our framework simply reads the contents of one file,
    applies a function to the file, and writes the result to another
    file:</p><pre class="calibre39">-- file: ch04/InteractWith.hs
-- Save this in a source file, e.g., Interact.hs

import System.Environment (getArgs)

interactWith function inputFile outputFile = do
  input &lt;- readFile inputFile
  writeFile outputFile (function input)

main = mainWith myFunction
  where mainWith function = do
          args &lt;- getArgs
          case args of
            [input,output] -&gt; interactWith function input output
            _ -&gt; putStrLn "error: exactly two arguments needed"

        -- replace "id" with the name of our function below
        myFunction = id</pre><br class="calibre48"/>
<a name="x_WC1" class="calibre27" id="x_WC1"></a><p class="docText">This is all we need to write simple, but complete,
    file-processing programs. This is a complete program, and we can compile
    it to an executable named <i class="docEmphasis">InteractWith</i> as follows:</p><pre class="calibre39">$<b class="calibre40">ghc --make InteractWith</b>
[1 of 1] Compiling Main             ( InteractWith.hs, InteractWith.o )
Linking InteractWith ...</pre><a name="x_XC1" class="calibre27" id="x_XC1"></a><p class="docText">If we run this program from the shell or command prompt,
    it will accept two filenames, the name of a file to read, and the name of
    a file to write:</p><pre class="calibre39">$<b class="calibre40">./Interact</b>
error: exactly two arguments needed
$ <b class="calibre40">./Interact hello-in.txt hello-out.txt</b>
$ <b class="calibre40">cat hello-in.txt</b>
hello world
$ <b class="calibre40">cat hello-out.txt</b>
hello world</pre><a name="x_YC1" class="calibre27" id="x_YC1"></a><p class="docText">Some of the notation in our source file is new. The
    <tt class="calibre34">do</tt> keyword<a name="I_indexterm4_d1e8550" class="calibre27" id="I_indexterm4_d1e8550"></a> introduces a block of<a name="I_indexterm4_d1e8554" class="calibre27" id="I_indexterm4_d1e8554"></a> <span class="docEmphasis">actions</span> that can cause effects in the
    real world, such as reading or writing a file. <a name="I_indexterm4_d1e8561" class="calibre27" id="I_indexterm4_d1e8561"></a>The <tt class="calibre34">&lt;-</tt> operator is the equivalent of
    assignment inside a <tt class="calibre34">do</tt> block. This is
    enough explanation to get us started. We will talk in much more depth
    about these details of notation, and I/O in general, in <a class="docLink" href="io_split_000.html#io">Chapter 7</a>.</p><a name="x_ZC1" class="calibre27" id="x_ZC1"></a><p class="docText">When we want to test a function that cannot talk to the
    outside world, we simply replace the name <i class="docEmphasis">id</i> in the preceding code with the name of the
    function we want to test. Whatever our function does, it will need to have
    the type String -&gt; String; in other words, it must accept
    a string and return a string.</p>
<a href="21061538.html" class="calibre2"><img src="pixel.gif" alt="" border="0" class="calibre31"/></a><ul class="calibre18"></ul></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="middle" class="v3" height="5">
                        <img src="pixel.gif" alt="" border="0" class="calibre32"/>
                      </td>
                    </tr>
                    <tr class="calibre16">
                      <td valign="middle" class="v3">
                        <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody1">
                          <tr class="calibre16">
                            <td class="v5"><span class="calibre33"> </span>
                   
                  <span class="calibre33">   </span>
             <span class="calibre33"> </span></td>
                          </tr>
                        </table>
                      </td>
                      <td class="v3"/>
                      <td valign="middle" class="v6"> 
           
          <span class="calibre33"><a target="_self" href="fp_thinking.html" title="Previous section" class="calibre2"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre17"/></a></span>
				
				 
				
				<span class="calibre33"><a target="_self" href="fp_splitlines.html" title="Next section" class="calibre2"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre17"/></a></span></td>
                    </tr>
                  </table>
                  <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v6">
                        <span class="calibre33"></span>
                      </td>
                    </tr>
                  </table>
                </div>
                <!--IP User 2-->
              </td>
            </tr>
          </table>
        </td>
        <td class="calibre7">
                         
                      </td>
      </tr>
      <tr class="calibre6">
        <td colspan="3" valign="bottom" class="calibre7">
          <br class="calibre20"/>
          <p class="v4"></p>
          <br class="calibre20"/>
        </td>
      </tr>
    </table>
  </div>

{% endraw %}

