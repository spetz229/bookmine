---
layout: page
title: "Real World Haskell, 1st Edition"
prev: deftypes_paramtypes.html
next: deftypes_recursive_split_001.html
book_path: books/real-world-haskell-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

    <a name="toppage" class="calibre5" id="toppage"></a>
    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody">
      <tr valign="top" class="calibre6">
        <td class="calibre7">
          <a name="MainContent" class="calibre5" id="MainContent"></a>
          <table width="95%" class="sfbody">
            <tr class="calibre6">
              <td class="v">
                <!--Copyright (c) 2002 Safari Tech Books Online-->
                <table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody">
                  <tr class="calibre6">
                    <td valign="middle" class="v1" height="5">
                      <img src="pixel.gif" alt="" border="0" class="calibre8"/>
                    </td>
                  </tr>
                  <tr class="calibre6">
                    <td valign="middle" class="v1">
                      <table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody">
                        <tr class="calibre6">
                          <td class="v"><span class="calibre9"> </span>
                   
                  <span class="calibre9">   </span>
             <span class="calibre9"> </span></td>
                        </tr>
                      </table>
                    </td>
                    <td class="v1"/>
                    <td valign="middle" class="v2"><a href="21061538.html" class="calibre13"><img src="btn_next_.gif" alt="Next" border="0" class="calibre26"/></a> 
           
          <span class="calibre9"><a target="_self" href="deftypes_paramtypes.html" title="Previous section" class="calibre13"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre14"/></a></span>
				
				 
				
				<span class="calibre9"><a target="_self" href="deftypes_error.html" title="Next section" class="calibre13"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre14"/></a></span></td>
                  </tr>
                </table>
                <div id="section" class="calibre15">
                  <table width="100%" border="0" cellspacing="0" cellpadding="0" class="sfbody1">
                    <tr class="calibre16">
                      <td valign="top" class="v3">Safari IT Books Language Constructs Functional Programming Haskell Safari IT Books Programming Programming Programming Bryan O'Sullivan  Donald Bruce Stewart  John Goerzen  O'Reilly Media, Inc. Real World Haskell, 1st Edition<a name="deftypes_recursive" class="calibre27" id="deftypes_recursive"></a><h3 id="643999-848" class="docSection1Title">3.7. Recursive Types</h3><a name="x_Rg" class="calibre27" id="x_Rg"></a><p class="docText">The familiar list type <a name="ch03-recursivetypes" class="calibre27" id="ch03-recursivetypes"></a><a name="ch03-typesrecursive" class="calibre27" id="ch03-typesrecursive"></a>is <span class="docEmphasis">recursive</span>: it's defined in terms of
    itself. To understand this, let's create our own list-like type. We'll use
    <tt class="calibre34">Cons</tt> in place<a name="I_indexterm3_d1e7188" class="calibre27" id="I_indexterm3_d1e7188"></a> of the <i class="docEmphasis">(:)</i>
    constructor, <a name="I_indexterm3_d1e7198" class="calibre27" id="I_indexterm3_d1e7198"></a><a name="I_indexterm3_d1e7201" class="calibre27" id="I_indexterm3_d1e7201"></a><a name="I_indexterm3_d1e7206" class="calibre27" id="I_indexterm3_d1e7206"></a>and <tt class="calibre34">Nil</tt> in place of <tt class="calibre34">[]</tt>:</p><pre class="calibre39">-- file: ch03/ListADT.hs
data List a = Cons a (List a)
            | Nil
              deriving (Show)</pre><br class="calibre48"/>
<a name="x_Sg" class="calibre27" id="x_Sg"></a><p class="docText">Because <tt class="calibre34">List</tt> <tt class="calibre34">a</tt> appears on both
    the left and the right of the <tt class="calibre34">=</tt> sign, the type's definition
    refers to itself. If we want to use the <tt class="calibre34">Cons</tt> constructor to
    create a new value, we must supply one value of type <span class="docMonofont">a</span> and another of type <span class="docMonofont">List
    a</span>. Let's see where this leads us in practice.</p><a name="x_Tg" class="calibre27" id="x_Tg"></a><p class="docText">The simplest value of type <tt class="calibre34">List</tt>
<tt class="calibre34">a</tt> that we can create is <tt class="calibre34">Nil</tt>. Save the type
    definition in a file, and then load it into <i class="docEmphasis">ghci</i>:</p><pre class="calibre39">ghci&gt; <b class="calibre40">Nil</b>
Nil
</pre><a name="x_Ug" class="calibre27" id="x_Ug"></a><p class="docText">Because <tt class="calibre34">Nil</tt> has a List type, we
    can use it as a parameter to <tt class="calibre34">Cons</tt>:</p><pre class="calibre39">ghci&gt; <b class="calibre40">Cons 0 Nil</b>
Cons 0 Nil
</pre><a name="x_Vg" class="calibre27" id="x_Vg"></a><p class="docText">And because <tt class="calibre34">Cons 0 Nil</tt> has the type
    List a, we can use this as a parameter to
    <tt class="calibre34">Cons</tt>:</p><pre class="calibre39">ghci&gt; <b class="calibre40">Cons 1 it</b>
Cons 1 (Cons 0 Nil)
ghci&gt; <b class="calibre40">Cons 2 it</b>
Cons 2 (Cons 1 (Cons 0 Nil))
ghci&gt; <b class="calibre40">Cons 3 it</b>
Cons 3 (Cons 2 (Cons 1 (Cons 0 Nil)))</pre><a name="x_Wg" class="calibre27" id="x_Wg"></a><p class="docText">We could continue in this fashion indefinitely, creating
    ever-longer <tt class="calibre34">Cons</tt> chains, each with a single <tt class="calibre34">Nil</tt>
    at the end.</p><a name="x_K5" class="calibre27" id="x_K5"></a><p class="docText">For a third example of what a recursive type is, here is a
    definition of a binary tree type:</p><pre class="calibre39">-- file: ch03/Tree.hs
data Tree a = Node a (Tree a) (Tree a)
            | Empty
              deriving (Show)</pre><br class="calibre48"/>
<a name="x_BC1" class="calibre27" id="x_BC1"></a><p class="docText">A binary tree is either a node with two children—which
    are themselves binary trees—or an empty value.</p><p class="calibre37"><table border="0" cellspacing="0" cellpadding="1" width="90%" class="calibre41"><tr class="calibre16"><td class="v3"><table width="100%" border="0" cellspacing="0" cellpadding="6" class="calibre42"><tr class="calibre16"><td width="60" valign="top" class="v3"><img src="tip_yellow.gif" alt="" class="calibre43"/></td><td valign="top" class="v3"><p class="docNormalTitle">Is List an acceptable list?</p><a name="x_Xg" class="calibre27" id="x_Xg"></a><p class="docText">We can easily prove to ourselves that our
      <tt class="calibre34">List</tt> <tt class="calibre34">a</tt> type has the same shape as the built-in
      list type [a]. To do this, we write a function that takes
      any value of type <tt class="calibre34">[a]</tt> and produces a value of type
      <tt class="calibre34">List a</tt>:</p><pre class="calibre39">-- file: ch03/ListADT.hs
fromList (x:xs) = Cons x (fromList xs)
fromList []     = Nil</pre><br class="calibre48"/>
<a name="x_Yg" class="calibre27" id="x_Yg"></a><p class="docText">By inspection, this clearly substitutes a
      <tt class="calibre34">Cons</tt> for every <i class="docEmphasis">(:)</i> and
      a <tt class="calibre34">Nil</tt> for each <tt class="calibre34">[]</tt>. This covers both of the
      built-in list type's constructors. The two types are
      <span class="docEmphasis">isomorphic</span>—they have the same shape:</p><pre class="calibre39">ghci&gt; <b class="calibre40">fromList "durian"</b>
Cons 'd' (Cons 'u' (Cons 'r' (Cons 'i' (Cons 'a' (Cons 'n' Nil)))))
ghci&gt; <b class="calibre40">fromList [Just True, Nothing, Just False]</b>
Cons (Just True) (Cons Nothing (Cons (Just False) Nil))</pre></td></tr></table></td></tr></table></p><br class="calibre48"/><a name="x_Zg" class="calibre27" id="x_Zg"></a><p class="docText">This time, let's search for insight by comparing our
    definition with one from a more familiar language. Here's a similar class
    definition in Java:</p><pre class="calibre39">class Tree&lt;A&gt;
{
    A value;
    Tree&lt;A&gt; left;
    Tree&lt;A&gt; right;

    public Tree(A v, Tree&lt;A&gt; l, Tree&lt;A&gt; r)
    {
	value = v;
	left = l;
	right = r;
    }
}</pre><br class="calibre48"/>
<a name="x_ag" class="calibre27" id="x_ag"></a><p class="docText">The one significant difference is that Java<a name="I_indexterm3_d1e7376" class="calibre27" id="I_indexterm3_d1e7376"></a> lets us use the special <a name="I_indexterm3_d1e7380" class="calibre27" id="I_indexterm3_d1e7380"></a>value <tt class="calibre34">null</tt> anywhere to indicate
    "nothing," so we can use <tt class="calibre34">null</tt> to indicate that a
    node is missing a left or right child. Here's a small function that
    constructs a tree with two leaves (a leaf, by convention, has no
    children):</p><pre class="calibre39">class Example 
{
    static Tree&lt;String&gt; simpleTree()
    {
	return new Tree&lt;String&gt;(
            "parent",
	    new Tree&lt;String&gt;("left leaf", null, null),
	    new Tree&lt;String&gt;("right leaf", null, null));
    }
}</pre><br class="calibre48"/>
<a name="x_bg" class="calibre27" id="x_bg"></a><p class="docText">In Haskell, we don't have an equivalent of
    <tt class="calibre34">null</tt>. We could use the <tt class="calibre34">Maybe</tt> type to provide a
    similar effect, but that would bloat the pattern matching. Instead, we've
    decided to use a no-argument <tt class="calibre34">Empty</tt> constructor. Where the
    Java example provides <tt class="calibre34">null</tt> to the Tree
    constructor, we supply <tt class="calibre34">Empty</tt> in Haskell:</p><pre class="calibre39">-- file: ch03/Tree.hs
simpleTree = Node "parent" (Node "left child" Empty Empty)
                           (Node "right child" Empty Empty)</pre><br class="calibre48"/>
<a name="I_sidebar3_d1e7418" class="calibre27" id="I_sidebar3_d1e7418"></a></td>
                    </tr>
                  </table>
                </div>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </div>

{% endraw %}

