---
layout: page
title: "Developing Backbone.js Applications"
prev: OEBPS/ch04s02.html
next: OEBPS/ch04s04.html
book_path: books/developing-backbone-js-applications-addy-osmani--_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="book" title="Keeping Your Templates External Using RequireJS And The Text Plugin"><div class="book"><div class="book"><div class="book"><h1 class="title2"><a id="keeping-your-templates-external-using-requirejs-and-the-text-plugin" class="calibre1"></a>Keeping Your Templates External
    Using RequireJS And The Text Plugin</h1></div></div></div><p class="calibre6">
      Moving your [Underscore/Mustache/Handlebars] templates to external
      files is actually quite straight-forward. As this application
      makes use of RequireJS, I’ll discuss how to implement external
      templates using this specific script loader.
    </p><p class="calibre6">
      RequireJS has a special plugin called text.js which is used to
      load in text file dependencies. To use the text plugin, simply
      follow these simple steps:
    </p><div class="book"><ol class="orderedlist"><li class="listitem"><p class="calibre6">
          Download the plugin from
          http://requirejs.org/docs/download.html#text and place it in
          either the same directory as your application’s main JS file
          or a suitable sub-directory.
        </p></li><li class="listitem"><p class="calibre6">
          Next, include the text.js plugin in your initial RequireJS
          configuration options. In the code snippet below, we assume
          that RequireJS is being included in our page prior to this
          code snippet being executed. Any of the other scripts being
          loaded are just there for the sake of example.
        </p></li></ol></div><pre class="programlistingjavascript"><code class="nx">require</code><code class="p">.</code><code class="nx">config</code><code class="p">(</code> <code class="p">{</code>
    <code class="nx">paths</code><code class="o">:</code> <code class="p">{</code>
        <code class="s">'backbone'</code><code class="o">:</code>         <code class="s">'libs/AMDbackbone-0.5.3'</code><code class="p">,</code>
        <code class="s">'underscore'</code><code class="o">:</code>       <code class="s">'libs/underscore-1.2.2'</code><code class="p">,</code>
        <code class="s">'text'</code><code class="o">:</code>             <code class="s">'libs/require/text'</code><code class="p">,</code>
        <code class="s">'jquery'</code><code class="o">:</code>           <code class="s">'libs/jQuery-1.7.1'</code><code class="p">,</code>
        <code class="s">'json2'</code><code class="o">:</code>            <code class="s">'libs/json2'</code><code class="p">,</code>
        <code class="s">'datepicker'</code><code class="o">:</code>       <code class="s">'libs/jQuery.ui.datepicker'</code><code class="p">,</code>
        <code class="s">'datepickermobile'</code><code class="o">:</code> <code class="s">'libs/jquery.ui.datepicker.mobile'</code><code class="p">,</code>
        <code class="s">'jquerymobile'</code><code class="o">:</code>     <code class="s">'libs/jquery.mobile-1.0'</code>
    <code class="p">},</code>
    <code class="nx">baseUrl</code><code class="o">:</code> <code class="s">'app'</code>
<code class="p">}</code> <code class="p">);</code>
</pre><div class="book"><ol class="orderedlist"><li class="listitem"><p class="calibre6">
          When the <code class="literal">text!</code> prefix is used for a
          dependency, RequireJS will automatically load the text plugin
          and treat the dependency as a text resource. A typical example
          of this in action may look like..
        </p></li></ol></div><pre class="programlistingjavascript"><code class="nx">require</code><code class="p">([</code><code class="s">'js/app'</code><code class="p">,</code> <code class="s">'text!templates/mainView.html'</code><code class="p">],</code>
    <code class="kd">function</code><code class="p">(</code><code class="nx">app</code><code class="p">,</code> <code class="nx">mainView</code><code class="p">){</code>
        <code class="c">// the contents of the mainView file will be</code>
        <code class="c">// loaded into mainView for usage.</code>
    <code class="p">}</code>
<code class="p">);</code>
</pre><div class="book"><ol class="orderedlist"><li class="listitem"><p class="calibre6">
          Finally we can use the text resource that’s been loaded for
          templating purposes. You’re probably used to storing your HTML
          templates inline using a script with a specific identifier.
        </p></li></ol></div><p class="calibre6">
      With Underscore.js’s micro-templating (and jQuery) this would
      typically be:
    </p><p class="calibre6">
      HTML:
    </p><pre class="programlistingjavascript">
&lt;script type="text/template" id="mainViewTemplate"&gt;
    &lt;% _.each( person, function( person_item ){ %&gt;
        &lt;li&gt;&lt;%= person_item.get("name") %&gt;&lt;/li&gt;  
    &lt;% }); %&gt;
&lt;/script&gt;
</pre><p class="calibre6">
      JS:
    </p><pre class="programlistingjavascript"><code class="kd">var</code> <code class="nx">compiled_template</code> <code class="o">=</code> <code class="nx">_</code><code class="p">.</code><code class="nx">template</code><code class="p">(</code> <code class="nx">$</code><code class="p">(</code><code class="s">'#mainViewTemplate'</code><code class="p">).</code><code class="nx">html</code><code class="p">()</code> <code class="p">);</code>
</pre><p class="calibre6">
      With RequireJS and the text plugin however, it’s as simple as
      saving your template into an external text file (say,
      <code class="literal">mainView.html</code>) and doing the following:
    </p><pre class="programlistingjavascript"><code class="nx">require</code><code class="p">([</code><code class="s">'js/app'</code><code class="p">,</code> <code class="s">'text!templates/mainView.html'</code><code class="p">],</code>
    <code class="kd">function</code><code class="p">(</code><code class="nx">app</code><code class="p">,</code> <code class="nx">mainView</code><code class="p">){</code>

        <code class="kd">var</code> <code class="nx">compiled_template</code> <code class="o">=</code> <code class="nx">_</code><code class="p">.</code><code class="nx">template</code><code class="p">(</code> <code class="nx">mainView</code> <code class="p">);</code>
    <code class="p">}</code>
<code class="p">);</code>
</pre><p class="calibre6">
      That’s it!. You can then go applying your template to a view in
      Backbone doing something like:
    </p><pre class="programlistingjavascript"><code class="nx">collection</code><code class="p">.</code><code class="nx">someview</code><code class="p">.</code><code class="nx">$el</code><code class="p">.</code><code class="nx">html</code><code class="p">(</code> <code class="nx">compiled_template</code><code class="p">(</code> <code class="p">{</code> <code class="nx">results</code><code class="o">:</code> <code class="nx">collection</code><code class="p">.</code><code class="nx">models</code> <code class="p">}</code> <code class="p">)</code> <code class="p">);</code>
</pre><p class="calibre6">
      All templating solutions will have their own custom methods for
      handling template compilation, but if you understand the above,
      substituting Underscore’s micro-templating for any other solution
      should be fairly trivial.
    </p><p class="calibre6">
      <span class="firstname"><strong class="calibre8">Note:</strong></span> You may also be
      interested in looking at
      <a class="ulink" href="https://github.com/ZeeAgency/requirejs-tpl">Require.js
      tpl</a>. It’s an AMD-compatible version of the Underscore
      templating system that also includes support for optimization
      (pre-compiled templates) which can lead to better performance and
      no evals. I have yet to use it myself, but it comes as a
      recommended resource.
    </p></div></div>

{% endraw %}

