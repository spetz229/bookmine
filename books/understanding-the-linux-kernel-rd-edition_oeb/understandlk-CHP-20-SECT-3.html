---
layout: page
title: "Understanding the Linux Kernel, 3rd Edition"
prev: understandlk-CHP-20-SECT-2.html
next: understandlk-CHP-20-SECT-4.html
book_path: books/understanding-the-linux-kernel-rd-edition_oeb/
---
{% include JB/setup %}
{% raw %}
<div>


<a name="understandlk-CHP-20-SECT-3"></a>
<h3 class="docSection1Title">20.3. Execution Domains</h3><a name="IDX-CHP-20-4883"></a>
<a name="IDX-CHP-20-4884"></a>
<a name="IDX-CHP-20-4885"></a>
<a name="IDX-CHP-20-4886"></a>
<a name="IDX-CHP-20-4887"></a>
<a name="IDX-CHP-20-4888"></a>
<a name="IDX-CHP-20-4889"></a>
<a name="IDX-CHP-20-4890"></a>
<a name="IDX-CHP-20-4891"></a>
<a name="IDX-CHP-20-4892"></a>
<a name="IDX-CHP-20-4893"></a>
<a name="IDX-CHP-20-4894"></a>
<a name="IDX-CHP-20-4895"></a>
<p class="docText1">As mentioned in <a class="pcalibre5 docLink pcalibre1" href="understandlk-CHP-1.html#understandlk-CHP-1">Chapter 1</a>, a neat feature of Linux is its ability to execute files compiled for other operating systems. Of course, this is possible only if the files include machine code for the same computer architecture on which the kernel is running. Two kinds of support are offered for these "foreign" programs:</p>
<ul class="calibre11"><li class="calibre12"><p class="docText1">Emulated execution: necessary to execute programs that include system calls that are not POSIX-compliant</p></li><li class="calibre12"><p class="docText1">Native execution: valid for programs whose system calls are totally POSIX-compliant</p></li></ul>
<p class="docText1">Microsoft MS-DOS and Windows<a name="IDX-CHP-20-4896"></a> 
 programs are emulated: they cannot be natively executed, because they include APIs that are not recognized by Linux. An emulator such as DOSemu or Wine (which appeared in the example at the end of the previous section) is invoked to translate each API call into an emulating wrapper function call, which in turn uses the existing Linux system calls. Because emulators are mostly implemented as User Mode applications, we don't discuss them further.</p>
<p class="docText1">On the other hand, POSIX-compliant programs compiled on operating systems other than Linux can be executed without too much trouble, because POSIX operating systems offer similar APIs. (Actually, the APIs should be identical, although this is not always the case.) Minor differences that the kernel must iron out usually refer to how system calls are invoked or how the various signals are numbered. This information is stored in <span class="docEmphasis">execution domain descriptors</span><a name="IDX-CHP-20-4897"></a> 
 of type <tt class="calibre25">exec_domain</tt>.</p>
<p class="docText1">A process specifies its execution domain by setting the <tt class="calibre25">personality</tt><a name="IDX-CHP-20-4898"></a> 
 field of its descriptor and storing the address of the corresponding <tt class="calibre25">exec_domain</tt> data structure in the <tt class="calibre25">exec_domain</tt> field of the <tt class="calibre25">tHRead_info</tt> structure. A process can change its personality by issuing a suitable system call named <tt class="calibre25">personality( )</tt><a name="IDX-CHP-20-4899"></a> 
; typical values assumed by the system call's parameter are listed in <a class="pcalibre5 docLink pcalibre1" href="#understandlk-CHP-20-TABLE-6">Table 20-6</a>. Programmers are not expected to directly change the personality of their programs; instead, the <tt class="calibre25">personality( )</tt> system call should be issued by the glue code that sets up the execution context of the process (see the next section).</p>
<a name="understandlk-CHP-20-TABLE-6"></a><p class="calibre14"><table cellspacing="0" frame="hsides" rules="all" cellpadding="4" width="100%" class="calibre15"><caption class="calibre33"><h5 class="docFigureTitle">Table 20-6. Personalities supported by the Linux kernel</h5></caption><colgroup class="calibre16"><col class="calibre17"/><col class="calibre17"/></colgroup><thead class="calibre18"><tr class="calibre34"><th class="thead" scope="col"><p class="docText1"><span class="calibre5">Personality</span></p></th><th class="thead" scope="col"><p class="docText1"><span class="calibre5">Operating system</span></p></th></tr></thead><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_LINUX</tt></p></td><td class="docTableCell"><p class="docText2">Standard execution domain</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_LINUX_32BIT</tt></p></td><td class="docTableCell"><p class="docText2">Linux with 32-bit physical addresses in 64-bit architectures</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_LINUX_FDPIC</tt></p></td><td class="docTableCell"><p class="docText2">Linux program in ELF FDPIC format</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_SVR4</tt></p></td><td class="docTableCell"><p class="docText2">System V<a name="IDX-CHP-20-4900"></a> 
 Release 4</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_SVR3</tt></p></td><td class="docTableCell"><p class="docText2">System V Release 3</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_SCOSVR3</tt></p></td><td class="docTableCell"><p class="docText2">SCO Unix<a name="IDX-CHP-20-4901"></a> 
 Version 3.2</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_OSR5</tt></p></td><td class="docTableCell"><p class="docText2">SCO OpenServer<a name="IDX-CHP-20-4902"></a> 
 Release 5</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_WYSEV386</tt></p></td><td class="docTableCell"><p class="docText2">Unix System V/386 Release 3.2.1</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_ISCR4</tt></p></td><td class="docTableCell"><p class="docText2">Interactive Unix<a name="IDX-CHP-20-4903"></a>
</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_BSD</tt></p></td><td class="docTableCell"><p class="docText2">BSD<a name="IDX-CHP-20-4904"></a> 
 Unix</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_SUNOS</tt></p></td><td class="docTableCell"><p class="docText2">SunOS<a name="IDX-CHP-20-4905"></a>
</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_XENIX</tt></p></td><td class="docTableCell"><p class="docText2">Xenix<a name="IDX-CHP-20-4906"></a>
</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_LINUX32</tt></p></td><td class="docTableCell"><p class="docText2">Emulation of Linux 32-bit programs in 64-bit architectures (using a 4 GB User Mode address space)</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_LINUX32_3GB</tt></p></td><td class="docTableCell"><p class="docText2">Emulation of Linux 32-bit programs in 64-bit architectures (using a 3 GB User Mode address space)</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_IRIX32</tt></p></td><td class="docTableCell"><p class="docText2">SGI IRIX<a name="IDX-CHP-20-4907"></a> 
-5 32 bit</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_IRIXN32</tt></p></td><td class="docTableCell"><p class="docText2">SGI IRIX-6 32 bit</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_IRIX64</tt></p></td><td class="docTableCell"><p class="docText2">SGI IRIX-6 64 bit</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_RISCOS</tt></p></td><td class="docTableCell"><p class="docText2">RISC OS<a name="IDX-CHP-20-4908"></a>
</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_SOLARIS</tt></p></td><td class="docTableCell"><p class="docText2">Sun's Solaris<a name="IDX-CHP-20-4909"></a>
</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_UW7</tt></p></td><td class="docTableCell"><p class="docText2">SCO's (formerly Caldera's) UnixWare<a name="IDX-CHP-20-4910"></a> 
 7</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_OSF4</tt></p></td><td class="docTableCell"><p class="docText2">Digital UNIX<a name="IDX-CHP-20-4911"></a> 
 (Compaq Tru64 UNIX)</p></td></tr><tr class="calibre2"><td class="docTableCell"><p class="docText2"><tt class="calibre25">PER_HPUX</tt></p></td><td class="docTableCell"><p class="docText2">Hewlett-Packard's HP-UX<a name="IDX-CHP-20-4912"></a>
</p></td></tr></table></p><br class="calibre7"/>

<br class="calibre7"/>

</div>

{% endraw %}

