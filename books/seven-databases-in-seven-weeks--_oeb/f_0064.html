---
layout: page
title: "Seven Databases in Seven Weeks (for Greg Kennedy)"
prev: f_0063.html
next: f_0065.html
book_path: books/seven-databases-in-seven-weeks--_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

<h2 id="N1B6D6" class="calibre18">A2.1 Eventual Consistency</h2>
<p id="N1B6DA" class="calibre5">
      Distributed databases must be partition tolerant, so the choice between availability and consistency can be difficult. However, while CAP dictates that if you pick availability you cannot have true consistency, you can still provide <span class="calibre6">eventual consistency</span>.
    </p>
<p id="N1B6E0" class="calibre5">
The idea behind eventual consistency is that each node is always available to serve requests. As a trade-off, data modifications are propagated in the background to other nodes. This means that at any time the system may be inconsistent, but the data is still largely accurate.
    </p>
<p id="N1B6E3" class="calibre5">
The Internet’s Domain Name Service (<span class="initials">DNS</span>) is a prime example of an eventually consistent system. You register a domain, and it may take a few days to propagate to all <span class="initials">DNS</span> servers across the Internet. But at no time is any particular DNS server unavailable (assuming you can connect to it, that is).
    </p>
<div class="sidebar">
<div class="sidebar-title">A CAP Adventure, Part II: Eventual Consistency</div>
<div class="calibre2">
<p id="N1B6EF" class="calibre5">
Let’s rewind two years, back to 2009. You’ve been on the island for three years at this point, and you spot a bottle in the sand—precious contact with the outside world. You uncork it and rejoice! You’ve just received an integral piece of knowledge…
    </p>
<p id="N1B6F7" class="calibre5">
The number of studio albums Beyoncé has is of utmost importance to the world’s aggregate knowledge. It’s so important, in fact, that every time she releases a new album, someone writes the current date and the number on a piece of paper. They place that paper in a bottle and throw it out to sea. If someone, like yourself, is partitioned from the rest of the world on a desert island, they can <span class="calibre6">eventually</span> have the correct answer.
    </p>
<p id="N1B6FD" class="calibre5">
Skip forward to the present. When the ship captain asks, “How many studio albums does Beyoncé have?” you remain <span class="calibre6">available</span> and answer “three.” You may be <span class="calibre6">in</span>consistent with the rest of the world, but you are reasonably certain of your answer, having not yet received another bottle.
    </p>
<p id="N1B706" class="calibre5">
The story ends with the captain rescuing you, and you return home to find her new album and live happily ever after. As long as you remain on land, you needn’t be partition tolerant and can remain consistent and available until the end of your days.
    </p>
</div>
</div>
<script src="scripts/book_local.js" type="text/javascript" class="calibre3"/>
</div>

{% endraw %}

