---
layout: page
title: "Seven Databases in Seven Weeks (for Greg Kennedy)"
prev: f_0062.html
next: f_0064.html
book_path: books/seven-databases-in-seven-weeks--_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

<h1 class="chapter-title" id="apx.cap">
<span class="chapter-number">
	      Appendix
	      2</span>
<br class="calibre1"/>
<span class="chapter-name">The CAP Theorem</span>
</h1>

<p id="N1B67B" class="calibre5">
Understanding the five database genres is an important selection criterion, but it’s not the only one.  Another recurring theme in this book is the <span class="initials">CAP</span> theorem, which lays bare an unsettling truth about how distributed database systems behave in the face of network instability.
  </p>
<p id="N1B687" class="calibre5">
<span class="initials">CAP</span> proves that you can create a distributed database that is <span class="calibre6">consistent</span> (writes are atomic and all subsequent requests retrieve the new value), <span class="calibre6">available</span> (the database will always return a value as long as a single server is running), or <span class="calibre6">partition tolerant</span> (the system will still function even if server communication is temporarily lost—that is, a network partition), but you can  have only two at once. 
  </p>
<p id="N1B695" class="calibre5">
In other words, you can create a distributed database system that is <span class="calibre6">consistent</span> and <span class="calibre6">partition tolerant</span>,  a system that is <span class="calibre6">available</span> and <span class="calibre6">partition tolerant</span>, or  a system that is <span class="calibre6">consistent</span> and <span class="calibre6">available</span> (but not <span class="calibre6">partition tolerant</span>—which basically means not distributed). But it is not possible to create a distributed database that is consistent and available and partition tolerant at the same time.
  </p>
<p id="N1B6AD" class="calibre5">
The CAP theorem is pertinent when considering a distributed database, since you must decide what you are willing to give up. The database you choose will lose availability or consistency. Partition tolerance is strictly an architectural decision (will the database be distributed or not). It’s important to understand the CAP theorem to fully grok your options. The trade-offs made by the database implementations in this book are largely influenced by it.
  </p>
<div class="sidebar">
<div class="sidebar-title">A CAP Adventure, Part I: CAP</div>
<div class="calibre2">
<p id="N1B6B3" class="calibre5">
Imagine the world as a giant distributed database system. All of the land in the world contains information about certain topics, and as long as you’re somewhere near people or technology, you can find an answer to your questions.
    </p>
<p id="N1B6BB" class="calibre5">
Now, for the sake of argument, imagine you are a passionate Beyoncé Knowles fan and the date is September 5, 2006. Suddenly, at your friend’s beach house party celebrating the release of Beyoncé’s second studio album, a freak tidal wave sweeps across the dock and drags you out to sea. You fashion a makeshift raft and wash up on a desert island days later. Without any means of communication, you are effectively <span class="calibre6">partitioned</span> from the rest of the system (the world). There you wait for five long years….
    </p>
<p id="N1B6C1" class="calibre5">
One morning in 2011 you are awakened by shouts from the sea. A salty old schooner captain has discovered you! After five years alone, the captain leans over the bow and bellows: “How many studio albums does Beyoncé have?”
    </p>
<p id="N1B6C4" class="calibre5">
You now have a decision to make. You can answer the question with the most recent value you have (which is now five years old). If you answer his query, you are <span class="calibre6">available</span>. Or, you can decline to answer the question, knowing since you are partitioned, your answer may not be <span class="calibre6">consistent</span> with the rest of the world. The captain won’t get his answer, but the state of the world remains consistent (if he sails back home, he can get the correct answer). As your role of queried node, you can either help keep the world’s data <span class="calibre6">consistent</span> or be <span class="calibre6">available</span>, but <span class="calibre6">not both</span>.
    </p>
</div>
</div>
<script src="scripts/book_local.js" type="text/javascript" class="calibre3"/>
</div>

{% endraw %}

