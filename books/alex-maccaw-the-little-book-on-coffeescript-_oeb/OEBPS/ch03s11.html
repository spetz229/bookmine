---
layout: page
title: "The Little Book on CoffeeScript"
prev: OEBPS/ch03s10.html
next: OEBPS/ch04.html
book_path: books/alex-maccaw-the-little-book-on-coffeescript-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="book" title="Private Variables"><div class="book"><div class="book"><div class="book"><h1 class="title2"><a id="I_sect13_d1e1506" class="calibre2"></a>Private Variables</h1></div></div></div><p class="calibre8">The <code class="literal">do</code> keyword in CoffeeScript
    lets us execute functions immediately, a great way of encapsulating scope
    and protecting variables. In the example below, we’re defining a variable
    <code class="literal">classToType</code> in the context of an
    anonymous function which is immediately called by <code class="literal">do</code>. That anonymous function returns a second
    anonymous function, which will be the ultimate value of <code class="literal">type</code>. Since <code class="literal">classToType</code> is defined in a context in which no
    reference is kept, it can’t be accessed outside that scope:</p><pre class="screen"># Execute function immediately
type = do -&gt;

  types = [
    "Boolean"
    "Number" 
    "String" 
    "Function" 
    "Array" 
    "Date" 
    "RegExp"
    "Undefined" 
    "Null"
  ]

  classToType = {}
  for name in types
    classToType["[object " + name + "]"] = name.toLowerCase()

  # Return a function
  (obj) -&gt;
    strType = Object::toString.call(obj)
    classToType[strType] or "object"</pre><p class="calibre8">In other words, <code class="literal">classToType</code> is
    completely private, and can never again be referenced outside the
    executing anonymous function. This pattern is a great way of encapsulating
    scope and hiding variables.</p></div></div>

{% endraw %}

