---
layout: page
title: "jQuery UI"
prev: OEBPS/ch10s05.html
next: OEBPS/ch11.html
book_path: books/eric-sarrion-jquery-ui-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="book" title="Examples of Using the Drop Functionality: A Shopping Cart"><div class="book"><div class="book"><div class="book"><h1 class="title2"><a id="examples_of_using_the_drop_functionality" class="calibre1"></a>Examples of Using the Drop Functionality: A Shopping Cart</h1></div></div></div><p class="calibre7">With the help of a shopping cart, let’s examine the various
    possibilities of the drop functionality.</p><div class="book" title="Creating a Shopping Cart with Drag-and-Drop"><div class="book"><div class="book"><div class="book"><h2 class="title5"><a id="creating_a_shopping_cart_with_drag_and_d" class="calibre1"></a>Creating a Shopping Cart with Drag-and-Drop</h2></div></div></div><p class="calibre7">Let’s use drop functionality to manage a shopping cart of books.
      Books are displayed as images, which users can drag into a cart for
      purchase (<a class="ulink" href="ch10s06.html#the_shopping_cart_is_empty" title="Figure 10-7. The shopping cart is empty">Figure 10-7</a>). Each book can
      be moved, and the cart is a place for depositing books. Once the book is
      placed in the cart, it is positioned to the right of the cart (<a class="ulink" href="ch10s06.html#the_shopping_cart_contains_two_books" title="Figure 10-8. The shopping cart contains two books">Figure 10-8</a>):</p><div class="book"><div class="figure"><a id="the_shopping_cart_is_empty" class="firstname"></a><div class="book"><div class="book"><a id="I_mediaobject10_d1e9953" class="firstname"></a><img src="httpatomoreillycomsourceoreillyimages1096458.png.jpg" alt="The shopping cart is empty" class="calibre5"/></div></div><p class="title4">Figure 10-7. The shopping cart is empty</p></div></div><a id="I_programlisting10_d1e9958" class="firstname"></a><pre class="programlisting">&lt;script src=jquery.js&gt;&lt;/script&gt;
&lt;script src=jqueryui/development-bundle/ui/jquery-ui-1.8.4.custom.js&gt;&lt;/script&gt;

&lt;link rel=stylesheet type=text/css
      href="jqueryui/development-bundle/themes/smoothness/jquery.ui.all.css" /&gt;

&lt;h2&gt; Drag your books in the cart! &lt;/h2&gt;
&lt;div id=books&gt;
  &lt;img src=images/j2ee.jpg height=80 /&gt;
  &lt;img src=images/rails.jpg height=80 /&gt;
  &lt;img src=images/javascript.jpg height=80 /&gt;
  &lt;img src=images/html.jpg height=80 /&gt;
&lt;/div&gt;

&lt;hr /&gt;

&lt;h2&gt; Cart: &lt;/h2&gt;
&lt;div id=shopping&gt;
  &lt;img src=images/basket.jpg class=basket /&gt;
&lt;/div&gt;

&lt;script&gt;

<span class="firstname"><strong class="userinput">$("div#books img").draggable ({</strong></span>
  <span class="firstname"><strong class="userinput">revert : "invalid"</strong></span>
<span class="firstname"><strong class="userinput">});</strong></span>

<span class="firstname"><strong class="userinput">$("div#shopping img.basket").droppable ({</strong></span>
  <span class="firstname"><strong class="userinput">drop : function (event, ui)</strong></span>
  <span class="firstname"><strong class="userinput">{</strong></span>
    <span class="firstname"><strong class="userinput">$("div#shopping").append (ui.draggable);</strong></span>
    <span class="firstname"><strong class="userinput">$(ui.draggable).css ({ position:"relative", top:"0px", left:"0px" })</strong></span>
                   <span class="firstname"><strong class="userinput">.draggable ("disable")</strong></span>
                   <span class="firstname"><strong class="userinput">.css ({ opacity : 1 });</strong></span>
  <span class="firstname"><strong class="userinput">}</strong></span>
<span class="firstname"><strong class="userinput">});</strong></span>

&lt;/script&gt;</pre><div class="book"><div class="figure"><a id="the_shopping_cart_contains_two_books" class="firstname"></a><div class="book"><div class="book"><a id="I_mediaobject10_d1e10002" class="firstname"></a><img src="httpatomoreillycomsourceoreillyimages1096460.png.jpg" alt="The shopping cart contains two books" class="calibre5"/></div></div><p class="title4">Figure 10-8. The shopping cart contains two books</p></div></div><p class="calibre7"><code class="literal">$(""div#books img"").draggable
      ()</code>makes each picture draggable, while the cart is <span class="firstname">defined</span> as an element of deposit with <code class="literal">$("div#shopping img.basket").droppable ()</code>. The
      <code class="literal">revert</code> option <code class="literal">"invalid"</code> resets the dragged item to its
      original position if it is not placed in the cart.</p><p class="calibre7">The <code class="literal">drop ()</code> method allows
      treatment when depositing a book in the cart. The moved image (<code class="literal">ui.draggable</code>) is inserted at the end of the
      cart (by <code class="literal">append ()</code>). The <code class="literal">css ()</code> <span class="firstname">instruction</span> removes the book picture from its
      original position and gives it a new position to the right of the
      basket. The <code class="literal">draggable ("disable")</code>
      instruction prevents users from moving this image again and gives it an
      opacity of 1 (because the <code class="literal">draggable
      </code><span class="firstname"><code class="literal">("disable")</code></span> instruction automatically
      decreases the opacity of the element).</p></div><div class="book" title="Adding a Visual Effect to Shopping Cart Deposits"><div class="book"><div class="book"><div class="book"><h2 class="title5"><a id="adding_a_visual_effect_to_shopping_cart" class="calibre1"></a>Adding a Visual Effect to Shopping Cart Deposits</h2></div></div></div><p class="calibre7">When a book picture is dragged onto the shopping cart, there is no
      visual indication that anything will happen if the picture is dropped
      there.</p><p class="calibre7">Let’s modify the code so that the cart appears responsive when
      books are deposited in it, for example, by displaying a red border
      (<a class="ulink" href="ch10s06.html#a_visual_effect_when_depositing_elements" title="Figure 10-9. A visual effect when depositing elements in the shopping cart">Figure 10-9</a>):</p><a id="I_programlisting10_d1e10058" class="firstname"></a><pre class="programlisting">&lt;script src = jquery.js&gt;&lt;/script&gt;
&lt;script src = jqueryui/js/jquery-ui-1.8.16.custom.min.js&gt;&lt;/script&gt;

&lt;link rel=stylesheet type=text/css
      href=jqueryui/css/smoothness/jquery-ui-1.8.16.custom.css /&gt;

<span class="firstname"><strong class="userinput">&lt;style type=text/css&gt;</strong></span>
  <span class="firstname"><strong class="userinput">.basket {</strong></span>
    <span class="firstname"><strong class="userinput">border : transparent solid 2px;</strong></span>
  <span class="firstname"><strong class="userinput">}</strong></span>
  <span class="firstname"><strong class="userinput">.hover {</strong></span>
    <span class="firstname"><strong class="userinput">border-color : red;</strong></span>
  <span class="firstname"><strong class="userinput">}</strong></span>
<span class="firstname"><strong class="userinput">&lt;/style&gt;</strong></span>

&lt;h2&gt; Drag your books in the cart! &lt;/h2&gt;
&lt;div id=books&gt;
  &lt;img src=images/j2ee.jpg height=80 /&gt;
  &lt;img src=images/rails.jpg height=80 /&gt;
  &lt;img src=images/javascript.jpg height=80 /&gt;
  &lt;img src=images/html.jpg height=80 /&gt;
&lt;/div&gt;

&lt;hr /&gt;

&lt;h2&gt; Cart: &lt;/h2&gt;
&lt;div id=shopping&gt;
  &lt;img src=images/basket.jpg class=basket /&gt;
&lt;/div&gt;

&lt;script&gt;

$("div#books img").draggable ({
  revert : "invalid"
});

$("div#shopping img.basket").droppable ({
  <span class="firstname"><strong class="userinput">hoverClass : "hover",</strong></span>
  drop : function (event, ui)
  {
    $("div#shopping").append (ui.draggable);
    $(ui.draggable).css ({ position:"relative", top:"0px", left:"0px" })
                   .draggable ("disable")
                   .css ({ opacity : 1 });
  }
});

&lt;/script&gt;</pre><div class="book"><div class="figure"><a id="a_visual_effect_when_depositing_elements" class="firstname"></a><div class="book"><div class="book"><a id="I_mediaobject10_d1e10091" class="firstname"></a><img src="httpatomoreillycomsourceoreillyimages1096462.png.jpg" alt="A visual effect when depositing elements in the shopping cart" class="calibre5"/></div></div><p class="title4">Figure 10-9. A visual effect when depositing elements in the shopping
        cart</p></div></div><p class="calibre7">We have added the <code class="literal">hoverClass</code>
      option to the script in the <code class="literal">droppable
      (options)</code> method. This allows you to specify one or more CSS
      classes that will be added to the element of deposit when an authorized
      element moves over it. This class includes the <code class="literal">border-color:red</code> CSS instruction. For
      this to work, we have included CSS instructions in the <code class="literal">basket</code> class (used by the element of deposit,
      that is to say the shopping cart) for a transparent border, which avoids
      having a displacement of the shopping cart when moving an item onto it
      (which would add a border).</p></div><div class="book" title="Removing an Item from the Cart"><div class="book"><div class="book"><div class="book"><h2 class="title5"><a id="removing_an_item_from_the_cart" class="calibre1"></a>Removing an Item from the Cart</h2></div></div></div><p class="calibre7">The books in the shopping cart may not, at present, be removed
      from it. Here, we’ll change the code to allow users to remove books from
      the cart. When books are removed from the cart, they re-enter the list
      of books to buy. To do this, we manage the depositing of a purchased
      book on the <code class="literal">&lt;div&gt;</code> containing
      the list of books to buy (<code class="literal">div#books</code>):</p><a id="I_programlisting10_d1e10121" class="firstname"></a><pre class="programlisting">&lt;script src = jquery.js&gt;&lt;/script&gt;
&lt;script src = jqueryui/js/jquery-ui-1.8.16.custom.min.js&gt;&lt;/script&gt;

&lt;link rel=stylesheet type=text/css
      href=jqueryui/css/smoothness/jquery-ui-1.8.16.custom.css /&gt;

&lt;style type=text/css&gt;
  .basket {
    border : transparent solid 2px;
  }
  .hover {
    border-color : red;
  }
&lt;/style&gt;

&lt;h2&gt; Drag your books in the cart! &lt;/h2&gt;
&lt;div id=books&gt;
  &lt;img src=images/j2ee.jpg height=80 /&gt;
  &lt;img src=images/rails.jpg height=80 /&gt;
  &lt;img src=images/javascript.jpg height=80 /&gt;
  &lt;img src=images/html.jpg height=80 /&gt;
&lt;/div&gt;

&lt;hr /&gt;

&lt;h2&gt; Cart: &lt;/h2&gt;
&lt;div id=shopping&gt;
  &lt;img src=images/basket.jpg class=basket /&gt;
&lt;/div&gt;

&lt;script&gt;

$("div#books img").draggable ({
  revert : "invalid"
});

$("div#shopping img.basket").droppable ({
  hoverClass : "hover",
  drop : function (event, ui)
  {
    $("div#shopping").append (ui.draggable);
    $(ui.draggable).css ({ position:"relative", top:"0px", left:"0px" })
                   <span class="firstname"><strong class="userinput">.addClass ("bought");</strong></span>
  }
});

$("div#books").droppable ({
  accept : ".bought",
  drop : function (event, ui)
  {
    $("div#books").append (ui.draggable);
    $(ui.draggable).css ({ position:"relative", top:"0px", left:"0px" })
                  <span class="firstname"><strong class="userinput">.removeClass ("bought");</strong></span>
  }
});

&lt;/script&gt;</pre><p class="calibre7">Each book placed in the cart is now assigned the <code class="literal">"bought"</code> CSS class. The <code class="literal">div#books</code> will only accept books that have
      this class (thanks to <code class="literal">accept</code> sets to
      <code class="literal">".bought"</code>). The <code class="literal">drop ()</code> method used in the list of books is
      similar to that used on the cart, except that it removes the <code class="literal">"bought"</code> CSS class, because the book is no
      longer in the shopping cart.</p></div></div></div>

{% endraw %}

