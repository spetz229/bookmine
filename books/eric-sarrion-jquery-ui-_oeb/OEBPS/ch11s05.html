---
layout: page
title: "jQuery UI"
prev: OEBPS/ch11s04.html
next: OEBPS/ch12.html
book_path: books/eric-sarrion-jquery-ui-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="book" title="Examples of Using the Selection Mechanism"><div class="book"><div class="book"><div class="book"><h1 class="title2"><a id="examples_of_using_the_selection_mechanis" class="calibre1"></a>Examples of Using the Selection Mechanism</h1></div></div></div><p class="calibre7">Let’s apply the information presented in this chapter. Here, we’ll
    create examples that incorporate the selection mechanism.</p><div class="book" title="Displaying the Order of the Events During the Selection"><div class="book"><div class="book"><div class="book"><h2 class="title5"><a id="displaying_the_order_of_the_events_durin" class="calibre1"></a>Displaying the Order of the Events During the Selection</h2></div></div></div><p class="calibre7">The goal in this example is to display the order of the events
      described above (shown in <a class="ulink" href="ch11s05.html#display_after_several_selection_sequence" title="Figure 11-6. Display after several selection sequences">Figure 11-6</a>). For this, we
      display five selectable paragraphs and a <code class="literal">&lt;span&gt;</code> element containing the name of
      events. The <code class="literal">start</code> event is shown in
      bold to indicate the beginning of a new sequence:</p><a id="I_programlisting11_d1e10729" class="firstname"></a><pre class="programlisting">&lt;script src = jquery.js&gt;&lt;/script&gt;
&lt;script src = jqueryui/js/jquery-ui-1.8.16.custom.min.js&gt;&lt;/script&gt;

&lt;link rel=stylesheet type=text/css
      href=jqueryui/css/smoothness/jquery-ui-1.8.16.custom.css /&gt;

&lt;style type=text/css&gt;
  p.ui-selecting {
    color : red;
  }
  p.ui-selected {
    background-color : gainsboro;
  }
&lt;/style&gt;

&lt;div id=div1&gt;
  &lt;p&gt; Paragraph 1 &lt;/p&gt;
  &lt;p&gt; Paragraph 2 &lt;/p&gt;
  &lt;p&gt; Paragraph 3 &lt;/p&gt;
  &lt;p&gt; Paragraph 4 &lt;/p&gt;
  &lt;p&gt; Paragraph 5 &lt;/p&gt;
&lt;/div&gt;

&lt;hr /&gt;

&lt;span id=result&gt;&lt;/span&gt;

&lt;script&gt;

$("#div1").selectable ({
  <span class="firstname"><strong class="userinput">start : function (event)</strong></span>
  {
    $("span#result").html ($("span#result").html () + " &lt;b&gt;start&lt;/b&gt;");
  },
  <span class="firstname"><strong class="userinput">stop : function (event)</strong></span>
  {
    $("span#result").html ($("span#result").html () + ", stop");
  },
  <span class="firstname"><strong class="userinput">selecting : function (event, ui)</strong></span>
  {
    $("span#result").html ($("span#result").html () + ", selecting");
  },
  <span class="firstname"><strong class="userinput">unselecting : function (event, ui)</strong></span>
  {
    $("span#result").html ($("span#result").html () + ", unselecting");
  },
  <span class="firstname"><strong class="userinput">selected : function (event, ui)</strong></span>
  {
    $("span#result").html ($("span#result").html () + ", selected");
  },
  <span class="firstname"><strong class="userinput">unselected : function (event, ui)</strong></span>
  {
    $("span#result").html ($("span#result").html () + ", unselected");
  }
});

&lt;/script&gt;</pre><p class="calibre7">At each event, the previous contents of &lt;span&gt; are recovered
      and the name of the called method is added.</p><div class="book"><div class="figure"><a id="display_after_several_selection_sequence" class="firstname"></a><div class="book"><div class="book"><a id="I_mediaobject11_d1e10755" class="firstname"></a><img src="httpatomoreillycomsourceoreillyimages1096474.png" alt="Display after several selection sequences" class="calibre5"/></div></div><p class="title4">Figure 11-6. Display after several selection sequences</p></div></div></div><div class="book" title="Preventing the Selection of an Element"><div class="book"><div class="book"><div class="book"><h2 class="title5"><a id="preventing_the_selection_of_an_element" class="calibre1"></a>Preventing the Selection of an Element</h2></div></div></div><p class="calibre7">By default, all elements of the descendants can be selected. The
      <code class="literal">filter</code> option is a selector to
      indicate precisely those we would like users to be able to select. For
      example, to select only the first paragraph, write the following:</p><a id="I_programlisting11_d1e10768" class="firstname"></a><pre class="programlisting">&lt;script src = jquery.js&gt;&lt;/script&gt;
&lt;script src = jqueryui/js/jquery-ui-1.8.16.custom.min.js&gt;&lt;/script&gt;

&lt;link rel=stylesheet type=text/css
      href=jqueryui/css/smoothness/jquery-ui-1.8.16.custom.css /&gt;

&lt;style type=text/css&gt;
  p.ui-selecting {
    color : red;
  }
  p.ui-selected {
    background-color : gainsboro;
  }
&lt;/style&gt;

&lt;div id=div1&gt;
  &lt;p&gt; Paragraph 1 &lt;/p&gt;
  &lt;p&gt; Paragraph 2 &lt;/p&gt;
  &lt;p&gt; Paragraph 3 &lt;/p&gt;
  &lt;p&gt; Paragraph 4 &lt;/p&gt;
  &lt;p&gt; Paragraph 5 &lt;/p&gt;
&lt;/div&gt;

&lt;script&gt;

<span class="firstname"><strong class="userinput">$("#div1").selectable ({</strong></span>
  <span class="firstname"><strong class="userinput">filter : "p:first-child"</strong></span>
<span class="firstname"><strong class="userinput">});</strong></span>

&lt;/script&gt;</pre><p class="calibre7">We can see the display when trying to select all the paragraphs in
      <a class="ulink" href="ch11s05.html#preventing_the_selection_of_all_items_ex" title="Figure 11-7. Preventing the selection of all items except Paragraph 1">Figure 11-7</a>. Only the
      first paragraph can actually be selected, even if the attempted
      selection includes five paragraphs.</p><div class="book"><div class="figure"><a id="preventing_the_selection_of_all_items_ex" class="firstname"></a><div class="book"><div class="book"><a id="I_mediaobject11_d1e10786" class="firstname"></a><img src="httpatomoreillycomsourceoreillyimages1096476.png.jpg" alt="Preventing the selection of all items except Paragraph 1" class="calibre5"/></div></div><p class="title4">Figure 11-7. Preventing the selection of all items except Paragraph
        1</p></div></div><p class="calibre7">Conversely, to prevent the selection of the first paragraph (shown
      in <a class="ulink" href="ch11s05.html#preventing_the_selection_of_an_eleme" title="Figure 11-8. Preventing the selection of an element">Figure 11-8</a>) use the
      following:</p><a id="I_programlisting11_d1e10795" class="firstname"></a><pre class="programlisting">&lt;script&gt;

<span class="firstname"><strong class="userinput">$("#div1").selectable ({</strong></span>
  <span class="firstname"><strong class="userinput">filter : "p:not(:first-child)"</strong></span>
<span class="firstname"><strong class="userinput">});</strong></span>

&lt;/script&gt;</pre></div><div class="book" title="Inhibiting Clicks to Select an Item"><div class="book"><div class="book"><div class="book"><h2 class="title5"><a id="inhibiting_clicks_to_select_an_item" class="calibre1"></a>Inhibiting Clicks to Select an Item</h2></div></div></div><p class="calibre7">By default, a click on a selectable item is sufficient to select
      or deselect it. We can inhibit the ability to select an item by clicking
      on it, thereby requiring users to draw selection rectangles around the
      items they want to select. This is done using the <code class="literal">distance</code> option with a value greater than
      0:</p><a id="I_programlisting11_d1e10814" class="firstname"></a><pre class="programlisting">&lt;script src = jquery.js&gt;&lt;/script&gt;
&lt;script src = jqueryui/js/jquery-ui-1.8.16.custom.min.js&gt;&lt;/script&gt;

&lt;link rel=stylesheet type=text/css
      href=jqueryui/css/smoothness/jquery-ui-1.8.16.custom.css /&gt;

&lt;style type=text/css&gt;
  p.ui-selecting {
    color : red;
  }
  p.ui-selected {
    background-color : gainsboro;
  }
&lt;/style&gt;

&lt;div id=div1&gt;
  &lt;p&gt; Paragraph 1 &lt;/p&gt;
  &lt;p&gt; Paragraph 2 &lt;/p&gt;
  &lt;p&gt; Paragraph 3 &lt;/p&gt;
  &lt;p&gt; Paragraph 4 &lt;/p&gt;
  &lt;p&gt; Paragraph 5 &lt;/p&gt;
&lt;/div&gt;

&lt;script&gt;

$("#div1").selectable ({
  <span class="firstname"><strong class="userinput">distance : 1</strong></span>
});

&lt;/script&gt;</pre><p class="calibre7">Paragraphs can now be selected by dragging the mouse in the
      encompassing <code class="literal">&lt;div&gt;</code> (and moving
      at least one pixel), so there is no possibility of using a single click
      to select an item. To restore this functionality, set <code class="literal">options.distance</code> to 0.</p><div class="book"><div class="figure"><a id="preventing_the_selection_of_an_eleme" class="firstname"></a><div class="book"><div class="book"><a id="I_mediaobject11_d1e10830" class="firstname"></a><img src="httpatomoreillycomsourceoreillyimages1096478.png" alt="Preventing the selection of an element" class="calibre5"/></div></div><p class="title4">Figure 11-8. Preventing the selection of an element</p></div></div></div><div class="book" title="Managing a Shopping Cart"><div class="book"><div class="book"><div class="book"><h2 class="title5"><a id="managing_a_shopping_cart" class="calibre1"></a>Managing a Shopping Cart</h2></div></div></div><p class="calibre7">Here, we’ll build on the shopping cart example from <a class="ulink" href="ch10.html" title="Chapter 10. Drag-and-Drop">Chapter 10</a> to allow users to select one or more books
      and drag them into the shopping cart. This will provide the opportunity
      to select several books for purchase with one mouse move (<a class="ulink" href="ch11s05.html#three_books_are_placed_in_the_cart_simul" title="Figure 11-9. Three books are placed in the cart simultaneously">Figure 11-9</a>).</p><p class="calibre7">This program takes into account some differences between Internet
      Explorer and other browsers. In particular, a problem arises in Internet
      Explorer when moving books to the cart—the move can be interpreted as a
      new selection sequence. To resolve this issue, we add the <code class="literal">isSelected</code> property (<code class="literal">true</code> if the book is selected) to each selected
      book. Other browsers use the <code class="literal">ui-selected</code> CSS class automatically added by
      jQuery UI when selecting an item. With this trick, our program is
      compatible:</p><a id="I_programlisting11_d1e10855" class="firstname"></a><pre class="programlisting">&lt;script src = jquery.js&gt;&lt;/script&gt;
&lt;script src = jqueryui/js/jquery-ui-1.8.16.custom.min.js&gt;&lt;/script&gt;

&lt;link rel=stylesheet type=text/css
      href=jqueryui/css/smoothness/jquery-ui-1.8.16.custom.css /&gt;

&lt;style type=text/css&gt;
  .basket {
    border : transparent solid 2px;
  }
  .hover {
    border-color : red;
  }
  img.border {
    border : transparent solid 2px;
  }
  img.ui-selected {
    border-color : red;
  }
&lt;/style&gt;

&lt;h2&gt;Drag your books in the cart! &lt;/h2&gt;
&lt;div id=books&gt;
  &lt;img src=images/j2ee.jpg height=80 class=border /&gt;
  &lt;img src=images/rails.jpg height=80 class=border /&gt;
  &lt;img src=images/javascript.jpg height=80 class=border /&gt;
  &lt;img src=images/html.jpg height=80 class=border /&gt;
&lt;/div&gt;

&lt;hr /&gt;

&lt;h2&gt; Cart: &lt;/h2&gt;
&lt;div id=shopping&gt;
  &lt;img src=images/basket.jpg class=basket /&gt;
&lt;/div&gt;

&lt;script&gt;

<span class="firstname"><strong class="userinput">$("div#shopping img.basket").droppable ({</strong></span>
  hoverClass : "hover",
  <span class="firstname"><strong class="userinput">deactivate : function (event, ui)</strong></span>
  {
    var selector = $.browser.msie ?
                      "div#books img[isSelected=true]" :
                      "div#books img.ui-selected";
    $(selector).each (function (index)
    {
      $(this).css ({ position:"relative", top:"0px", left:"0px" });
    });
  },
  <span class="firstname"><strong class="userinput">drop : function (event, ui)</strong></span>
  {
    var selector = $.browser.msie ?
                      "div#books img[isSelected=true]" :
                      "div#books img.ui-selected";
    $(selector).each (function (index)
    {
      $("div#shopping").append (this);
      $(this).css ({ position:"relative", top:"0px", left:"0px" })
             .removeClass ("ui-selected");
    });
  }
});

<span class="firstname"><strong class="userinput">$("div#books").selectable ({</strong></span>
  <span class="firstname"><strong class="userinput">selected : function (event, ui)</strong></span>
  {
    ui.selected.isSelected = true;
    $(ui.selected).draggable ({
      start : function (event)
      {
        $("div#books").selectable ("disable");
      },
      drag : function (event, ui)
      {
        var selector = $.browser.msie ?
                          "div#books img[isSelected=true]" :
                          "div#books img.ui-selected";
        $(selector).each (function (index)
        {
          $(this).css ({ position : "relative",
                         top : ui.helper.css ("top"),
                         left : ui.helper.css ("left") });
        });
      },
      stop : function (event)
      {
        $("div#books").selectable ("enable");
      }
    });
  },
  <span class="firstname"><strong class="userinput">unselected : function (event, ui)</strong></span>
  {
    ui.unselected.isSelected = false;
    $(ui.unselected).draggable ("destroy");
  }
});

&lt;/script&gt;</pre><div class="book"><div class="figure"><a id="three_books_are_placed_in_the_cart_simul" class="firstname"></a><div class="book"><div class="book"><a id="I_mediaobject11_d1e10879" class="firstname"></a><img src="httpatomoreillycomsourceoreillyimages1096480.png.jpg" alt="Three books are placed in the cart simultaneously" class="calibre5"/></div></div><p class="title4">Figure 11-9. Three books are placed in the cart simultaneously</p></div></div></div></div></div>

{% endraw %}

