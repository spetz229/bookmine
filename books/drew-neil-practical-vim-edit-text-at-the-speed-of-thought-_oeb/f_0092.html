---
layout: page
title: "Practical Vim (for Kathryn Amaral)"
prev: f_0091.html
next: f_0093.html
book_path: books/drew-neil-practical-vim-edit-text-at-the-speed-of-thought-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>


<table class="arr-recipe" id="sec.put.commands">
<tr class="calibre14">
<td class="arr-recipe-number">Tip 62</td>
<td class="arr-recipe-name">Paste from a Register</td>
</tr>
</table>
<p id="N16C0E" class="calibre4">
<span class="calibre5">
        The Normal mode put command can behave differently, depending on the nature of the text that is being inserted. It can be helpful to adopt different strategies, depending on whether we’re pasting a line-wise or a character-wise region of text.
    </span>
</p>
<p id="N16C29" class="calibre4">
      In <a xmlns:str="http://exslt.org/strings" href="f_0089.html#sec.xp.ddp.yyp">Tip 59</a>, we saw that we could transpose the order of two characters by pressing <span class="calibre17">xp</span>, while <span class="calibre17">ddp</span> would transpose the order of two lines. We use the <span class="calibre17">p</span> command in both cases, but the outcome is subtly different.
    </p>
<p id="N16C39" class="calibre4">
      The <span class="calibre17">p</span> command puts the text from a register after the cursor position (<strong xmlns:str="http://exslt.org/strings" class="calibre10">p</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/change.html#p">
<img alt="info" src="images/information.png" class="calibre21"/>​</a>). As a complement, Vim also provides the (uppercase) <span class="calibre17">P</span> command, which inserts text before the cursor position. What is meant by <span class="calibre5">before</span> or <span class="calibre5">after</span> the cursor position can differ, depending on the contents of the register that is being inserted.
    </p>
<p id="N16C58" class="calibre4">
      In the case of <span class="calibre17">xp</span>, the register contains a single character. The <span class="calibre17">p</span> command puts the contents of the register directly after <span class="calibre5">the character that the cursor is positioned on.</span>
</p>
<p id="N16C63" class="calibre4">
      In the case of <span class="calibre17">ddp</span>, the register contains one complete line. The <span class="calibre17">p</span> command puts the contents of the register on <span class="calibre5">the line below the one that the cursor is positioned on</span>.
    </p>
<p id="N16C6F" class="calibre4">
      How can we know whether the <span class="calibre17">p</span> command will put the text from the register after the current character or after the current line? It depends on how the specified register was set. A line-wise yank or delete operation (such as <span class="calibre17">dd</span>, <span class="calibre17">yy</span>, or <span class="calibre17">dap</span>) creates a line-wise register, whereas a character-wise yank or delete (such as <span class="calibre17">x</span>, <span class="calibre17">diw</span>, or <span class="calibre17">das</span>) creates a character-wise register. In general, the outcome of using the <span class="calibre17">p</span> command is fairly intuitive (see <strong xmlns:str="http://exslt.org/strings" class="calibre10">linewise-register</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/change.html#linewise-register">
<img alt="info" src="images/information.png" class="calibre21"/>​</a> for more details).
    </p>
<h3 class="calibre22">Pasting Character-wise Regions</h3>
<p id="N16C92" class="calibre4">
        Suppose that our default register contains the text <code class="cf">collection</code>, and that we want to paste as the first argument to a method call. Whether we use the <span class="calibre17">p</span> or <span class="calibre17">P</span> command depends on where the cursor is positioned. Take this buffer:
      </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​collection = getCollection();​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​process<span class="shade-fg-white">(</span>, target);​</code>​</div>
</td>
</tr>
</table>
<p id="N16CBB" class="calibre4">
        Compare it with this:
      </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​collection = getCollection();​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​process(<span class="shade-fg-white">,</span> target);​</code>​</div>
</td>
</tr>
</table>
<p id="N16CD1" class="calibre4">
        In the first case we would use <span class="calibre17">p</span>, whereas in the second case we would use <span class="calibre17">P</span>. I don’t find this to be very intuitive. In fact, I get it wrong often enough that <span class="calibre17">puP</span> and <span class="calibre17">Pup</span> are practically muscle memory for me!
      </p>
<p id="N16CE0" class="calibre4">
        I don’t like having to think about whether a character-wise region of text needs to go in front of the cursor or after it. For that reason, I sometimes prefer to paste character-wise regions of text from Insert mode using the <span class="calibre17">&lt;C-r&gt;{register}</span> mapping rather than using the Normal mode <span class="calibre17">p</span> and <span class="calibre17">P</span> commands. Using this technique, the text from the register is always inserted in front of the cursor position, just as though we were typing it in Insert mode.
      </p>
<p id="N16CF1" class="calibre4">
        From Insert mode, we can insert the contents of the unnamed register by pressing <span class="calibre17">&lt;C-r&gt;"</span>, or we can insert the contents of the yank register by pressing <span class="calibre17">&lt;C-r&gt;0</span> (see <a xmlns:str="http://exslt.org/strings" href="f_0035.html#sec.paste.from.insert">Tip 15</a>, for more details). We can use this technique to solve our problem from <a xmlns:str="http://exslt.org/strings" href="f_0089.html#sec.clobber">​<em class="calibre5">Oops! I Clobbered My Yank</em>​</a>:
      </p>
<table class="simpletable">
<thead class="calibre23">
<tr class="calibre7">
<th class="hlines">Keystrokes</th>
<th class="hlines">Buffer Contents</th>
</tr>
</thead>
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre24">
<p class="last-para-in-cell">
<span class="calibre17">yiw</span>
</p>
</td>
<td class="calibre24">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​<span class="shade-fg-white">c</span>ollection = getCollection();​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​process(somethingInTheWay, target);​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">jww</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​collection = getCollection();​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​process(<span class="shade-fg-white">s</span>omethingInTheWay, target);​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">ciw&lt;C-r&gt;0</span>
<code class="cf">&lt;Esc&gt;</code>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​collection = getCollection();​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​process(collectio<span class="shade-fg-white">n</span>, target);​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
<p id="N16D5B" class="calibre4">
        Using the <span class="calibre17">ciw</span> command gives us an added bonus: the dot command now replaces the current word with “collection.”
      </p>
<h3 class="calibre22">Pasting Line-Wise Regions</h3>
<p id="N16D6A" class="calibre4">
        When pasting from a line-wise register, the <span class="calibre17">p</span> and <span class="calibre17">P</span> commands put the text below or above the current line. This is more intuitive than the character-wise behavior.
      </p>
<p id="N16D7D" class="calibre4">
        It’s worth noting that Vim also provides <span class="calibre17">gp</span> and <span class="calibre17">gP</span> commands. These also put the text before or after the current line, but they leave the cursor positioned at the end of the pasted text instead of at the beginning. The <span class="calibre17">gP</span> command is especially useful when duplicating a range of lines, as demonstrated here:
      </p>
<table class="simpletable">
<thead class="calibre23">
<tr class="calibre7">
<th class="hlines">Keystrokes</th>
<th class="hlines">Buffer Contents</th>
</tr>
</thead>
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre24">
<p class="last-para-in-cell">
<span class="calibre17">yap</span>
</p>
</td>
<td class="calibre24">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​&lt;table&gt;​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​  <span class="shade-fg-white">&lt;</span>tr&gt;​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​    &lt;td&gt;Keystrokes&lt;/td&gt;​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​    &lt;td&gt;Buffer Contents&lt;/td&gt;​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​  &lt;/tr&gt;​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​&lt;/table&gt;​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">gP</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​&lt;table&gt;​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​  &lt;tr&gt;​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​    &lt;td&gt;Keystrokes&lt;/td&gt;​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​    &lt;td&gt;Buffer Contents&lt;/td&gt;​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​  &lt;/tr&gt;​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​<span class="shade-fg-white"> </span> &lt;tr&gt;​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​    &lt;td&gt;Keystrokes&lt;/td&gt;​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​    &lt;td&gt;Buffer Contents&lt;/td&gt;​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​  &lt;/tr&gt;​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​&lt;/table&gt;​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
<p id="N16DEC" class="calibre4">
        We can use the duplicated text as a template, changing the contents of the table cells to make it look how we want. Both the <span class="calibre17">P</span> and <span class="calibre17">gP</span> commands would  have worked fine, except that the first one would leave our cursor positioned above the inserted text. The <span class="calibre17">gP</span> command leaves our cursor positioned on the second duplicate, which sets us up conveniently so that we can change it to suit our needs.
      </p>
<h3 class="calibre22">Discussion</h3>
<p id="N16DFC" class="calibre4">
        The <span class="calibre17">p</span> and <span class="calibre17">P</span> commands are great for pasting multiline regions of text. But for short sections of character-wise text, the <span class="calibre17">&lt;C-r&gt;{register}</span> mapping can be more intuitive.
      </p>
<script src="scripts/book_local.js" type="text/javascript" class="calibre2"/>
</div>

{% endraw %}

