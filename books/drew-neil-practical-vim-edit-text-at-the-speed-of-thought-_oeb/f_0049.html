---
layout: page
title: "Practical Vim (for Kathryn Amaral)"
prev: f_0048.html
next: f_0050.html
book_path: books/drew-neil-practical-vim-edit-text-at-the-speed-of-thought-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>


<table class="arr-recipe" id="N12711">
<tr class="calibre14">
<td class="arr-recipe-number">Tip 27</td>
<td class="arr-recipe-name">Meet Vim’s Command Line</td>
</tr>
</table>
<p id="N12717" class="calibre4">
<span class="calibre5">
        Command-Line mode prompts us to enter an Ex command, a search pattern, or an expression. In this tip, we’ll meet a selection of Ex commands that operate on the text in a buffer, and we’ll learn about some of the special key mappings that can be used in this mode.
    </span>
</p>
<hr class="calibre37"/>
<div class="figurecaption" id="table.ex.ed.commands">Table 9. Ex Commands That Operate on the Text in a Buffer</div>
<dl class="calibre34">
<dt class="calibre1">
<b class="calibre10">Command</b>
</dt>
<dd class="calibre35">
<b class="calibre10">Effect</b>
</dd>
<dt class="calibre1">
<code class="cf">:[range]delete [x]</code>
</dt>
<dd class="calibre35">
<p class="calibre4">Delete specified lines [into register x]</p>
</dd>
<dt class="calibre1">
<code class="cf">:[range]yank [x]</code>
</dt>
<dd class="calibre35">
<p class="calibre4">Yank specified lines [into register x]</p>
</dd>
<dt class="calibre1">
<code class="cf">:[line]put [x]</code>
</dt>
<dd class="calibre35">
<p class="calibre4">Put the text from register x after the specified line</p>
</dd>
<dt class="calibre1">
<code class="cf">:[range]copy {address}</code>
</dt>
<dd class="calibre35">
<p class="calibre4">Copy the specified lines to below the line specified by {address}</p>
</dd>
<dt class="calibre1">
<code class="cf">:[range]move {address}</code>
</dt>
<dd class="calibre35">
<p class="calibre4">Move the specified lines to below the line specified by {address}</p>
</dd>
<dt class="calibre1">
<code class="cf">:[range]join</code>
</dt>
<dd class="calibre35">
<p class="calibre4">Join the specified lines</p>
</dd>
<dt class="calibre1">
<code class="cf">:[range]normal {commands}</code>
</dt>
<dd class="calibre35">
<p class="calibre4">Execute Normal mode {commands} on each specified line</p>
</dd>
<dt class="calibre1">
<code class="cf">:[range]substitute/{pattern}/{string}/[flags]</code>
</dt>
<dd class="calibre35">
<p class="calibre4">Replace occurrences of {pattern} with {string} on each specified line</p>
</dd>
<dt class="calibre1">
<code class="cf">:[range]global/{pattern}/[cmd]</code>
</dt>
<dd class="calibre35">
<p class="calibre4">Execute the Ex command [cmd] on all specified lines where the {pattern} matches</p>
</dd>
</dl>
<hr class="calibre37"/>
<p id="N1278D" class="calibre4">
      When we press the <span class="calibre17">:</span> key, Vim switches into Command-Line mode. This mode has some resemblance to the command line that we use in the shell. We can type the name of a command and then execute it by pressing <span class="calibre17">&lt;CR&gt;</span>. At any time, we can switch from Command-Line mode back to Normal mode by pressing <span class="calibre17">&lt;Esc&gt;</span>.
    </p>
<p id="N127AE" class="calibre4">
      For historical reasons, the commands that we execute from Command-Line mode are called <span class="calibre5">Ex commands</span> (see <a xmlns:str="http://exslt.org/strings" href="#sidebar.vi.etymology">​<em class="calibre5">On the Etymology of Vim (and Family)</em>​</a>). Command-Line mode is also enabled when we press <span class="calibre17">/</span> to bring up a search prompt or  <span class="calibre17">&lt;C-r&gt;=</span> to access the expression register (see <a xmlns:str="http://exslt.org/strings" href="f_0036.html#sec.insert.expression">Tip 16</a>). Some of the tricks in this chapter are applicable with each of these different prompts, but for the most part we’ll focus on Ex commands.
    </p>
<p id="N127C5" class="calibre4">
      We can use Ex commands to read and write files (<code class="cf">:edit</code> and <code class="cf">:write</code>), to create tabs (<code class="cf">:tabnew</code>) or split windows (<code class="cf">:split</code>), or to interact with the argument list (<code class="cf">:prev</code>/<code class="cf">:next</code>) or the buffer list (<code class="cf">:bprev</code>/<code class="cf">:bnext</code>). In fact, Vim has an Ex command for just about everything (see <strong xmlns:str="http://exslt.org/strings" class="calibre10">ex-cmd-index</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/index.html#ex-cmd-index">
<img alt="info" src="images/information.png" class="calibre21"/>​</a> for the full list).
    </p>
<p id="N1281B" class="calibre4">
      In this chapter, we’ll focus mainly on the handful of Ex commands we can use to edit text. <a xmlns:str="http://exslt.org/strings" href="#table.ex.ed.commands">Table 9, ​<em class="calibre5">Ex Commands That Operate on the Text in a Buffer</em>​</a>, shows a selection of some of the most useful ones.
    </p>
<p id="N12822" class="calibre4">
      Most of these commands can accept a range. We’ll find out what this means in <a xmlns:str="http://exslt.org/strings" href="f_0050.html#sec.ex.address">Tip 28</a>. The <code class="cf">:copy</code> command is great for quickly duplicating a line, as we’ll see in <a xmlns:str="http://exslt.org/strings" href="f_0051.html#sec.ex.copy">​<em class="calibre5">Duplicate Lines with the ‘:t’ Command</em>​</a>. The <code class="cf">:normal</code> command provides a convenient way to make the same change on a range of lines, as we’ll see in <a xmlns:str="http://exslt.org/strings" href="f_0052.html#sec.ex.normal">Tip 30</a>.
    </p>
<p id="N12837" class="calibre4">
      We’ll learn more about <code class="cf">:delete</code>, <code class="cf">:yank</code>, and <code class="cf">:put</code> commands in <a xmlns:str="http://exslt.org/strings" href="f_0088.html#chp.copy.and.paste">Chapter 10, ​<em class="calibre5">Copy and Paste</em>​</a>. The <code class="cf">:substitute</code> and <code class="cf">:global</code> commands are very powerful, so they each get a chapter of their own. See <a xmlns:str="http://exslt.org/strings" href="f_0121.html#chp.substitution">Chapter 14, ​<em class="calibre5">Substitution</em>​</a>, and <a xmlns:str="http://exslt.org/strings" href="f_0132.html#chp.global.commands">Chapter 15, ​<em class="calibre5">Global Commands</em>​</a>.
    </p>
<div class="sidebar" id="sidebar.vi.etymology">
<div class="sidebar-title">On the Etymology of Vim (and Family)</div>
<div class="calibre1">
<p id="N1285A" class="calibre4">
<code class="cf1">ed</code> was the original Unix text editor. It was written at a time when video displays were uncommon. Source code was usually printed onto a roll of paper and edited on a teletype terminal.<a id="FNPTR-7" href="f_0057.html#FOOTNOTE-7">[7]</a> Commands entered at the terminal would be sent to a mainframe computer for processing, and the output from each command would be printed. In those days, the connection between a terminal and a mainframe was slow, so much so that a quick typist could outpace the network, entering commands faster than they could be sent for processing. In this context, it was vital that <code class="cf1">ed</code> provide a terse syntax. Consider how <code class="cf1">p</code> prints the current line, while <code class="cf1">%p</code> prints the entire file.
      </p>
<p id="N12879" class="calibre4">
<code class="cf1">ed</code> went through several generations of improvements, including <code class="cf1">em</code> (dubbed the “editor for mortals”), <code class="cf1">en</code>, and eventually <code class="cf1">ex</code>.<a id="FNPTR-8" href="f_0057.html#FOOTNOTE-8">[8]</a> By this time, video displays were more common. <code class="cf1">ex</code> added a feature that turned the terminal screen into an interactive window that showed the contents of a file. Now it was possible to see changes as they were made in real time. The screen-editing mode was activated by entering the <code class="cf1">:visual</code> command, or just <code class="cf1">:vi</code> for short. And that is where the name <code class="cf1">vi</code> comes from.
      </p>
<p id="N128AA" class="calibre4">
        Vim stands for <span class="calibre5">vi improved</span>. That’s an understatement—I can’t stand to use regular <code class="cf1">vi</code>! Look up <strong xmlns:str="http://exslt.org/strings" class="calibre10">vi-differences</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/vi_diff.html#vi-differences">
<img alt="info" src="images/information.png" class="calibre21"/>​</a> for a list of Vim features that are unavailable in <code class="cf1">vi</code>. Vim’s enhancements are essential, but it still owes much to its heritage. The constraints that guided the design of Vim’s ancestors have endowed us with a highly efficient command set that’s still valuable today.
      </p>
</div>
</div>
<h3 class="calibre22">Special Keys in Vim’s Command-Line Mode</h3>
<p id="N128BE" class="calibre4">
        Command-Line mode is similar to Insert mode in that most of the buttons on the keyboard simply enter a character. In Insert mode, the text goes into a buffer, whereas in Command-Line mode the text appears at the prompt. In both of these modes, we can use control key chords to trigger commands.
      </p>
<p id="N128CB" class="calibre4">
        Some of these commands are shared between Insert mode and Command-Line mode. For example, <span class="calibre17">&lt;C-w&gt;</span> and <span class="calibre17">&lt;C-u&gt;</span> delete backward to the start of the previous word or to the start of the line, respectively. We can use <span class="calibre17">&lt;C-v&gt;</span> or <span class="calibre17">&lt;C-k&gt;</span> to insert characters that are not found on the keyboard. And we can insert the contents of any register at the command line using the <span class="calibre17">&lt;C-r&gt;{register}</span> command, just as we saw in <a xmlns:str="http://exslt.org/strings" href="f_0035.html#sec.paste.from.insert">Tip 15</a>. Some Command-Line mode mappings are not found in Insert mode. We’ll meet a few of these in <a xmlns:str="http://exslt.org/strings" href="f_0055.html#sec.ex.word.completion">Tip 33</a>.
      </p>
<p id="N1290D" class="calibre4">
        At the command-line prompt, we are limited in the range of motions that we can use. The <span class="calibre17">&lt;left&gt;</span> and <span class="calibre17">&lt;right&gt;</span> arrow keys move our cursor one character at a time in either direction. Compared to the rich set of motions that we’re used to using in Normal mode, this can feel quite limiting. But as we’ll see in <a xmlns:str="http://exslt.org/strings" href="f_0056.html#sec.command.history">Tip 34</a>, Vim’s command-line window provides all of the editing power that we could want for composing complex commands at the prompt.
      </p>
<h3 id="sec.ex.far.wide" class="calibre22">Ex Commands Strike Far and Wide</h3>
<p id="N12927" class="calibre4">
        It can sometimes be quicker to use an Ex command than to get the same job done with Vim’s Normal commands. For example, Normal commands tend to act on the current character or the current line, whereas an Ex command can be executed anywhere. This means that we can use Ex commands to make changes without having to move our cursor. But the greatest feature that distinguishes Ex commands is their ability to be executed across many lines at the same time.
      </p>
<p id="N12934" class="calibre4">
        As a general rule, we could say that Ex commands are long range and have the capacity to modify many lines in a single move. Or to condense that even further: Ex commands strike far and wide.
      </p>
<script src="scripts/book_local.js" type="text/javascript" class="calibre2"/>
</div>

{% endraw %}

