---
layout: page
title: "Practical Vim (for Kathryn Amaral)"
prev: f_0065.html
next: f_0067.html
book_path: books/drew-neil-practical-vim-edit-text-at-the-speed-of-thought-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>


<table class="arr-recipe" id="sec.edit.command">
<tr class="calibre14">
<td class="arr-recipe-number">Tip 41</td>
<td class="arr-recipe-name">Open a File by Its Filepath Using ‘:edit’</td>
</tr>
</table>
<p id="N1435C" class="calibre4">
<span class="calibre5">
        The <code class="cf">:edit</code> command allows us to open files from within Vim, either by specifying an absolute or a relative filepath. We’ll also learn how to specify a path relative to the active buffer.
    </span>
</p>
<p id="N14375" class="calibre4">
      As a demonstration, we’ll use the <code class="cf">files/mvc</code> directory, which you can find in the source files that come distributed with this book. It contains the following directory tree:
    </p>
<table class="processedcode" id="code.mvc.tree">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​app.js​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​index.html​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​app/​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​  controllers/​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​    Mailer.js​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​    Main.js​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​    Navigation.js​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​  models/​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​    User.js​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​  views/​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​    Home.js​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​    Main.js​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​    Settings.js​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​lib/​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​  framework.js​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​  theme.css​</code>​</div>
</td>
</tr>
</table>
<p id="N143B9" class="calibre4">
      In the shell, we’ll start by changing to the <code class="cf">files/mvc</code> directory and then launching Vim:
    </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">$ cd code/files/mvc</strong>​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">$ vim index.html</strong>​</code>​</div>
</td>
</tr>
</table>
<h3 class="calibre22">Open a File Relative to the Current Working Directory</h3>
<p id="N143D5" class="calibre4">
	  In Vim, just as in bash and other shells, we have the notion of a working directory. When Vim is launched, it adopts the same working directory that was active in the shell. We can confirm this by running the <code class="cf">:pwd</code> Ex command, which (just as in bash) stands for “print working directory”:
      </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">:pwd</strong>​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>&lt;= </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​/Users/drew/practical-vim/code/files/mvc​</code>​</div>
</td>
</tr>
</table>
<p id="N143FB" class="calibre4">
        The <code class="cf">:edit {file}</code> command can accept a filepath relative to the working directory. If we wanted to open the <code class="cf">lib/framework.js</code> file, we could do so by running this command:
      </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">:edit lib/framework.js</strong>​</code>​</div>
</td>
</tr>
</table>
<p id="N14411" class="calibre4">
        Or we could open the <code class="cf">app/controllers/Navigation.js</code> file by running this:
      </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">:edit app/controllers/Navigation.js</strong>​</code>​</div>
</td>
</tr>
</table>
<p id="N14424" class="calibre4">
        We can use the tab key to autocomplete these filepaths (see <a xmlns:str="http://exslt.org/strings" href="f_0054.html#sec.tab.complete">Tip 32</a>, for more details). So if we wanted to open the <code class="cf">Navigation.js</code> file, we could simply press <code class="cf">:edit a&lt;Tab&gt;c&lt;Tab&gt;N&lt;Tab&gt;</code>.
      </p>
<h3 id="sec.edit.active.directory" class="calibre22">Open a File Relative to the Active File Directory</h3>
<p id="N14445" class="calibre4">
	  Suppose that we’re editing the <code class="cf">app/controllers/Navigation.js</code> file, and we decide that we want to edit the <code class="cf">Main.js</code> file in the same directory. We could drill down to it from our working directory, but that feels like unnecessary work. The file we want to open is in the same directory as our active buffer. It would be ideal if we could use the context of the active buffer as a reference point.
	  

        Try this:
      </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">:edit %&lt;Tab&gt;</strong>​</code>​</div>
</td>
</tr>
</table>
<p id="N14477" class="calibre4">
        The <code class="cf">%</code> symbol is a shorthand for the filepath of the active buffer (see <strong xmlns:str="http://exslt.org/strings" class="calibre10">cmdline-special</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/cmdline.html#cmdline-special">
<img alt="info" src="images/information.png" class="calibre21"/>​</a>). Pressing the <span class="calibre17">&lt;Tab&gt;</span> key expands the filepath, revealing the absolute path of the active buffer. That’s not quite what we want, but it’s getting close. Now try this instead:
      </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">:edit %:h&lt;Tab&gt;</strong>​</code>​</div>
</td>
</tr>
</table>
<p id="N1449A" class="calibre4">
        The <code class="cf">:h</code> modifier removes the filename while preserving the rest of the path (see <strong xmlns:str="http://exslt.org/strings" class="calibre10">::h</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/cmdline.html#::h">
<img alt="info" src="images/information.png" class="calibre21"/>​</a>). In our case, typing <code class="cf">%:h</code>
<span class="calibre17">&lt;Tab&gt;</span> is expanded to the full path of the current file’s directory:
      </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">:edit app/controllers/</strong>​</code>​</div>
</td>
</tr>
</table>
<p id="N144B6" class="calibre4">
        From there, we can type <code class="cf">Main.js</code> (or have the tab key autocomplete it for us), and Vim will open the file. In total, we have to enter only the following keystrokes:
      </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">:edit %:h&lt;Tab&gt;M&lt;Tab&gt;</strong>​</code>​</div>
</td>
</tr>
</table>
<p id="N144CE" class="calibre4">
        The <code class="cf">%:h</code> expansion is so useful that you might want to consider creating a mapping for it. Check out <a xmlns:str="http://exslt.org/strings" href="#sidebar.active.file.expansion">​<em class="calibre5">Easy Expansion of the Active File Directory</em>​</a>, for a suggestion.
		</p>
<div class="sidebar" id="sidebar.active.file.expansion">
<div class="sidebar-title">Easy Expansion of the Active File Directory</div>
<div class="calibre1">
<p id="N144EB" class="calibre4">
        Try sourcing this line in your <code class="cf1">vimrc</code> file:
      </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix4" valign="top">
<span> </span>
</td>
<td class="codeline4" valign="top">
<div class="calibre38">
​<code class="calibre39">​cnoremap &lt;expr&gt; %%  getcmdtype() == ':' ? expand('%:h').'/' : '%%'​</code>​</div>
</td>
</tr>
</table>
<p id="N1450D" class="calibre4">
        Now when we type <span class="calibre17">%%</span> on Vim’s <code class="cf1">:</code> command-line prompt, it automatically expands to the path of the active buffer, just as though we had typed <code class="cf1">%:h</code>
<span class="calibre17">&lt;Tab&gt;</span>. Besides working nicely with <code class="cf1">:edit</code>, this can come in handy with other Ex commands such as <code class="cf1">:write</code>, <code class="cf1">:saveas</code>, and <code class="cf1">:read</code>.
      </p>
<p id="N14527" class="calibre4">
        For more ideas on how to use this mapping, see the Vimcasts episode on the <code class="cf1">:edit</code> command.<a id="FNPTR-12" href="f_0070.html#FOOTNOTE-12">[12]</a>
</p>
</div>
</div>
<script src="scripts/book_local.js" type="text/javascript" class="calibre2"/>
</div>

{% endraw %}

