---
layout: page
title: "Practical Vim (for Kathryn Amaral)"
prev: f_0029.html
next: f_0031.html
book_path: books/drew-neil-practical-vim-edit-text-at-the-speed-of-thought-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>


<table class="arr-recipe" id="sec.repeat.versus.count">
<tr class="calibre14">
<td class="arr-recipe-number">Tip 11</td>
<td class="arr-recipe-name">Don’t Count If You Can Repeat</td>
</tr>
</table>
<p id="N1153D" class="calibre4">
<span class="calibre5">
        We can minimize the keystrokes required to perform certain tasks by providing a count, but that doesn’t mean that we should. Consider the pros and cons of counting versus repeating.
    </span>
</p>
<p id="N11553" class="calibre4">
      Suppose that we had the following text in our buffer:
    </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​Delete <span class="shade-fg-white">m</span>ore than one word​</code>​</div>
</td>
</tr>
</table>
<p id="N11566" class="calibre4">
      We want to do as the text says, changing it to read “Delete one word” instead. That is to say, we’re going to delete two words.
    </p>
<p id="N11569" class="calibre4">
      We can approach this in a handful of ways. Both <span class="calibre17">d2w</span> and <span class="calibre17">2dw</span> will work. With <span class="calibre17">d2w</span>, we invoke the delete command and then give <span class="calibre17">2w</span> as the motion. We could read that as “delete two words.” However, <span class="calibre17">2dw</span> turns things around. This time the count applies to the delete command, but the motion acts over a single word. We could read this as “delete a word two times.” Putting semantics aside, we get the same result either way.
    </p>
<p id="N1157B" class="calibre4">
      Now let’s consider an alternative: <span class="calibre17">dw.</span>. This we can read as “Delete a word and then repeat.”
    </p>
<p id="N11581" class="calibre4">
      To recap, our options are as follows: <span class="calibre17">d2w</span>, <span class="calibre17">2dw</span>, or <span class="calibre17">dw.</span>—three keystrokes each. But which is best?
    </p>
<p id="N1158D" class="calibre4">
      For our discussion, <span class="calibre17">d2w</span> and <span class="calibre17">2dw</span> are identical. After running either of these, we can press the <span class="calibre17">u</span> key to undo, and the two words that were deleted will appear again. Or, instead of undoing our change, we could repeat it with the dot command, which would delete the next two words.
    </p>
<p id="N11599" class="calibre4">
      In the case of <span class="calibre17">dw.</span>, the result of pressing <span class="calibre17">u</span> or <span class="calibre17">.</span> is subtly different. Here, the change was <span class="calibre17">dw</span>—“delete word.” So if we wanted to restore the two words that were deleted, we’d have to undo twice: pressing <span class="calibre17">uu</span> (or <span class="calibre17">2u</span> if you prefer). Pressing the dot command would just delete the next word rather than the next two.
    </p>
<p id="N115AE" class="calibre4">
      Now suppose that instead of deleting two words, our original intent was to delete three words. By a small error in judgment, we run <span class="calibre17">d2w</span> instead of <span class="calibre17">d3w</span>. What next? We can’t use the dot command, because that would cause a total of four words to be deleted. So we could either back up and revise our count (<span class="calibre17">ud3w</span>) or continue by deleting the next word (<span class="calibre17">dw</span>).
    </p>
<p id="N115BD" class="calibre4">
      If, on the other hand, we had used the command <span class="calibre17">dw.</span> in the first place, we would have to repeat the dot command only one more time. Because our original change was simply <span class="calibre17">dw</span>, the <span class="calibre17">u</span> and <span class="calibre17">.</span> commands have more granularity. Each acts upon one word at a time.
    </p>
<p id="N115CC" class="calibre4">
      Now suppose that we want to delete seven words. We could either run <span class="calibre17">d7w</span>, or <span class="calibre17">dw......</span> (that is, <span class="calibre17">dw</span> followed by the dot command six times). Counting keystrokes, we have a clear winner. But would you trust yourself to make the right count?
    </p>
<p id="N115D8" class="calibre4">
      Counting is tedious. I’d rather hit the dot command six times than spend the same time looking ahead in order to reduce the number of keys that I have to press. What if I hit the dot command one too many times? No matter, I just back up by hitting the <span class="calibre17">u</span> key once.
    </p>
<p id="N115DE" class="calibre4">
      Remember our mantra (from <a xmlns:str="http://exslt.org/strings" href="f_0021.html#sec.act.repeat.reverse">Tip 4</a>): act, repeat, reverse. Here it is in action.
    </p>
<h3 class="calibre22">Use a Count When It Matters</h3>
<p id="N115E9" class="calibre4">
        Suppose that we wanted to change the text “I have a couple of questions” to instead read “I have <span class="calibre5">some more</span> questions.” We could do so as follows:
      </p>
<table class="simpletable">
<thead class="calibre23">
<tr class="calibre7">
<th class="hlines">Keystrokes</th>
<th class="hlines">Buffer Contents</th>
</tr>
</thead>
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre24">
<p class="last-para-in-cell">
<code class="cf">{start}</code>
</p>
</td>
<td class="calibre24">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​I have <span class="shade-fg-white">a</span> couple of questions.​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">c3w</span>
<code class="cf">some more&lt;Esc&gt;</code>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​I have some mor<span class="shade-fg-white">e</span> questions.​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
<p id="N1162A" class="calibre4">
        In this scenario, it doesn’t make much sense to use the dot command. We could delete one word and then another (with the dot command), but then we’d have to switch gears and change to Insert mode (using <span class="calibre17">i</span> or <span class="calibre17">cw</span>, for example). To me, that feels awkward enough that I’d rather go ahead and use a count.
      </p>
<p id="N11633" class="calibre4">
        There’s another advantage to using a count: it gives us a clean and coherent undo history. Having made this change, we could undo it with a single press of the <span class="calibre17">u</span> key, which ties in with the discussion in <a xmlns:str="http://exslt.org/strings" href="f_0027.html#sec.undo.chunk">Tip 8</a>.
      </p>
<p id="N11642" class="calibre4">
        That same argument also goes in favor of counting (<span class="calibre17">d5w</span>) over repeating (<span class="calibre17">dw....</span>), so my preferences may seem inconsistent here. You’ll develop your own opinion on this, depending on how much you value keeping your undo history clean and whether or not you find it tiresome to use counts.
		</p>
<script src="scripts/book_local.js" type="text/javascript" class="calibre2"/>
</div>

{% endraw %}

