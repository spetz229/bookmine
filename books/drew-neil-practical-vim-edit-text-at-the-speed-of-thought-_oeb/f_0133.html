---
layout: page
title: "Practical Vim (for Kathryn Amaral)"
prev: f_0132.html
next: f_0134.html
book_path: books/drew-neil-practical-vim-edit-text-at-the-speed-of-thought-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>


<table class="arr-recipe" id="N1A210">
<tr class="calibre14">
<td class="arr-recipe-number">Tip 97</td>
<td class="arr-recipe-name">Meet the Global Command</td>
</tr>
</table>
<p id="N1A216" class="calibre4">
<span class="calibre5">
        The <code class="cf">:global</code> command allows us to run an Ex command on each line that matches a particular pattern. Let’s start by studying its syntax.
    </span>
</p>
<p id="N1A225" class="calibre4">
      The <code class="cf">:global</code> command takes the following form (see <strong xmlns:str="http://exslt.org/strings" class="calibre10">:g</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/repeat.html#:g">
<img alt="info" src="images/information.png" class="calibre21"/>​</a>):
    </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​:[range] global[!] /{pattern}/ [cmd]​</code>​</div>
</td>
</tr>
</table>
<p id="N1A23A" class="calibre4">
      The default range for the <code class="cf">:global</code> command is the entire file (<code class="cf">%</code>). That sets it apart from most other Ex commands, including <code class="cf">:delete</code>, <code class="cf">:substitute</code>, and <code class="cf">:normal</code>, whose range is the current line (<code class="cf">.</code>) by default.
    </p>
<p id="N1A24F" class="calibre4">
      The <code class="cf">{pattern}</code> field integrates with search history. That means we can leave it blank and Vim will automatically use the current search pattern.
    </p>
<p id="N1A255" class="calibre4">
      The <code class="cf">[cmd]</code> could be any Ex command except for another <code class="cf">:global</code> command. In practice, Ex commands that interact with the text in the document prove most useful, such as those in <a xmlns:str="http://exslt.org/strings" href="f_0049.html#table.ex.ed.commands">Table 9, ​<em class="calibre5">Ex Commands That Operate on the Text in a Buffer</em>​</a>. If we don’t specify a <code class="cf">[cmd]</code>, then Vim will use <code class="cf">:print</code> by default.
    </p>
<p id="N1A268" class="calibre4">
      We can invert the behavior of the <code class="cf">:global</code> command either by running <code class="cf">:global!</code> or <code class="cf">:vglobal</code> (mnemonic: in<span class="calibre5">vert</span>). Each of these tells Vim to execute <code class="cf">[cmd]</code> on each line that <span class="calibre5">doesn’t</span> match the specified pattern. In the next tip, we’ll see examples of both <code class="cf">:global</code> and <code class="cf">:vglobal</code> in action.
    </p>
<p id="N1A28F" class="calibre4">
      The <code class="cf">:global</code> command works by making two passes through the lines specified by <code class="cf">[range]</code>. In the first pass, Vim marks each line that matches the specified <code class="cf">{pattern}</code>. Then on the second pass, the <code class="cf">[cmd]</code> is executed for each marked line. The <code class="cf">[cmd]</code> can accept a range of its own, which allows us to operate on multiline regions. This powerful technique is demonstrated by <a xmlns:str="http://exslt.org/strings" href="f_0136.html#sec.alphabetize.css">Tip 100</a>.
	  </p>
<div class="sidebar">
<div class="sidebar-title">On the Etymology of Grep</div>
<div class="calibre1">
<p id="N1A2AC" class="calibre4">
      Consider this abbreviated form of the <code class="cf1">:global</code> command:
    </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix4" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline4" valign="top">
<div class="calibre38">
​<code class="calibre39">​<strong class="prompt">:g/re/p</strong>​</code>​</div>
</td>
</tr>
</table>
<p id="N1A2C4" class="calibre4">
<code class="cf1">re</code> stands for regular expression, and <code class="cf1">p</code> is short for <code class="cf1">:print</code>, which is the default <code class="cf1">[cmd]</code>. If we ignore the <code class="cf1">/</code> symbols, we find the word “grep.”
    </p>
</div>
</div>
<script src="scripts/book_local.js" type="text/javascript" class="calibre2"/>
</div>

{% endraw %}

