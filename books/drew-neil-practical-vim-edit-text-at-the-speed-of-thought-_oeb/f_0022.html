---
layout: page
title: "Practical Vim (for Kathryn Amaral)"
prev: f_0021.html
next: f_0023.html
book_path: books/drew-neil-practical-vim-edit-text-at-the-speed-of-thought-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>


<table class="arr-recipe" id="sec.cw.ndot">
<tr class="calibre14">
<td class="arr-recipe-number">Tip 5</td>
<td class="arr-recipe-name">Find and Replace by Hand</td>
</tr>
</table>
<p id="N10F1F" class="calibre4">
<span class="calibre5">
        Vim has a <code class="cf">:substitute</code> command for find-and-replace tasks, but with this alternative technique, we’ll change the first occurrence by hand and then find and replace every other match one by one. The dot command will save us from labor, but we’ll meet another nifty one-key command that makes jumping between matches a snap.
    </span>
</p>
<p id="N10F32" class="calibre4">
      In this excerpt, the word “content” appears on every line:
    </p>
<table class="processedcode">
<tr class="calibre28">
<td colspan="2" class="calibre33">
<a href="http://media.pragprog.com/titles/dnvim/code/the_vim_way/1_copy_content.txt">the_vim_way/1_copy_content.txt</a>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​...We're waiting for content before the site can go live...​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​...If you are content with this, let's go ahead with it...​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​...We'll launch as soon as we have the content...​</code>​</div>
</td>
</tr>
</table>
<p id="N10F48" class="calibre4">
      Suppose that we want to use the word “copy” (as in “copywriting”) instead of “content.” Easy enough, you might think; we can just use the substitute command, like this:
    </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">:%s/content/copy/g</strong>​</code>​</div>
</td>
</tr>
</table>
<p id="N10F58" class="calibre4">
      But wait a minute! If we run this command, then we’re going to create the phrase “If you are ‘copy’ with this,” which is nonsense!
    </p>
<p id="N10F5B" class="calibre4">
      We’ve run into this problem because the word “content” has two meanings. One is synonymous with “copy” (and pronounced <span class="calibre5">con</span>tent), the other with “happy” (pronounced con<span class="calibre5">tent</span>). Technically, we’re dealing with heteronyms (words that are spelled the same but differ in both meaning and pronunciation), but that doesn’t really matter. The point is, we have to watch our step.
    </p>
<p id="N10F64" class="calibre4">
      We can’t just blindly replace every occurrence of “content” with “copy.” We have to eyeball each one and answer “yay” or “nay” to the question, should this occurrence be changed? The substitute command is up to the task, and we’ll find out how in <a xmlns:str="http://exslt.org/strings" href="f_0124.html#sec.substitute.confirm">Tip 89</a>. But right now, we’ll explore an alternative solution that fits with the theme of this chapter.
    </p>
<h3 class="calibre22">Be Lazy: Search Without Typing</h3>
<p id="N10F70" class="calibre4">
		You might have guessed by now that the dot command is my favorite single-key Vim trigger. In second place is the <span class="calibre17">*</span> command. This executes a search for the word under the cursor at that moment (see <strong xmlns:str="http://exslt.org/strings" class="calibre10">*</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/pattern.html#star">
<img alt="info" src="images/information.png" class="calibre21"/>​</a>).
      </p>
<p id="N10F7F" class="calibre4">
        We could search for the word “content” by pulling up the search prompt and spelling out the word in full:
      </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">/content</strong>​</code>​</div>
</td>
</tr>
</table>
<p id="N10F8F" class="calibre4">
        Or we could simply place our cursor on the word and hit the <span class="calibre17">*</span> key. Consider the following workflow:
      </p>
<table class="simpletable">
<thead class="calibre23">
<tr class="calibre7">
<th class="hlines">Keystrokes</th>
<th class="hlines">Buffer Contents</th>
</tr>
</thead>
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre24">
<p class="last-para-in-cell">
<code class="cf">{start}</code>
</p>
</td>
<td class="calibre24">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​...We're waiting for content before the site can go live...​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​...If you are <span class="shade-fg-white">c</span>ontent with this, let's go ahead with it...​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​...We'll launch as soon as we have the content...​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">*</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​...We're waiting for <span class="shade-fg-black">content</span> before the site can go live...​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​...If you are <span class="shade-fg-black">content</span> with this, let's go ahead with it...​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​...We'll launch as soon as we have the <span class="shade-fg-black">
<span class="shade-fg-white">c</span>ontent</span>...​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">cw</span>
<code class="cf">copy&lt;Esc&gt;</code>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​...We're waiting for <span class="shade-fg-black">content</span> before the site can go live...​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​...If you are <span class="shade-fg-black">content</span> with this, let's go ahead with it...​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​...We'll launch as soon as we have the cop<span class="shade-fg-white">y</span>...​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">n</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​...We're waiting for <span class="shade-fg-black">
<span class="shade-fg-white">c</span>ontent</span> before the site can go live...​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​...If you are <span class="shade-fg-black">content</span> with this, let's go ahead with it...​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​...We'll launch as soon as we have the copy...​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">.</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​...We're waiting for cop<span class="shade-fg-white">y</span> before the site can go live...​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​...If you are <span class="shade-fg-black">content</span> with this, let's go ahead with it...​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​...We'll launch as soon as we have the copy...​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
<p id="N11059" class="calibre4">
        We begin with our cursor positioned on the word “content” and then use the <span class="calibre17">*</span> command to search for it. Try it for yourself. Two things should happen: the cursor will jump forward to the next match, and all occurrences will be highlighted. If you don’t see any highlighting, try running <code class="cf">:set hls</code> and then refer to <a xmlns:str="http://exslt.org/strings" href="f_0114.html#sec.hlsearch">Tip 80</a>, for more details.
      </p>
<p id="N11066" class="calibre4">
        Having executed a search for the word “content,” we can now advance to the next occurrence just by hitting the <span class="calibre17">n</span> key. In this case, pressing <span class="calibre17">*nn</span> would cycle through all matches, taking us back to where we started.
      </p>
<h3 class="calibre22">Make the Change Repeatable</h3>
<p id="N11073" class="calibre4">
		With our cursor positioned at the start of the word “content,” we are poised to change it. This involves two steps: deleting the word “content” and then typing its replacement. The <span class="calibre17">cw</span> command deletes to the end of the word and then drops us into Insert mode, where we can spell out the word “copy.” Vim records our keystrokes until we leave Insert mode, so the full sequence <span class="calibre17">cw</span>
<code class="cf">copy&lt;Esc&gt;</code> is considered to be a single change. Pressing the <span class="calibre17">.</span> command deletes to the end of the current word and changes it to “copy.”
      </p>
<h3 class="calibre22">All Together Now</h3>
<p id="N110A5" class="calibre4">
        We’re all set! Each time we press the <span class="calibre17">n</span> key, our cursor advances to the next occurrence of the word “content.” And when we press the <span class="calibre17">.</span> key, it changes the word under the cursor to “copy.”
      </p>
<p id="N110AE" class="calibre4">
        If we wanted to replace all occurrences, we could blindly hammer out <span class="calibre17">n.n.n.</span> as many times as it took to complete all the changes (although in that case, we might as well have used the <code class="cf">:%s/content/copy/g</code> command). But we need to watch out for false matches. So after pressing <span class="calibre17">n</span>, we can examine the current match and decide if it should be changed to “copy.” If so, we trigger the <span class="calibre17">.</span> command. If not, we don’t. Whatever our decision, we can then move on to the next occurrence by pressing <span class="calibre17">n</span> again. Rinse and repeat until done.
		</p>
<script src="scripts/book_local.js" type="text/javascript" class="calibre2"/>
</div>

{% endraw %}

