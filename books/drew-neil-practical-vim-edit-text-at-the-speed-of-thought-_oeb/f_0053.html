---
layout: page
title: "Practical Vim (for Kathryn Amaral)"
prev: f_0052.html
next: f_0054.html
book_path: books/drew-neil-practical-vim-edit-text-at-the-speed-of-thought-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>


<table class="arr-recipe" id="sec.ex.repeat">
<tr class="calibre14">
<td class="arr-recipe-number">Tip 31</td>
<td class="arr-recipe-name">Repeat the Last Ex Command</td>
</tr>
</table>
<p id="N1309C" class="calibre4">
<span class="calibre5">
        While the <span class="calibre17">.</span> command can be used to repeat our most recent Normal mode command, we have to use <span class="calibre17">@:</span> instead if we want to repeat the last Ex command. Knowing how to reverse the last command is always useful, so we’ll consider that, too, in our discussion.
    </span>
</p>
<p id="N130C0" class="calibre4">
      In <a xmlns:str="http://exslt.org/strings" href="f_0017.html#chp.the.vim.way">Chapter 1, ​<em class="calibre5">The Vim Way</em>​</a>, we saw how the <span class="calibre17">.</span> command can be used to repeat the last change. But the dot command won’t replay changes made from Vim’s command line. Instead, we can repeat the last Ex command by pressing <span class="calibre17">@:</span> (see <strong xmlns:str="http://exslt.org/strings" class="calibre10">@:</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/repeat.html#@:">
<img alt="info" src="images/information.png" class="calibre21"/>​</a>).
    </p>
<p id="N130D1" class="calibre4">
      For example, this command can be useful when iterating through items in the buffer list. We can step forward through the list with the <code class="cf">:bn[ext]</code> command and backward with the <code class="cf">:bp[revious]</code> command (<a xmlns:str="http://exslt.org/strings" href="f_0060.html#sec.buffer.list">Tip 36</a>, discusses the buffer list in more detail). Suppose that we had a dozen or so items in the buffer list, and we wanted to take a look at each one of them. We could type this command once:
    </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">:bnext</strong>​</code>​</div>
</td>
</tr>
</table>
<p id="N130F7" class="calibre4">
     Then we use <span class="calibre17">@:</span> to repeat the command. Note the similarity between this and the method for executing a macro (<a xmlns:str="http://exslt.org/strings" href="f_0095.html#sec.macro.playback">​<em class="calibre5">Play Back a Sequence of Commands by Executing a Macro</em>​</a>). Also note that the <code class="cf">:</code> register always holds the most recently executed command line (see <strong xmlns:str="http://exslt.org/strings" class="calibre10">quote_:</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/change.html#quote_:">
<img alt="info" src="images/information.png" class="calibre21"/>​</a>). After running <span class="calibre17">@:</span> for the first time, we can subsequently repeat it with the <span class="calibre17">@@</span> command.
</p>
<p id="N1311C" class="calibre4">
      Suppose that we got trigger-happy and fired the <span class="calibre17">@:</span> command too many times, overshooting our mark. How would we change direction then? We could execute the <code class="cf">:bprevious</code> command. But think about what would happen if we were to use the <span class="calibre17">@:</span> command again. It would go backward through the buffer list, which is the exact opposite of what it did before. That could be confusing.
    </p>
<p id="N1312D" class="calibre4">
      In this case, a better option would be to use the <span class="calibre17">&lt;C-o&gt;</span> command (see <a xmlns:str="http://exslt.org/strings" href="f_0083.html#sec.jump.list">Tip 55</a>). Each time we run <code class="cf">:bnext</code> (or repeat it with the <span class="calibre17">@:</span> command), it adds a record to the jump list. The <span class="calibre17">&lt;C-o&gt;</span> command goes back to the previous record in the jump list.
    </p>
<p id="N1314A" class="calibre4">
      We could run <code class="cf">:bnext</code> once and then repeat it as often as we like using the <span class="calibre17">@:</span> command. If we needed to back up, we could do so using the <span class="calibre17">&lt;C-o&gt;</span> command. Then, if we wanted to continue going forward through the buffer list, we could go back to using the <span class="calibre17">@:</span> command. Remember our mantra from <a xmlns:str="http://exslt.org/strings" href="f_0021.html#sec.act.repeat.reverse">Tip 4</a>: act, repeat, reverse.
    </p>
<p id="N1315D" class="calibre4">
      Vim provides an Ex command for just about everything. While it’s always possible to <span class="calibre5">repeat</span> the last Ex command by pressing <span class="calibre17">@:</span>, it’s not always straightforward to <span class="calibre5">reverse</span> the effects. The <span class="calibre17">&lt;C-o&gt;</span> trick covered in this tip also works for reversing the effects of <code class="cf">:next</code>, <code class="cf">:cnext</code>, and <code class="cf">:tnext</code> commands (and so on). Whereas, for each of the items in <a xmlns:str="http://exslt.org/strings" href="f_0049.html#table.ex.ed.commands">Table 9, ​<em class="calibre5">Ex Commands That Operate on the Text in a Buffer</em>​</a>, we could undo their effects by pressing <span class="calibre17">u</span>.
	  </p>
<script src="scripts/book_local.js" type="text/javascript" class="calibre2"/>
</div>

{% endraw %}

