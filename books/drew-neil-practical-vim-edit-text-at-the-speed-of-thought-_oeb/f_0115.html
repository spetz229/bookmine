---
layout: page
title: "Practical Vim (for Kathryn Amaral)"
prev: f_0114.html
next: f_0116.html
book_path: books/drew-neil-practical-vim-edit-text-at-the-speed-of-thought-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>


<table class="arr-recipe" id="sec.incsearch">
<tr class="calibre14">
<td class="arr-recipe-number">Tip 81</td>
<td class="arr-recipe-name">Preview the First Match Before Execution</td>
</tr>
</table>
<p id="N18C91" class="calibre4">
<span class="calibre5">
        Vim’s search command is much more useful when the incremental search feature is enabled. Here are a couple of ways that this option can improve your workflow.
    </span>
</p>
<p id="N18CA1" class="calibre4">
      By default, Vim sits idle as we prepare our search pattern, only springing into action when we press <span class="calibre17">&lt;CR&gt;</span>. My favorite enhancement is enabled with the <code class="cf">‘incsearch’</code> setting (see <strong xmlns:str="http://exslt.org/strings" class="calibre10">'incsearch'</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/options.html#'incsearch'">
<img alt="info" src="images/information.png" class="calibre21"/>​</a>). This tells Vim to show a preview of the first match based on what has been entered so far into the search field. Each time we enter another character, Vim instantly updates the preview. This table illustrates how it works:
    </p>
<table class="simpletable">
<thead class="calibre23">
<tr class="calibre7">
<th class="hlines">Keystrokes</th>
<th class="hlines">Buffer Contents</th>
</tr>
</thead>
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre24">{start}</td>
<td class="calibre24">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​<span class="shade-fg-white">T</span>he car was the color of a carrot.​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<code class="cf">/car</code>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​The <span class="shade-fg-black">car</span> was the color of a carrot.​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<code class="cf">/carr</code>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​The car was the color of a <span class="shade-fg-black">carr</span>ot.​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<code class="cf">/carr</code>
<span class="calibre17">&lt;CR&gt;</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​The car was the color of a <span class="shade-fg-black">
<span class="shade-fg-white">c</span>arr</span>ot.​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
<p id="N18D21" class="calibre4">
      After typing “car” into the search field, Vim highlights the first match, which in this case is the word “car” itself. As soon as we enter the next “r” character, our preview ceases to match, and Vim skips forward to the next matching word. This time, it’s “carrot.” If we were to press the <span class="calibre17">&lt;Esc&gt;</span> key at this point, the search prompt would be dismissed and our cursor restored to its original position at the start of the line. But instead, we press <span class="calibre17">&lt;CR&gt;</span> to execute the command, causing our cursor to jump to the start of the word “carrot.”
    </p>
<p id="N18D2A" class="calibre4">
      This instant feedback lets us know when we’ve hit our target. If our intention was simply to move the cursor to the start of the word “carrot,” then there’s no need to type the full word into the search field. In this case, <code class="cf">/carr</code>
<span class="calibre17">&lt;CR&gt;</span> is enough. Without the <code class="cf">‘incsearch’</code> feature enabled, we wouldn’t know whether or not our pattern would hit the target until we executed the search.
    </p>
<h3 class="calibre22">Check for the Existence of a Match</h3>
<p id="N18D39" class="calibre4">
        In our example, we have two partial matches for “car” on the same line. But imagine if the words “car” and “carrot” were separated by several hundred words. When we updated our search field from “car” to “carr,” Vim would have to scroll the document to bring the word “carrot” into view. And that is exactly what happens.
      </p>
<p id="N18D3C" class="calibre4">
        Suppose that we just want to check if the word “carrot” is present in the current document without moving our cursor. With the <code class="cf">‘incsearch’</code> option enabled, we would simply have to dial up the search prompt and then type as many characters of the word “carrot” as it takes to bring the first occurrence of the word into view. If the word is found, we can just press <span class="calibre17">&lt;Esc&gt;</span>, and we’ll end up right back where we started. No need to interrupt our train of thought.
      </p>
<h3 class="calibre22">Autocomplete the Search Field Based on Preview Match</h3>
<p id="N18D4F" class="calibre4">
        In that last example, we executed the search command before completing the word “carrot.” That’s good enough if our intention was simply to move our cursor to the first match. But suppose that we needed our pattern to match the entire word “carrot”: for example, if we were planning to follow the search command with a substitute command.
      </p>
<p id="N18D5C" class="calibre4">
        Of course, we could simply type out the “carrot” in full. But here’s a handy shortcut: <span class="calibre17">&lt;C-r&gt;&lt;C-w&gt;</span>. This autocompletes the search field using the remainder of the current preview match. If we used this command after entering “carr” into the search field, it would append “ot,” causing the match to encompass the entire word “carrot.”
      </p>
<p id="N18D62" class="calibre4">
        Note that the <span class="calibre17">&lt;C-r&gt;&lt;C-w&gt;</span> autocompletion is slightly brittle in this context. If you prefix your search with the <code class="cf">\v</code> item, then <span class="calibre17">&lt;C-r&gt;&lt;C-w&gt;</span> will complete the entire word under the cursor (creating <code class="cf">/\vcarrcarrot</code>
<span class="calibre17">&lt;CR&gt;</span>, for example) instead of the remainder of the word. As long as you are searching for words and not patterns, the autocomplete feature of incremental search can be a nice little time-saver.
      </p>
<script src="scripts/book_local.js" type="text/javascript" class="calibre2"/>
</div>

{% endraw %}

