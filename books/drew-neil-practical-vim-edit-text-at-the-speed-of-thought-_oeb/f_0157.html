---
layout: page
title: "Practical Vim (for Kathryn Amaral)"
prev: f_0156.html
next: f_0158.html
book_path: books/drew-neil-practical-vim-edit-text-at-the-speed-of-thought-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>


<table class="arr-recipe" id="N1BDC5">
<tr class="calibre14">
<td class="arr-recipe-number">Tip 116</td>
<td class="arr-recipe-name">Autocomplete Filenames</td>
</tr>
</table>
<p id="N1BDCB" class="calibre4">
<span class="calibre5">
        When we work at the command line, we can hit the <span class="calibre17">&lt;Tab&gt;</span> key to autocomplete paths for directories and files. With filename autocompletion, we can do the same from within Vim.
    </span>
      Filename autocompletion is triggered by the <span class="calibre17">&lt;C-x&gt;&lt;C-f&gt;</span> command (see <strong xmlns:str="http://exslt.org/strings" class="calibre10">compl-filename</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/insert.html#compl-filename">
<img alt="info" src="images/information.png" class="calibre21"/>​</a>).
    </p>
<p id="N1BDE6" class="calibre4">
      Vim always maintains a reference to the <span class="calibre5">current working directory</span>, just like the shell. We can find out what this is at any given time by running the <code class="cf">:pwd</code> command (<span class="calibre5">print working directory</span>), and we can change our working directory at any time using the <code class="cf">:cd {path}</code> command (<span class="calibre5">change directory</span>). It’s important to understand that Vim’s filename autocompletion always expands paths relative to the working directory, not relative to the file that is currently being edited.
    </p>
<p id="N1BE0C" class="calibre4">
      Suppose that we were working on a small web application comprised of the following files:
    </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​webapp/​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​  config.ru​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​  public/​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​    index.html​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​    js/​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​      application.js​</code>​</div>
</td>
</tr>
</table>
<p id="N1BE29" class="calibre4">
      Now let’s say that we were editing the <code class="cf">index.html</code> file:
    </p>
<table class="processedcode">
<tr class="calibre28">
<td colspan="2" class="calibre33">
<a href="http://media.pragprog.com/titles/dnvim/code/auto_complete/webapp/public/index.html">auto_complete/webapp/public/index.html</a>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​&lt;!DOCTYPE html&gt;​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">&lt;html&gt;</strong>​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​  <strong class="prompt">&lt;head&gt;</strong>​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​    <strong class="prompt">&lt;title&gt;</strong>Practical Vim - the app<strong class="prompt">&lt;/title&gt;</strong>​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​    <strong class="prompt">&lt;script</strong> src=<em class="string">""</em> type=<em class="string">"text/javascript"</em>
<strong class="prompt">&gt;</strong>
<strong class="prompt">&lt;/script&gt;</strong>​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​  <strong class="prompt">&lt;/head&gt;</strong>​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​  <strong class="prompt">&lt;body&gt;</strong>
<strong class="prompt">&lt;/body&gt;</strong>​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">&lt;/html&gt;</strong>​</code>​</div>
</td>
</tr>
</table>
<p id="N1BE6C" class="calibre4">
      We want to fill out the <code class="cf">src=""</code> attribute to refer to the <span class="calibre17">application.js</span> file. But there’s a complication if we want to use filename autocompletion:
    </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">:pwd</strong>​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>&lt;= </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​webapp​</code>​</div>
</td>
</tr>
</table>
<p id="N1BE86" class="calibre4">
      If we were to invoke filename autocompletion now, it would complete the path relative to the <code class="cf">webapp</code> directory, giving us <code class="cf">src="public/js/application.js"</code>. But we actually want it to reference <code class="cf">src="js/application.js"</code>. If we want to use filename autocompletion, we’ll first have to change to the <code class="cf">public</code> directory:
    </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">:cd public</strong>​</code>​</div>
</td>
</tr>
</table>
<p id="N1BEA2" class="calibre4">
      Now we can invoke filename autocompletion, and it will work relative to the <code class="cf">webapp/public</code> directory:
    </p>
<table class="simpletable">
<thead class="calibre23">
<tr class="calibre7">
<th class="hlines">Keystrokes</th>
<th class="hlines">Buffer Contents</th>
</tr>
</thead>
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre24">
<p class="last-para-in-cell">
<span class="calibre17">i</span>
</p>
</td>
<td class="calibre24">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​&lt;script src="<span class="shade-fg-white">"</span>/&gt;​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<code class="cf">js/ap</code>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​&lt;script src="js/ap<span class="shade-fg-white">"</span>/&gt;​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">&lt;C-x&gt;&lt;C-f&gt;</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​&lt;script src="js/application.js<span class="shade-fg-white">"</span>/&gt;​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
<p id="N1BEF6" class="calibre4">
      Having inserted the filepath, we can revert back to our original working directory:
    </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">:cd -</strong>​</code>​</div>
</td>
</tr>
</table>
<p id="N1BF06" class="calibre4">
      Just like in the shell, <code class="cf">cd -</code> switches to the previous working directory (see <strong xmlns:str="http://exslt.org/strings" class="calibre10">:cd-</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/editing.html#:cd-">
<img alt="info" src="images/information.png" class="calibre21"/>​</a>).
    </p>
<p id="N1BF10" class="calibre4">
      In the documentation for filename autocompletion, it states that “the <code class="cf">‘path’</code> option is not used (yet).” Perhaps in future versions of Vim it won’t be necessary to change directories to use this feature for our hypothetical web app scenario.
	  </p>
<script src="scripts/book_local.js" type="text/javascript" class="calibre2"/>
</div>

{% endraw %}

