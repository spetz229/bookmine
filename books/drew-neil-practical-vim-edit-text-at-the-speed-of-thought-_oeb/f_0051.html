---
layout: page
title: "Practical Vim (for Kathryn Amaral)"
prev: f_0050.html
next: f_0052.html
book_path: books/drew-neil-practical-vim-edit-text-at-the-speed-of-thought-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>


<table class="arr-recipe" id="sec.ex.copy.move">
<tr class="calibre14">
<td class="arr-recipe-number">Tip 29</td>
<td class="arr-recipe-name">Duplicate or Move Lines Using ‘:t’ and ‘:m’ Commands</td>
</tr>
</table>
<p id="N12CA6" class="calibre4">
<span class="calibre5">
        The <code class="cf">:copy</code> command (and its shorthand <code class="cf">:t</code>) lets us duplicate one or more lines from one part of the document to another, while the <code class="cf">:move</code> command lets us place them somewhere else in the document.
      </span>
</p>
<p id="N12CD1" class="calibre4">
      For demonstration purposes, we’ll use this shopping list:
    </p>
<table class="processedcode">
<tr class="calibre28">
<td colspan="2" class="calibre33">
<a href="http://media.pragprog.com/titles/dnvim/code/ex_mode/shopping-list.todo">ex_mode/shopping-list.todo</a>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>Line 1 </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​Shopping list​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>2 </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​    Hardware Store​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>3 </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​        Buy new hammer​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>4 </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​    Beauty Parlor​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>5 </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​        Buy nail polish remover​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>6 </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​        Buy nails​</code>​</div>
</td>
</tr>
</table>
<h3 id="sec.ex.copy" class="calibre22">Duplicate Lines with the ‘:t’ Command</h3>
<p id="N12CFB" class="calibre4">
        Our shopping list is incomplete: we also need to buy nails at the hardware store. To fix the list, we’ll reuse the last line of the file, creating a copy of it below “Hardware Store.” We can easily do so using the <code class="cf">:copy</code> Ex command:
      </p>
<table class="simpletable">
<thead class="calibre23">
<tr class="calibre7">
<th class="hlines">Keystrokes</th>
<th class="hlines">Buffer Contents</th>
</tr>
</thead>
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre24">
<p class="last-para-in-cell">
<code class="cf">{start}</code>
</p>
</td>
<td class="calibre24">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​Shopping list​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​    <span class="shade-fg-white">H</span>ardware Store​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​        Buy new hammer​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​    Beauty Parlor​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​        Buy nail polish remover​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​        Buy nails​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<code class="cf">:6copy.</code>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​Shopping list​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​    Hardware Store​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​        <span class="shade-fg-white">B</span>uy nails​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​        Buy new hammer​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​    Beauty Parlor​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​        Buy nail polish remover​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​        Buy nails​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
<p id="N12D60" class="calibre4">
        The format of the copy command goes like this (see <strong xmlns:str="http://exslt.org/strings" class="calibre10">:copy</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/change.html#:copy">
<img alt="info" src="images/information.png" class="calibre21"/>​</a>):
      </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​:[range]copy {address}​</code>​</div>
</td>
</tr>
</table>
<p id="N12D72" class="calibre4">
        In our example, the <code class="cf">[range]</code> was line 6. For our <code class="cf">{address}</code>, we used the <code class="cf">.</code> symbol, which stands for the current line. So we can read the <code class="cf">:6copy.</code> command as “Make a copy of line 6 and put it below the current line.”
      </p>
<p id="N12D81" class="calibre4">
        We could shorten the <code class="cf">:copy</code> command to only two letters, as <code class="cf">:co</code>. Or we can be even more succinct by using the <code class="cf">:t</code> command, which is a synonym for <code class="cf">:copy</code>. As a mnemonic, you can think of it as <span class="calibre5">copy TO</span>. This table shows a few examples of the <code class="cf">:t</code> command in action:
      </p>
<table class="simpletable">
<thead class="calibre23">
<tr class="calibre7">
<th class="hlines">Command</th>
<th class="hlines">Effect</th>
</tr>
</thead>
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre24">
<p class="last-para-in-cell">
<code class="cf">:6t.</code>
</p>
</td>
<td class="calibre24">
<p class="last-para-in-cell">Copy line 6 to just below the current line</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<code class="cf">:t6</code>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">Copy the current line to just below line 6</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<code class="cf">:t.</code>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">Duplicate the current line (similar to Normal mode <span class="calibre17">yyp</span>)</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<code class="cf">:t$</code>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">Copy the current line to the end of the file</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<code class="cf">:’&lt;,’&gt;t0</code>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">Copy the visually selected lines to the start of the file</p>
</td>
</tr>
</tbody>
</table>
<p id="N12DD6" class="calibre4">
	  
        Note that <code class="cf">:t.</code> duplicates the current line. Alternatively, we could achieve the same effect using Normal mode yank and put commands (<span class="calibre17">yyp</span>). The one notable difference between these two techniques for duplicating the current line is that <span class="calibre17">yyp</span> uses a register, whereas <code class="cf">:t.</code> doesn’t. I’ll sometimes use <code class="cf">:t.</code> to duplicate a line when I don’t want to overwrite the current value in the default register.
      </p>
<p id="N12DF3" class="calibre4">
        In this example, we could have used a variant of <span class="calibre17">yyp</span> to duplicate the line we wanted, but it would require some extra moving around. We would have to jump to the line we wanted to copy (<span class="calibre17">6G</span>), yank it (<span class="calibre17">yy</span>), snap back to where we started (<span class="calibre17">&lt;C-o&gt;</span>), and use the put command (<span class="calibre17">p</span>) to duplicate the line. When duplicating a distant line, the <code class="cf">:t</code> command is usually more efficient.
      </p>
<p id="N12E08" class="calibre4">
        In <a xmlns:str="http://exslt.org/strings" href="f_0049.html#sec.ex.far.wide">​<em class="calibre5">Ex Commands Strike Far and Wide</em>​</a>, we observed the general rule that Normal commands act locally, whereas Ex commands are long range. This example demonstrates this principle in action.
      </p>
<h3 class="calibre22">Move Lines with the ‘:m’ Command</h3>
<p id="N12E13" class="calibre4">
        The <code class="cf">:move</code> command looks similar to the <code class="cf">:copy</code> command (see <strong xmlns:str="http://exslt.org/strings" class="calibre10">:move</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/change.html#:move">
<img alt="info" src="images/information.png" class="calibre21"/>​</a>):
      </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​:[range]move {address}​</code>​</div>
</td>
</tr>
</table>
<p id="N12E3F" class="calibre4">
        We can shorten it to a single letter: <code class="cf">:m</code>. Suppose that we want to move the Hardware Store section after the Beauty Parlor section. We could do so using the <code class="cf">:move</code> command as shown in <a xmlns:str="http://exslt.org/strings" href="#table.moving-section">Table 10, ​<em class="calibre5">Moving a Set of Lines with the ‘:m’ Command</em>​</a>.
      </p>
<hr class="calibre37"/>
<div class="figurecaption" id="table.moving-section">Table 10. Moving a Set of Lines with the ‘:m’ Command</div>
<table class="simpletable">
<thead class="calibre23">
<tr class="calibre7">
<th class="hlines">Keystrokes</th>
<th class="hlines">Buffer Contents</th>
</tr>
</thead>
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre24">
<p class="last-para-in-cell">
<code class="cf">{start}</code>
</p>
</td>
<td class="calibre24">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​Shopping list​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​    <span class="shade-fg-white">H</span>ardware Store​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​        Buy nails​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​        Buy new hammer​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​    Beauty Parlor​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​        Buy nail polish remover​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​        Buy nails​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">Vjj</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​Shopping list​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​<span class="shade-fg-black">    Hardware Store </span>​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​<span class="shade-fg-black">        Buy nails </span>​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​<span class="shade-fg-black">    <span class="shade-fg-white"> </span>   Buy new hammer </span>​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​    Beauty Parlor​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​        Buy nail polish remover​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​        Buy nails​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<code class="cf">:’&lt;,’&gt;m$</code>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​Shopping list​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​    Beauty Parlor​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​        Buy nail polish remover​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​        Buy nails​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​    Hardware Store​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​        Buy nails​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​        <span class="shade-fg-white">B</span>uy new hammer​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
<hr class="calibre37"/>
<p id="N12EDE" class="calibre4">
        Having made our visual selection, we simply have to run the command <code class="cf">:’&lt;,’&gt;m$</code>. Alternatively, we could run <span class="calibre17">dGp</span>. This breaks down like this: <span class="calibre17">d</span> to delete the visual selection, <span class="calibre17">G</span> to jump to the end of the file, and <span class="calibre17">p</span> to paste the text that was deleted.
      </p>
<p id="N12EF0" class="calibre4">
        Remember that the <code class="cf">’&lt;,’&gt;</code> range stands for the visual selection. We could easily make another visual selection and then repeat the <code class="cf">:’&lt;,’&gt;m$</code> command to move the selected text to the end of the file. Repeating the last Ex command is as easy as pressing <span class="calibre17">@:</span> (see <a xmlns:str="http://exslt.org/strings" href="f_0053.html#sec.ex.repeat">Tip 31</a>, for another example), so this method is more easily reproducible than using Normal mode commands.
      </p>
<script src="scripts/book_local.js" type="text/javascript" class="calibre2"/>
</div>

{% endraw %}

