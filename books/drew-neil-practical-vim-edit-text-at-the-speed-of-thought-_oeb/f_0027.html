---
layout: page
title: "Practical Vim (for Kathryn Amaral)"
prev: f_0026.html
next: f_0028.html
book_path: books/drew-neil-practical-vim-edit-text-at-the-speed-of-thought-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>


<table class="arr-recipe" id="sec.undo.chunk">
<tr class="calibre14">
<td class="arr-recipe-number">Tip 8</td>
<td class="arr-recipe-name">Chunk Your Undos</td>
</tr>
</table>
<p id="N11174" class="calibre4">
<span class="calibre5">
        In other text editors, invoking the undo command after typing a few words might revert the last typed word or character. However, in Vim we can control the granularity of the undo command.
    </span>
</p>
<p id="N1117E" class="calibre4">
      The <span class="calibre17">u</span> key triggers the undo command, which reverts the most recent change. A change could be anything that modifies the text in the document. That includes commands triggered from Normal, Visual, and Command-Line modes, but a change could also encompass any text entered (or deleted) in Insert mode. So we could also say that <span class="calibre17">i</span>
<code class="cf">{insert some text}&lt;Esc&gt;</code> constitutes a change.
    </p>
<p id="N1118E" class="calibre4">
      In nonmodal text editors, triggering the undo command after typing a few words could do one of two things. It could undo the last character that was typed. Or, more helpfully, it could chunk a set of characters together so that each undo operation removed a word instead of a character.
    </p>
<p id="N11191" class="calibre4">
	 In Vim, we can control the granularity of the undo command. From the moment we enter Insert mode until we return to Normal mode, everything we type (or delete) counts as a single change. So we can make the undo command operate on words, sentences, or paragraphs just by moderating our use of the <span class="calibre17">&lt;Esc&gt;</span> key.
    </p>
<p id="N111A4" class="calibre4">
      So how often should you leave Insert mode? It’s a matter of preference, but I like to make each “undoable chunk” correspond to a thought. As I write this text (in Vim, of course!), I often pause at the end of a sentence to consider what I’ll write next. No matter how brief its duration, each pause forms a natural break point, giving me a cue to leave Insert mode. When I’m ready to continue writing, I press <span class="calibre17">A</span> and carry on where I left off.
    </p>
<p id="N111AA" class="calibre4">
      If I decide that I’ve taken a wrong turn, I’ll switch to Normal mode and press <span class="calibre17">u</span>. Each time I undo, my text decomposes in coherent chunks that correspond to my thought process as I was writing the original text. It means that I can easily try out a sentence or two and then throw them away with a couple of keystrokes.
    </p>
<p id="N111B0" class="calibre4">
      If I’m in Insert mode with my cursor at the end of a line, the quickest way to open a new line is to press <span class="calibre17">&lt;CR&gt;</span>. And yet I sometimes prefer to press <span class="calibre17">&lt;Esc&gt;o</span> just because I anticipate that I might want that extra granularity from the undo command. If this sounds hard core, don’t worry. As you become adept with Vim, switching modes feels more and more lightweight.
    </p>
<p id="N111B9" class="calibre4">
      As a general rule, if you’ve paused for long enough to ask the question, “Should I leave Insert mode?” then do it.
	  </p>
<div class="sidebar" id="sidebar.change.arrows">
<div class="sidebar-title">Moving Around in Insert Mode Resets the Change</div>
<div class="calibre1">
<p id="N111C4" class="calibre4">
        When I said that the undo command would revert all characters entered (or deleted) during a trip into Insert mode and back, I was glossing over a small detail. If we use the <span class="calibre17">&lt;Up&gt;</span>, <span class="calibre17">&lt;Down&gt;</span>, <span class="calibre17">&lt;Left&gt;</span>, or <span class="calibre17">&lt;Right&gt;</span> cursor keys while in Insert mode, a new undo chunk is created. It’s just as though we had switched back to Normal mode to move around with the <span class="calibre17">h</span>, <span class="calibre17">j</span>, <span class="calibre17">k</span>, or <span class="calibre17">l</span> commands, except that we don’t have to leave Insert mode. This also has implications on the operation of the dot command.
      </p>
</div>
</div>
<script src="scripts/book_local.js" type="text/javascript" class="calibre2"/>
</div>

{% endraw %}

