---
layout: page
title: "Practical Vim (for Kathryn Amaral)"
prev: f_0080.html
next: f_0082.html
book_path: books/drew-neil-practical-vim-edit-text-at-the-speed-of-thought-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>


<table class="arr-recipe" id="sec.parentheses.match">
<tr class="calibre14">
<td class="arr-recipe-number">Tip 54</td>
<td class="arr-recipe-name">Jump Between Matching Parentheses</td>
</tr>
</table>
<p id="N15AFD" class="calibre4">
<span class="calibre5">
        Vim provides a motion that lets us move between opening and closing pairs of parentheses. By enabling the matchit.vim plugin, we can extend this behavior to work on pairs of XML tags as well as on keywords in some programming languages.
    </span>
</p>
<p id="N15B10" class="calibre4">
      The <span class="calibre17">%</span> command lets us jump between opening and closing sets of parentheses (see <strong xmlns:str="http://exslt.org/strings" class="calibre10">%</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/motion.html#%">
<img alt="info" src="images/information.png" class="calibre21"/>​</a>). It works with <code class="cf">()</code>, <code class="cf">{}</code>, and <code class="cf">[]</code>, as this example demonstrates:
    </p>
<table class="simpletable">
<thead class="calibre23">
<tr class="calibre7">
<th class="hlines">Keystrokes</th>
<th class="hlines">Buffer Contents</th>
</tr>
</thead>
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre24">
<p class="last-para-in-cell">
<code class="cf">{start}</code>
</p>
</td>
<td class="calibre24">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​console.log<span class="shade-fg-white">(</span>[{'a':1},{'b':2}])​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">%</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​console.log([{'a':1},{'b':2}]<span class="shade-fg-white">)</span>​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">h</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​console.log([{'a':1},{'b':2}<span class="shade-fg-white">]</span>)​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">%</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​console.log(<span class="shade-fg-white">[</span>{'a':1},{'b':2}])​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">l</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​console.log([<span class="shade-fg-white">{</span>'a':1},{'b':2}])​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">%</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​console.log([{'a':1<span class="shade-fg-white">}</span>,{'b':2}])​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
<p id="N15BBC" class="calibre4">
      To see how we might use <span class="calibre17">%</span> in practice, let’s use this short extract of Ruby:
    </p>
<table class="processedcode">
<tr class="calibre28">
<td colspan="2" class="calibre33">
<a href="http://media.pragprog.com/titles/dnvim/code/motions/parentheses.rb">motions/parentheses.rb</a>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​cities = <em class="string">%w{London Berlin New\ York}</em>​</code>​</div>
</td>
</tr>
</table>
<p id="N15BD1" class="calibre4">
      Suppose that we want to switch from the <code class="cf">%w{London Berlin New\ York}</code> syntax to a regular list definition: <code class="cf">["London", "Berlin", "New York"]</code>. We’ll have to switch opening and closing curly braces to square brackets. You might think that this would be a perfect occasion to use the <span class="calibre17">%</span> motion. You’d be right, but there’s a gotcha!
    </p>
<p id="N15BDD" class="calibre4">
      Let’s say that we start off by positioning our cursor on the opening curly brace and then we press <span class="calibre17">r[</span> to change it to an opening square bracket. Now we’ve got this strange-looking construct: <code class="cf">[London Berlin New\ York}</code>. The <span class="calibre17">%</span> command only works on well-formed matching parentheses, so we can’t use it to jump to the closing <code class="cf">}</code> character.
    </p>
<p id="N15BEC" class="calibre4">
      The trick here is to use the <span class="calibre17">%</span> command <span class="calibre5">before</span> making any changes. When we use the <span class="calibre17">%</span> command, Vim automatically sets a mark for the location from which we jumped. We can snap back to it by pressing <span class="calibre17">✎✎</span>. Here’s a partial solution for our example refactoring:
    </p>
<table class="simpletable">
<thead class="calibre23">
<tr class="calibre7">
<th class="hlines">Keystrokes</th>
<th class="hlines">Buffer Contents</th>
</tr>
</thead>
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre24">
<p class="last-para-in-cell">
<code class="cf">{start}</code>
</p>
</td>
<td class="calibre24">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​cities = <span class="shade-fg-white">%</span>w{London Berlin New\ York}​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">dt{</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​cities = <span class="shade-fg-white">{</span>London Berlin New\ York}​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">%</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​cities = {London Berlin New\ York<span class="shade-fg-white">}</span>​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">r]</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​cities = {London Berlin New\ York<span class="shade-fg-white">]</span>​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">✎✎</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​cities = <span class="shade-fg-white">{</span>London Berlin New\ York]​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">r[</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​cities = <span class="shade-fg-white">[</span>London Berlin New\ York]​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
<p id="N15C93" class="calibre4">
      Note that in this case, the <span class="calibre17">&lt;C-o&gt;</span> command would work just as well as the <span class="calibre17">✎✎</span> motion (see <a xmlns:str="http://exslt.org/strings" href="f_0083.html#sec.jump.list">Tip 55</a>).
        The surround.vim plugin provides commands that would make this task even easier. Find out more in <a xmlns:str="http://exslt.org/strings" href="#sidebar.surround">​<em class="calibre5">Surround.vim</em>​</a>.
    </p>
<h3 class="calibre22">Jump Between Matching Keywords</h3>
<p id="N15CAB" class="calibre4">
        Vim ships with a plugin called <code class="cf">matchit</code>, which enhances the functionality of the <span class="calibre17">%</span> command. When this plugin is enabled, the <span class="calibre17">%</span> command can jump between matching pairs of keywords. For example, in an HTML file, the <span class="calibre17">%</span> command would jump between opening and closing tags. In a Ruby file, it would jump between <code class="cf">class</code>/<code class="cf">end</code>, <code class="cf">def</code>/<code class="cf">end</code>, and <code class="cf">if</code>/<code class="cf">end</code> pairs.
      </p>
<p id="N15CD4" class="calibre4">
        Even though <code class="cf">matchit</code> ships with the Vim distribution, it’s not enabled by default. This minimal <code class="cf">vimrc</code> would make Vim autoload the <code class="cf">matchit</code> plugin on startup:
      </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">set</strong> nocompatible​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">filetype</strong> plugin <strong class="prompt">on</strong>​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">runtime</strong> macros/matchit.<strong class="prompt">vim</strong>​</code>​</div>
</td>
</tr>
</table>
<p id="N15D0A" class="calibre4">
        The enhancements provided by this plugin are very useful, so I’d recommend enabling it. Consult <strong xmlns:str="http://exslt.org/strings" class="calibre10">matchit-install</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/usr_05.html#matchit-install">
<img alt="info" src="images/information.png" class="calibre21"/>​</a> for more details.
      </p>
<div class="sidebar" id="sidebar.surround">
<div class="sidebar-title">Surround.vim</div>
<div class="calibre1">
<p id="N15D16" class="calibre4">
        One of my favorite plugins is surround.vim by Tim Pope,<a id="FNPTR-16" href="#FOOTNOTE-16">[16]</a> which makes wrapping a selection with a pair of delimiters easy. For example, we could put the words <span class="calibre5">New York</span> in quote marks:
      </p>
<table class="simpletable">
<thead class="calibre23">
<tr class="calibre7">
<th class="hlines">Keystrokes</th>
<th class="hlines">Buffer Contents</th>
</tr>
</thead>
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre24">
<p class="last-para-in-cell">
<code class="cf1">{start}</code>
</p>
</td>
<td class="calibre24">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix5" valign="top">
<span> </span>
</td>
<td class="codeline5" valign="top">
<div class="calibre41">
​<code class="calibre39">​cities = ["London", "Berlin", <span class="shade-fg-white">N</span>ew York]​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">vee</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix6" valign="top">
<span> </span>
</td>
<td class="codeline6" valign="top">
<div class="calibre41">
​<code class="calibre39">​cities = ["London", "Berlin", <span class="shade-fg-black">New Yor<span class="shade-fg-white">k</span>
</span>]​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">S"</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix6" valign="top">
<span> </span>
</td>
<td class="codeline6" valign="top">
<div class="calibre41">
​<code class="calibre39">​cities = ["London", "Berlin", <span class="shade-fg-white">"</span>New York"]​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
<p id="N15D7C" class="calibre4">
        The <span class="calibre17">S"</span> command is provided by surround.vim, and it can be read as “Surround the selection with a pair of double quote marks.” We could just as easily use <span class="calibre17">S)</span> or <span class="calibre17">S}</span> if we wanted to wrap the selection with opening and closing parentheses or braces.
      </p>
<p id="N15D8D" class="calibre4">
        We can also use surround.vim to <span class="calibre5">change</span> existing delimiters. For example, we could change <code class="cf1">{London}</code> to <code class="cf1">[London]</code> with the <span class="calibre17">cs}]</span> command, which can be read as “Change surrounding <code class="cf1">{}</code> braces to <code class="cf1">[]</code> brackets.” Or we could go the other way with the <span class="calibre17">cs]}</span> command. It’s a powerful plugin—check it out.
		</p>
</div>
</div>

<div class="footnotes">
<h4 class="calibre20">Footnotes</h4>
<table cellspacing="3" class="table-of-contents">
<tr valign="top" class="calibre14">
<td class="footnote-number">
<a id="FOOTNOTE-15" href="f_0073.html#FNPTR-15">[15]</a>
</td>
<td class="calibre8">
<p id="N14AB5" class="calibre4">
<a href="http://www.catonmat.net/blog/why-vim-uses-hjkl-as-arrow-keys/">http://www.catonmat.net/blog/why-vim-uses-hjkl-as-arrow-keys/</a>
</p>
</td>
</tr>
<tr valign="top" class="calibre14">
<td class="footnote-number">
<a id="FOOTNOTE-16" href="#FNPTR-16">[16]</a>
</td>
<td class="calibre8">
<p id="N15D20" class="calibre4">
<a href="http://github.com/tpope/vim-surround">http://github.com/tpope/vim-surround</a>
</p>
</td>
</tr>
</table>
</div>
<div class="copyright">Copyright © 2012, The Pragmatic Bookshelf.</div>




<script src="scripts/book_local.js" type="text/javascript" class="calibre2"/>
</div>

{% endraw %}

