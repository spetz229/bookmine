---
layout: page
title: "Practical Vim (for Kathryn Amaral)"
prev: f_0068.html
next: f_0070.html
book_path: books/drew-neil-practical-vim-edit-text-at-the-speed-of-thought-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>


<table class="arr-recipe" id="sec.non.existent.dirs">
<tr class="calibre14">
<td class="arr-recipe-number">Tip 44</td>
<td class="arr-recipe-name">Save Files to Nonexistent Directories</td>
</tr>
</table>
<p id="N14857" class="calibre4">
<span class="calibre5">
        Vim is happy to let us edit a buffer whose path includes directories that don’t exist. It’s only when we attempt to write the buffer to a file that Vim objects. Here’s a quick tip on how to deal with this situation.
    </span>
</p>
<p id="N1486A" class="calibre4">	
      The <code class="cf">:edit {file}</code> command is most commonly used to open a file that already exists. But if we specify a filepath that doesn’t correspond to an existing file, then Vim will create a new empty buffer. If we press <span class="calibre17">&lt;C-g&gt;</span>, we’ll see that the buffer is labeled as “new file” (the <span class="calibre17">&lt;C-g&gt;</span> command echoes the name and status of the current file; see <strong xmlns:str="http://exslt.org/strings" class="calibre10">ctrl-G</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/editing.html#ctrl-G">
<img alt="info" src="images/information.png" class="calibre21"/>​</a>). When we run the <code class="cf">:write</code> command, Vim will attempt to write the contents of that buffer to a new file using the filepath that was specified when the buffer was created.
    </p>
<p id="N1488C" class="calibre4">
      If we run <code class="cf">:edit {file}</code> and specify a filepath that contains nonexistent directories, things can get a little awkward:
    </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">:edit madeup/dir/doesnotexist.yet</strong>​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">:write</strong>​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>&lt;= </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​"madeup/dir/doesnotexist.yet" E212: Can't open file for writing​</code>​</div>
</td>
</tr>
</table>
<p id="N148A8" class="calibre4">
      In this case, the <code class="cf">madeup/dir</code> directories do not exist. Vim creates a new buffer anyway, but this time it’s labeled as “new DIRECTORY.” It’s only when we attempt to write the buffer to disk that Vim raises an error. We can remedy this situation by calling the external <code class="cf">mkdir</code> program:
    </p>
<table class="processedcode">
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">:!mkdir -p %:h</strong>​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span>=&gt; </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">:write</strong>​</code>​</div>
</td>
</tr>
</table>
<p id="N148C8" class="calibre4">
      The <code class="cf">-p</code> flag tells <code class="cf">mkdir</code> to create intermediate directories. See <a xmlns:str="http://exslt.org/strings" href="f_0066.html#sec.edit.active.directory">​<em class="calibre5">Open a File Relative to the Active File Directory</em>​</a>, for an explanation of what the <code class="cf">%:h</code> characters stand for.
    </p>
<script src="scripts/book_local.js" type="text/javascript" class="calibre2"/>
</div>

{% endraw %}

