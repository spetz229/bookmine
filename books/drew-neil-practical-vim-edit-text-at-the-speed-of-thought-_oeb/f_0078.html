---
layout: page
title: "Practical Vim (for Kathryn Amaral)"
prev: f_0077.html
next: f_0079.html
book_path: books/drew-neil-practical-vim-edit-text-at-the-speed-of-thought-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>


<table class="arr-recipe" id="sec.text.objects">
<tr class="calibre14">
<td class="arr-recipe-number">Tip 51</td>
<td class="arr-recipe-name">Trace Your Selection with Precision Text Objects</td>
</tr>
</table>
<p id="N154BE" class="calibre4">
<span class="calibre5">
        Text objects allow us to interact with parentheses, quotes, XML tags, and other common patterns that appear in text.
    </span>
</p>
<p id="N154CC" class="calibre4">
      Take a look at this code sample:
    </p>
<table class="processedcode">
<tr class="calibre28">
<td colspan="2" class="calibre33">
<a href="http://media.pragprog.com/titles/dnvim/code/motions/template.js">motions/template.js</a>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​<strong class="prompt">var</strong> tpl = [​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​  <em class="string">'&lt;a href="{url}"&gt;{title}&lt;/a&gt;'</em>​</code>​</div>
</td>
</tr>
<tr class="calibre28">
<td class="codeprefix" valign="top">
<span> </span>
</td>
<td class="codeline" valign="top">
<div class="calibre29">
​<code class="calibre30">​]​</code>​</div>
</td>
</tr>
</table>
<p id="N154E6" class="calibre4">
      Each opening <code class="cf">{</code> character is balanced by a closing <code class="cf">}</code> character. The same is true of <code class="cf">[</code> and <code class="cf">]</code>, <code class="cf">&lt;</code> and <code class="cf">&gt;</code>, and the opening and closing HTML tags, <code class="cf">&lt;a&gt;</code> and <code class="cf">&lt;/a&gt;</code>. This sample also contains single and double quotation marks, which come in pairs.
    </p>
<p id="N15501" class="calibre4">
      Vim understands the structure of these well-formed patterns, and it allows us to operate on the regions of text that they delimit. <span class="calibre5">Text objects</span> define regions of text by structure (see <strong xmlns:str="http://exslt.org/strings" class="calibre10">text-objects</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/motion.html#text-objects">
<img alt="info" src="images/information.png" class="calibre21"/>​</a>). With only a couple of keystrokes, we can use these to select or operate on a chunk of text.
    </p>
<p id="N1550B" class="calibre4">
      Suppose that our cursor was positioned inside a set of curly braces and we wanted to visually select the text inside the <code class="cf">{}</code>. We could do so by pressing <span class="calibre17">vi}</span>:
    </p>
<table class="simpletable">
<thead class="calibre23">
<tr class="calibre7">
<th class="hlines">Keystrokes</th>
<th class="hlines">Buffer Contents</th>
</tr>
</thead>
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre24">
<p class="last-para-in-cell">
<code class="cf">{start}</code>
</p>
</td>
<td class="calibre24">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​var tpl = [​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​  '&lt;a href="{u<span class="shade-fg-white">r</span>l}"&gt;{title}&lt;/a&gt;'​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​]​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">vi}</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​var tpl = [​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​  '&lt;a href="{<span class="shade-fg-black">ur<span class="shade-fg-white">l</span>
</span>}"&gt;{title}&lt;/a&gt;'​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​]​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">a"</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​var tpl = [​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​  '&lt;a href=<span class="shade-fg-black">"{url}<span class="shade-fg-white">"</span>
</span>&gt;{title}&lt;/a&gt;'​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​]​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">i&gt;</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​var tpl = [​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​  '&lt;<span class="shade-fg-black">a href="{url}<span class="shade-fg-white">"</span>
</span>&gt;{title}&lt;/a&gt;'​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​]​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">it</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​var tpl = [​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​  '&lt;a href="{url}"&gt;<span class="shade-fg-black">{title<span class="shade-fg-white">}</span>
</span>&lt;/a&gt;'​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​]​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">at</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​var tpl = [​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​  '<span class="shade-fg-black">&lt;a href="{url}"&gt;{title}&lt;/a<span class="shade-fg-white">&gt;</span>
</span>'​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​]​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">a]</span>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​var tpl = <span class="shade-fg-black">[ </span>​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​<span class="shade-fg-black">  ’&lt;a href="{url}"&gt;{title}&lt;/a&gt;’ </span>​</code>​</div>
</td>
</tr>
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​<span class="shade-fg-white">]</span>​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
<p id="N1560A" class="calibre4">
      Normally when we use Visual mode, one end of the selection is anchored to a particular character, while the other end of the selection is free to move. When we use motions such as <span class="calibre17">l</span>, <span class="calibre17">w</span>, and <span class="calibre17">f{char}</span>, we can expand or contract the selection by moving the free end of the visual range.
    </p>
<p id="N15616" class="calibre4">
      What’s happening here is different. When we press <span class="calibre17">vi}</span>, Vim initiates Visual mode and then selects all of the characters contained by the <code class="cf">{}</code> braces. Where the cursor is positioned to begin with doesn’t matter so long as it’s located somewhere inside a block of curly braces when the <span class="calibre17">i}</span> text object is invoked.
    </p>
<p id="N15622" class="calibre4">
      We can expand the selection again using another text object. For example, <span class="calibre17">a"</span> selects a range of characters delimited by double quotes. <span class="calibre17">i&gt;</span> selects everything inside a pair of angle brackets.
    </p>
<p id="N1564E" class="calibre4">
      Vim’s text objects consist of two characters, the first of which is always either <span class="calibre17">i</span> or <span class="calibre17">a</span>. In general, we can say that the text objects prefixed with <span class="calibre17">i</span> select inside the delimiters, whereas those that are prefixed with <span class="calibre17">a</span> select everything including the delimiters. As a mnemonic, think of <span class="calibre17">i</span> as <span class="calibre5">inside</span> and <span class="calibre17">a</span> as <span class="calibre5">around</span> (or <span class="calibre5">all</span>).
    </p>
<p id="N1566C" class="calibre4">
      Take another look at the example above, paying close attention to whether the text object leads with <span class="calibre17">i</span> or <span class="calibre17">a</span>. In particular, note the difference between <span class="calibre17">it</span> and <span class="calibre17">at</span>. Note, too, that in this example <span class="calibre17">a]</span> expands the selection to span multiple lines.
    </p>
<p id="N1567E" class="calibre4">
      A partial list of Vim’s built-in text objects is summarized in the following table. In the interests of neatness, some duplicates have been omitted. For example, <span class="calibre17">i(</span> and <span class="calibre17">i)</span> are equivalent to each other, and so too are <span class="calibre17">a[</span> and <span class="calibre17">a]</span>. Use whichever style you find most comfortable.
    </p>
<hr class="calibre37"/>
<div class="figurecaption" id="table.block.text.objects">Table 12. Delimited Text Objects</div>
<table class="simpletable">
<thead class="calibre23">
<tr class="calibre7">
<th class="hlines">Text Object</th>
<th class="hlines">Selection</th>
</tr>
</thead>
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre24">
<p class="last-para-in-cell">
<span class="calibre17">a)</span> or <span class="calibre17">ab</span>
</p>
</td>
<td class="calibre24">
<p class="last-para-in-cell">A pair of <code class="cf">(parentheses)</code>
</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">i)</span> or <span class="calibre17">ib</span>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">Inside of <code class="cf">(parentheses)</code>
</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">a}</span> or <span class="calibre17">aB</span>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">A pair of <code class="cf">{braces}</code>
</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">i}</span> or <span class="calibre17">iB</span>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">Inside of <code class="cf">{braces}</code>
</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">a]</span>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">A pair of <code class="cf">[brackets]</code>
</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">i]</span>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">Inside of <code class="cf">[brackets]</code>
</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">a&gt;</span>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">A pair of <code class="cf">&lt;angle brackets&gt;</code>
</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">i&gt;</span>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">Inside of <code class="cf">&lt;angle brackets&gt;</code>
</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">a'</span>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">A pair of <code class="cf">’single quotes’</code>
</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">i'</span>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">Inside of <code class="cf">’single quotes’</code>
</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">a"</span>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">A pair of <code class="cf">"double quotes"</code>
</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">i"</span>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">Inside of <code class="cf">"double quotes"</code>
</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">a✎</span>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">A pair of <code class="cf">`backticks`</code>
</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">i✎</span>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">Inside of <code class="cf">`backticks`</code>
</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">at</span>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">A pair of <code class="cf">&lt;xml&gt;tags&lt;/xml&gt;</code>
</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">it</span>
</p>
</td>
<td class="calibre26">
<p class="last-para-in-cell">Inside of <code class="cf">&lt;xml&gt;tags&lt;/xml&gt;</code>
</p>
</td>
</tr>
</tbody>
</table>
<hr class="calibre37"/>
<h3 class="calibre22">Performing Operations with Text Objects</h3>
<p id="N15778" class="calibre4">
        Visual mode makes for a nice introduction to text objects because it’s easy to see what’s happening. But text objects reveal their true power when we use them in Operator-Pending mode.
      </p>
<p id="N1577B" class="calibre4">
        Text objects are not motions themselves: we can’t use them to navigate around the document. But we can use text objects in Visual mode and in Operator-Pending mode. Remember this: whenever you see <code class="cf">{motion}</code> as part of the syntax for a command, you can also use a text object. Common examples include <span class="calibre17">d{motion}</span>, <span class="calibre17">c{motion}</span>, and <span class="calibre17">y{motion}</span> (see <a xmlns:str="http://exslt.org/strings" href="f_0031.html#table.operators">Table 2, ​<em class="calibre5">Vim’s Operator Commands</em>​</a>, for more).
      </p>
<p id="N1578E" class="calibre4">
        Let’s demonstrate using the <span class="calibre17">c{motion}</span> command, which deletes the specified text and then switches to Insert mode (<strong xmlns:str="http://exslt.org/strings" class="calibre10">c</strong>
<a xmlns:str="http://exslt.org/strings" href="http://vimdoc.sourceforge.net/htmldoc/change.html#c">
<img alt="info" src="images/information.png" class="calibre21"/>​</a>). We’ll use it to replace <code class="cf">{url}</code> with a <code class="cf">#</code> symbol, and then again to replace <code class="cf">{title}</code> with a placeholder:
      </p>
<table class="simpletable">
<thead class="calibre23">
<tr class="calibre7">
<th class="hlines">Keystrokes</th>
<th class="hlines">Buffer Contents</th>
</tr>
</thead>
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre24">
<p class="last-para-in-cell">
<code class="cf">{start}</code>
</p>
</td>
<td class="calibre24">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix1" valign="top">
<span> </span>
</td>
<td class="codeline1" valign="top">
<div class="calibre32">
​<code class="calibre30">​'&lt;a href="{u<span class="shade-fg-white">r</span>l}"&gt;{title}&lt;/a&gt;'​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">ci"</span>
<code class="cf">#&lt;Esc&gt;</code>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​'&lt;a href="<span class="shade-fg-white">#</span>"&gt;{title}&lt;/a&gt;'​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
<tr class="calibre7">
<td class="calibre26">
<p class="last-para-in-cell">
<span class="calibre17">cit</span>
<code class="cf">click here&lt;Esc&gt;</code>
</p>
</td>
<td class="calibre26">
<table class="processedcode1">
<tr class="calibre31">
<td class="codeprefix2" valign="top">
<span> </span>
</td>
<td class="codeline2" valign="top">
<div class="calibre32">
​<code class="calibre30">​'&lt;a href="#"&gt;click her<span class="shade-fg-white">e</span>&lt;/a&gt;'​</code>​</div>
</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
<p id="N157FC" class="calibre4">
      We can read the <span class="calibre17">ci"</span> command as “change inside the double quotes.” The <span class="calibre17">cit</span> command can be read as “change inside the tag.” We could just as easily use the <span class="calibre17">yit</span> command to yank the text from inside the tag, or <span class="calibre17">dit</span> to delete it.
    </p>
<h3 class="calibre22">Discussion</h3>
<p id="N1580F" class="calibre4">
        Each of these commands requires only three keystrokes, and yet they’re elegant in spite of this terseness. I would almost go so far as to say that they are self-documenting. That’s because these commands follow the rules of Vim’s simple grammar, which is covered in <a xmlns:str="http://exslt.org/strings" href="f_0031.html#sec.operator">Tip 12</a>.
      </p>
<p id="N15816" class="calibre4">
        In <a xmlns:str="http://exslt.org/strings" href="f_0076.html#sec.fchar">Tip 49</a>, and <a xmlns:str="http://exslt.org/strings" href="f_0077.html#sec.search.motion">Tip 50</a>, we learned a couple of tricks that allow us to move the cursor with precision. Whether we’re using <span class="calibre17">f{char}</span> to search for a single character or <code class="cf">/target</code>
<span class="calibre17">&lt;CR&gt;</span> to search for several characters, the pattern of usage is the same: we look for a suitable target, take aim, and then fire. If we’re good, we’ll hit our target with a single move.
        These power moves allow us to cover a lot of ground with little effort.
      </p>
<div class="figure" id="fig.ninjas">
<div class="calibre1">
<img xmlns:str="http://exslt.org/strings" src="images/ninjas.png" alt="images/ninjas.png" class="calibre21"/>
</div>
<div class="figurecaption">
<hr class="calibre37"/>Figure 3. Vim’s power moves can strike with deadly precision</div>
</div>
<p id="N15835" class="calibre4">
        Text objects are the next level up. If the <span class="calibre17">f{char}</span> and <code class="cf">/pattern</code>
<span class="calibre17">&lt;CR&gt;</span> commands are like a flying kick to the head, then text objects are like a scissors kick that strikes two targets with a single move, as <a xmlns:str="http://exslt.org/strings" href="#fig.ninjas">Figure 3, ​<em class="calibre5">Vim's power moves can strike with deadly precision</em>​</a> illustrates.
       
		</p>
<script src="scripts/book_local.js" type="text/javascript" class="calibre2"/>
</div>

{% endraw %}

