---
layout: page
title: "CoffeeScript (for jay muratore)"
prev: f_0032.html
next: f_0034.html
book_path: books/trevor-burnham-coffeescript-accelerated-javascript-development-pragmatic--_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

<h2 id="sec.patternMatching" class="calibre13">3.6 Pattern Matching (or, Destructuring Assignment)</h2>
<p id="N12190" class="calibre5">
      In JavaScript, assignment is a strict one-at-a-time affair. If you had a list of values that you wanted to transfer to a list of variables, you’d probably write a custom function. But in CoffeeScript, you can just write one line of code:
    </p>
<table class="processedcode">
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">[firstName, middleInitial, lastName] = [<em class="string">'Joe'</em>, <em class="string">'T'</em>, <em class="string">'Plumber'</em>]</code>
</td>
</tr>
</table>
<p id="N121AF" class="calibre5">
      This syntax, called <span class="emph">array pattern matching</span>, may look odd at first. The square brackets on the left side of the assignment aren’t really creating an array, after all. Instead, it’s just describing a “pattern” of variables that the array on the right side fills in. So the line above is equivalent to this:
    </p>
<table class="processedcode">
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">firstName = <em class="string">'Joe'</em>; middleInitial = <em class="string">'T'</em>; lastName = <em class="string">'Plumber'</em>
</code>
</td>
</tr>
</table>
<p id="N121CB" class="calibre5">
      But array pattern matching isn’t just a pretty syntax for making multiple assignments. For one thing, you can reference the same variable(s) on both sides of the assignment, making swaps a one-line affair instead of a three-line chore:
    </p>
<table class="processedcode">
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">[newBoss, oldBoss] = [oldBoss, newBoss]</code>
</td>
</tr>
</table>
<p id="N121D9" class="calibre5">
      We can also use splats the same way that we used them in function definitions in Section 2.6, <a href="f_0023.html#sec.splats">​<em class="emph">Splats (...)</em>​</a>:
    </p>
<table class="processedcode">
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">[theBest, theRest...] = topStudents</code>
</td>
</tr>
</table>
<p id="N121EA" class="calibre5">
      If you think array pattern matching is great, you’ll love object pattern matching. Say we want to pick out a few values from an object:
    </p>
<table class="processedcode">
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">myRect =</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">  x: 100</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">  y: 200</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">{x: myX, y: myY} = myRect</code>
</td>
</tr>
</table>
<p id="N12204" class="calibre5">
      Again, the “object” on the left side of the assignment isn’t really an object, it’s a pattern, providing keys and variable names to match these keys. So this is equivalent to the following:
    </p>
<table class="processedcode">
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">myX = myRect.x; myY = myRect.y</code>
</td>
</tr>
</table>
<p id="N12212" class="calibre5">
      This might not look like much of a gain, but remember (as we discussed in <a href="f_0028.html#sec.sameNamePairs">​<em class="emph">Same-Name Key-Value Pairs</em>​</a>) how <code class="cf">{x}</code> is short for <code class="cf">{x: x}</code>? Well, that works in patterns, too, which means that if you just want to copy <code class="cf">rect.x</code> and <code class="cf">rect.y</code> to local variables named <code class="cf">x</code> and <code class="cf">y</code>, then all you have to write is this:
    </p>
<table class="processedcode">
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">{x, y} = rect</code>
</td>
</tr>
</table>
<p id="N12235" class="calibre5">
      Believe me, this syntax will change the way you read properties from objects <span class="emph">forever</span>. To give another example, let’s say that we’re writing some tests using Node’s <code class="cf">assert</code> module. Specifically, we want to use the <code class="cf">assert.ok</code> and <code class="cf">assert.strictEqual</code> methods. We can load them as variables called <code class="cf">ok</code> and <code class="cf">strictEqual</code> by writing this:
    </p>
<table class="processedcode">
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">{ok, strictEqual} = require <em class="string">'assert'</em>
</code>
</td>
</tr>
</table>
<p id="N12257" class="calibre5">
      One last tip—did I mention that array patterns and object patterns can be nested inside of each other?
    </p>
<table class="processedcode">
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">{languages: [favoriteLanguage, otherLanguages...]} = resume</code>
</td>
</tr>
</table>
<p id="N12265" class="calibre5">
      This code translates as “Take <code class="cf">resume.languages</code>, assign its first entry to a variable called <code class="cf">favoriteLanguage</code>, then assign the remaining entries to a new array called <code class="cf">otherLanguages</code>.” Not bad for one line, right?
    </p>
<p id="N12271" class="calibre5">
      Pattern matching is also known as <span class="emph">destructuring assignment</span> and is a part of the JavaScript 1.7 standard (currently supported by the latest version of Firefox). But you don’t have to wait for that standard to catch on—CoffeeScript compiles each pattern to a series of simple assignments.
    </p>
<p id="N12277" class="calibre5">
    I know this chapter has thrown a lot at you, but now it’s time to pick up the pieces and put them together for the first working version of our word game. Don’t forget the exercises afterward—they’re a challenge, I promise.
    </p>
<script src="scripts/book_local.js" type="text/javascript" class="calibre2"/>
</div>

{% endraw %}

