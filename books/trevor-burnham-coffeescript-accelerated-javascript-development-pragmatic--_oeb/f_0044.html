---
layout: page
title: "CoffeeScript (for jay muratore)"
prev: f_0043.html
next: f_0045.html
book_path: books/trevor-burnham-coffeescript-accelerated-javascript-development-pragmatic--_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

<h2 id="sec.classesExercises" class="calibre13">4.7 Exercises</h2>
<ol class="calibre24">
<li class="calibre3">
<p id="N13176" class="calibre5">
          Explain this output, and fix the code so that the old aphorism is displayed twice:
        </p>
<table class="processedcode">
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">root = global ? window</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16"></code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">root.aphorism = <em class="string">'Fool me 8 or more times, shame on me'</em>
</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16"></code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">
<strong class="prompt">do</strong> restoreOldAphorism = <strong class="prompt">-&gt;</strong>
</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">  aphorism = <em class="string">'Fool me once, shame on you'</em>
</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">  console.log aphorism</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16"></code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">console.log aphorism</code>
</td>
</tr>
</table>
<table class="processedcode">
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">Fool me once, shame on you</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">Fool me 8 or more times, shame on me</code>
</td>
</tr>
</table>
</li>
<li class="calibre3">
<p id="N131B3" class="calibre5">
          As everyone knows, the Genie Workers International Union mandates a limit of three wishes across all genies. The following code is designed to enforce that rule, but it has a flaw:
        </p>
<table class="processedcode">
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">Genie = <strong class="prompt">-&gt;</strong>
</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">Genie::wishesLeft = 3</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16"></code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">Genie::grantWish = <strong class="prompt">-&gt;</strong>
</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">  <strong class="prompt">if</strong> @wishesLeft &gt; 0</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">    console.log <em class="string">'Your wish is granted!'</em>
</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">    @wishesLeft--</code>
</td>
</tr>
</table>
<p id="N131DC" class="calibre5">
          What’s wrong with this code, and how would you fix it?
        </p>
</li>
<li class="calibre3">
<p id="N131E0" class="calibre5">
          The <code class="cf">prototype</code> property is not, unfortunately, the “true” prototype of an object. The good news is that you can get the true prototype with <code class="cf">__proto__</code>. The bad news is that <code class="cf">__proto__</code> isn’t supported in all JS environments; in particular, it’s not available under Internet Explorer.
        </p>
<p id="N131EC" class="calibre5">
          Still, it’s useful to use <code class="cf">__proto__</code> to illustrate the rules we talked about regarding prototype inheritance:
        </p>
<table class="processedcode">
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">
<strong class="prompt">class</strong> Season</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">
<strong class="prompt">class</strong> Spring <strong class="prompt">extends</strong> Season</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16"></code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">(<strong class="prompt">new</strong> Season).__proto__.__proto__</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">(<strong class="prompt">new</strong> Spring).__proto__.__proto__.__proto__</code>
</td>
</tr>
</table>
<p id="N13216" class="calibre5">
          In an environment that supports it (such as Node), what is the value of the two prototypes shown here?
        </p>
</li>
<li class="calibre3">
<p id="N1321A" class="calibre5">
          We haven’t discussed bound functions on classes, so perhaps a demonstration is in order. What output do you expect the following code to generate?
        </p>
<table class="processedcode">
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">(window ? global).property = <em class="string">'global context'</em>
</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">@property = <em class="string">'surrounding context'</em>
</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">
<strong class="prompt">class</strong> Foo</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">  constructor: <strong class="prompt">-&gt;</strong> @property = <em class="string">'instance context'</em>
</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">  bar: <strong class="prompt">=&gt;</strong> console.log @property</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16"></code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">foo = <strong class="prompt">new</strong> Foo</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">bar = foo.bar</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">foo.bar()</code>
</td>
</tr>
<tr class="calibre15">
<td class="codeprefix"> </td>
<td class="codeline">
<code class="calibre16">bar()</code>
</td>
</tr>
</table>
<p id="N13254" class="calibre5">
          Why might you prefer to define <code class="cf">bar</code> using <code class="cf">-&gt;</code> instead?
        </p>
</li>
</ol>

<div class="footnotes">
<h4 class="calibre12">Footnotes</h4>
<table cellspacing="3" class="calibre6">
<tr valign="top" class="calibre8">
<td class="footnote-number">
<a id="FOOTNOTE-32" href="f_0038.html#FNPTR-32">[32]</a>
</td>
<td class="calibre10">
<p id="N1290C" class="calibre5">
<a href="http://requirejs.org/">http://requirejs.org/</a>
</p>
</td>
</tr>
<tr valign="top" class="calibre8">
<td class="footnote-number">
<a id="FOOTNOTE-33" href="f_0039.html#FNPTR-33">[33]</a>
</td>
<td class="calibre10">
<p id="N12954" class="calibre5">
<a href="http://javascriptweblog.wordpress.com/2010/06/07/understanding-javascript-prototypes/">http://javascriptweblog.wordpress.com/2010/06/07/understanding-javascript-prototypes/</a>
</p>
</td>
</tr>
<tr valign="top" class="calibre8">
<td class="footnote-number">
<a id="FOOTNOTE-34" href="f_0042.html#FNPTR-34">[34]</a>
</td>
<td class="calibre10">
<p id="N13145" class="calibre5">
<a href="http://nodejs.org/docs/v0.4.8/api/modules.html">http://nodejs.org/docs/v0.4.8/api/modules.html</a>
</p>
</td>
</tr>
</table>
</div>
<div class="copyright">Copyright © 2011, The Pragmatic Bookshelf.</div>




<script src="scripts/book_local.js" type="text/javascript" class="calibre2"/>
</div>

{% endraw %}

