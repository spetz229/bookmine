---
layout: page
title: "JavaScript Web Applications"
prev: OEBPS/ch01s12.html
next: OEBPS/ch02s02.html
book_path: books/alex-maccaw-javascript-web-applications-otx--_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="calibre7"></div><div class="book" title="Chapter 2. Events and Observing"><div class="book"><div class="book"><div class="book"><div class="calibre7"></div><h1 class="title1"><a id="events-observing" class="calibre1"></a>Chapter 2. Events and Observing</h1></div></div></div><p class="calibre3"><a id="index-174T661GJ3C" class="calibre1"></a>Events are at the core of your JavaScript application,
  powering everything and providing the first point of contact when a user
  interacts with your application. However, this is where JavaScript’s
  unstandardized birth rears its ugly head. At the height of the browser wars,
  Netscape and Microsoft purposely chose different, incompatible event models.
  Although they were later standardized by the W3C, Internet Explorer kept its
  different implementation until its latest release, IE9.</p><p class="calibre3">Luckily, we have great libraries like jQuery and Prototype that smooth
  over the mess, giving you one API that will work with all the event
  implementations. Still, it’s worth understanding what’s happening behind the
  scenes, so I’m going to cover the W3C model here before showing examples for
  various popular libraries.</p><div class="book" title="Listening to Events"><div class="book"><div class="book"><div class="book"><h1 class="title1"><a id="I_sect12_d1e1635" class="calibre1"></a>Listening to Events</h1></div></div></div><p class="calibre3"><a id="I_indexterm2_d1e1639" class="calibre1"></a><a id="I_indexterm2_d1e1644" class="calibre1"></a>Events revolve around a function called <code class="literal">addEventListener()</code><a id="I_indexterm2_d1e1650" class="calibre1"></a><a id="I_indexterm2_d1e1653" class="calibre1"></a>, which takes three arguments: <code class="literal">type</code> (e.g., <span class="calibre1"><em class="calibre4">click</em></span>),
    <code class="literal">listener</code> (i.e., callback), and <code class="literal">useCapture</code> (we’ll cover <code class="literal">useCapture</code> later). Using the first two
    arguments, we can attach a function to a DOM element, which is invoked
    when that particular event, such as <span class="calibre1"><em class="calibre4">click</em></span>, is
    triggered on the element:</p><pre class="screen">var button = document.getElementById("createButton");

button.addEventListener("click", function(){ /* ... */ }, false);</pre><p class="calibre3">We can remove the listener using <code class="literal">removeEventListener()</code><a id="I_indexterm2_d1e1684" class="calibre1"></a><a id="I_indexterm2_d1e1687" class="calibre1"></a>, passing the same arguments we gave <code class="literal">addEventListener()</code>. If the listener function is
    anonymous and there’s no reference to it, it can’t be removed without
    destroying the element:</p><pre class="screen">var div = document.getElementById("div");

var listener = function(event) { /* ... */ };
div.addEventListener("click", listener, false);
div.removeEventListener("click", listener, false);</pre><p class="calibre3">As its first argument, the listener function is passed an <code class="literal">event</code> object, which you can use to get
    information about the event, such as timestamp, coordinates, and target.
    It also contains various functions to stop the event propagation and
    prevent the default action.</p><p class="calibre3">As for event types, the supported ones vary from browser <a id="I_indexterm2_d1e1705" class="calibre1"></a>to browser, but all modern browsers have the
    following:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><p class="calibre3"><span class="calibre1"><em class="calibre4">click</em></span></p></li><li class="listitem"><p class="calibre3"><span class="calibre1"><em class="calibre4">dblclick</em></span></p></li><li class="listitem"><p class="calibre3"><span class="calibre1"><em class="calibre4">mousemove</em></span></p></li><li class="listitem"><p class="calibre3"><span class="calibre1"><em class="calibre4">mouseover</em></span></p></li><li class="listitem"><p class="calibre3"><span class="calibre1"><em class="calibre4">mouseout</em></span></p></li><li class="listitem"><p class="calibre3"><span class="calibre1"><em class="calibre4">focus</em></span></p></li><li class="listitem"><p class="calibre3"><span class="calibre1"><em class="calibre4">blur</em></span></p></li><li class="listitem"><p class="calibre3"><span class="calibre1"><em class="calibre4">change</em></span> (for form inputs)</p></li><li class="listitem"><p class="calibre3"><span class="calibre1"><em class="calibre4">submit</em></span> (for forms)</p></li></ul></div><p class="calibre3">Check out <a class="ulink" href="http://www.quirksmode.org/dom/events/index.html">Quirksmode</a>,
    which has a full event compatibility table.</p></div></div></div>

{% endraw %}

