---
layout: page
title: "JavaScript Web Applications"
prev: OEBPS/ch01s07.html
next: OEBPS/ch01s09.html
book_path: books/alex-maccaw-javascript-web-applications-otx--_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="book" title="Adding Inheritance to Our Class Library"><div class="book"><div class="book"><div class="book"><h1 class="title1"><a id="I_sect11_d1e1132" class="calibre1"></a>Adding Inheritance to Our Class Library</h1></div></div></div><p class="calibre3"><a id="I_indexterm1_d1e1136" class="calibre1"></a><a id="I_indexterm1_d1e1141" class="calibre1"></a><a id="I_indexterm1_d1e1146" class="calibre1"></a><a id="I_indexterm1_d1e1151" class="calibre1"></a>Let’s add inheritance to our custom class library. We’ll
    pass through an optional parent class when creating a new class:</p><pre class="screen">var Class = function(parent){
  var klass = function(){
    this.init.apply(this, arguments);
  };

  // Change klass' prototype 
  if (parent) {
    var subclass = function() { };
    subclass.prototype = parent.prototype;
    klass.prototype = new subclass;
  };

  klass.prototype.init = function(){};

  // Shortcuts
  klass.fn = klass.prototype;
  klass.fn.parent = klass;
  klass._super = klass.__proto__;      

  /* include/extend code... */

  return klass;
};</pre><p class="calibre3">If a <code class="literal">parent</code> is passed to the
    <code class="literal">Class</code> constructor, we make sure any
    subclasses share the same prototype. This little dance around creating a
    temporary anonymous function prevents instances from being created when a
    class is inherited. The caveat here is that only instance properties, not
    class properties, are inherited. There isn’t yet a cross-browser way of
    setting an object’s <code class="literal">__proto__</code>;.
    Libraries like <a class="ulink" href="http://github.com/maccman/super.js">Super.js</a> get around this
    problem by copying the properties, rather than implementing proper dynamic
    inheritance.</p><p class="calibre3">Now, we can perform simple inheritance by passing parent classes to
    <code class="literal">Class</code>:</p><pre class="screen">var Animal = new Class;

Animal.include({
  breath: function(){ 
    console.log('breath'); 
  }
});

var Cat = new Class(Animal)

// Usage
var tommy = new Cat;
tommy.breath();</pre></div></div>

{% endraw %}

