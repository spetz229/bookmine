---
layout: page
title: "JavaScript Web Applications"
prev: OEBPS/ch03s08.html
next: OEBPS/ch04.html
book_path: books/alex-maccaw-javascript-web-applications-otx--_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="book" title="Submitting New Records to the Server"><div class="book"><div class="book"><div class="book"><h1 class="title1"><a id="I_sect13_d1e3832" class="calibre1"></a>Submitting New Records to the Server</h1></div></div></div><p class="calibre3"><a id="I_indexterm3_d1e3836" class="calibre1"></a><a id="I_indexterm3_d1e3841" class="calibre1"></a><a id="I_indexterm3_d1e3844" class="calibre1"></a><a id="I_indexterm3_d1e3849" class="calibre1"></a>Earlier, we covered how to use jQuery’s <code class="literal">post()</code> function <a id="I_indexterm3_d1e3858" class="calibre1"></a><a id="I_indexterm3_d1e3861" class="calibre1"></a>to send data to the server. The function takes three
    arguments: the endpoint URL, request data, and a callback:</p><pre class="screen">jQuery.post("/users", {first_name: "Alex"}, function(result){
  /* Ajax POST was a success */
});</pre><p class="calibre3">Now that we have an <code class="literal">attributes()</code>
    function, creating records to the server is simple—just POST the record’s
    attributes:</p><pre class="screen">jQuery.post("/assets", asset.attributes(), function(result){
  /* Ajax POST was a success */
});</pre><p class="calibre3">If we’re following REST conventions, we’ll want to do an HTTP POST
    when creating a record and a PUT request when updating the record. Let’s
    add two functions to Model instances—<code class="literal">createRemote()</code> and <code class="literal">updateRemote()</code>—which will send the correct HTTP
    request type to our server:</p><pre class="screen">Model.include({
  createRemote: function(url, callback){
    $.post(url, this.attributes(), callback);
  },

  updateRemote: function(url, callback){
    $.ajax({
      url:     url, 
      data:    this.attributes(), 
      success: callback,
      type:    "PUT"
    });
  }
});</pre><p class="calibre3">Now if we call <code class="literal">createRemote()</code> on
    an Asset instance, its attributes will be POSTed to the server:</p><pre class="screen">// Usage:
Asset.init({name: "jason.txt"}).createRemote("/assets");<a id="I_indexterm3_d1e3893" class="calibre1"></a></pre></div></div>

{% endraw %}

