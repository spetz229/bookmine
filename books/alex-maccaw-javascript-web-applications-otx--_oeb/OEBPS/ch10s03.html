---
layout: page
title: "JavaScript Web Applications"
prev: OEBPS/ch10s02.html
next: OEBPS/ch10s04.html
book_path: books/alex-maccaw-javascript-web-applications-otx--_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="book" title="Minification"><div class="book"><div class="book"><div class="book"><h1 class="title1"><a id="I_sect110_d1e9852" class="calibre1"></a>Minification</h1></div></div></div><p class="calibre3"><a id="I_indexterm10_d1e9856" class="calibre1"></a><a id="I_indexterm10_d1e9861" class="calibre1"></a>JavaScript minification<a id="I_indexterm10_d1e9867" class="calibre1"></a> reduces unnecessary characters from scripts without
    changing any functionality. These characters include whitespace, new
    lines, and comments. The better minifiers can interpret JavaScript.
    Therefore, they can safely shorten variables and function names, further
    reducing characters. Smaller file sizes are better because there’s less
    data to transfer over the network.</p><p class="calibre3">It’s not just JavaScript that can be minified. Stylesheets and HTML
    can also be processed. Stylesheets in particular tend to have a lot of
    redundant whitespace. Minification is something best done on deployment
    because you don’t want to be debugging any minified code. If there’s an
    error in production, try to reproduce it in a development environment
    first—you’ll find it much easier to debug the problem.</p><p class="calibre3">Minification has the additional benefit of obscuring your code. It’s
    true that a sufficiently motivated person could probably reconstruct it,
    but it’s a barrier to entry for the casual observer.</p><p class="calibre3">There are a lot of minimizing libraries out there, but I advise you
    to choose one with a JavaScript engine that can actually interpret the
    code. <a class="ulink" href="http://developer.yahoo.com/yui/compressor">YUI
    Compressor</a><a id="I_indexterm10_d1e9881" class="calibre1"></a> is my favorite because it is well maintained and supported.
    Created by Yahoo! engineer Julien Lecomte, its goal was to shrink
    JavaScript files even further than <a class="ulink" href="http://www.crockford.com/javascript/jsmin.html">JSMin</a><a id="I_indexterm10_d1e9887" class="calibre1"></a> by applying smart optimizations to the source code. Suppose
    we have the following function:</p><pre class="screen">function per(value, total) {
  return( (value / total) * 100 );
}</pre><p class="calibre3">YUI Compressor will, in addition to removing whitespace, shorten the
    local variables, saving yet more characters:</p><pre class="screen">function per(b,a){return((b/a)*100)};</pre><p class="calibre3">Because YUI Compressor actually parses the JavaScript, it can
    usually replace <span class="calibre1">variables—</span>without
    introducing code errors. However, this isn’t always the case; sometimes
    the compressor can’t fathom your code, so it leaves it alone. The most
    common reason for this is the use of an <code class="literal">eval()</code> or <code class="literal">with()</code> statement. If the compressor detects
    you’re using either of those, it won’t perform variable name replacement.
    In addition, both <code class="literal">eval()</code> and <code class="literal">with()</code> can cause performance problems—the
    browser’s JIT compiler has the same issue as the compressor. My advice is
    to stay well clear of either of these statements.</p><p class="calibre3">The simplest way to use YUI Compressor is by <a class="ulink" href="http://yuilibrary.com/downloads/#yuicompressor">downloading the
    binaries</a>, which require Java, and executing them on the command
    line:</p><pre class="screen">java -jar yuicompressor-x.y.z.jar foo.js | foo.min.js</pre><p class="calibre3">However, you can do this programmatically on deployment. If you’re
    using a library like <a class="ulink" href="http://getsprockets.org">Sprockets</a> or <a class="ulink" href="http://lesscss.org">Less</a>, they’ll do this for you. Otherwise,
    there are several interface libraries to YUI Compressor, such as Sam
    Stephenson’s <a class="ulink" href="https://github.com/sstephenson/ruby-yui-compressor">Ruby-YUI-compressor
    gem</a> or the <a class="ulink" href="http://documentcloud.github.com/jammit">Jammit
    library</a>.</p></div></div>

{% endraw %}

