---
layout: page
title: "JavaScript Web Applications"
prev: OEBPS/ch09s06.html
next: OEBPS/ch09s08.html
book_path: books/alex-maccaw-javascript-web-applications-otx--_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="book" title="The Console"><div class="book"><div class="book"><div class="book"><h1 class="title1"><a id="I_sect19_d1e9105" class="calibre1"></a>The Console</h1></div></div></div><p class="calibre3"><a id="I_indexterm9_d1e9109" class="calibre1"></a><a id="I_indexterm9_d1e9114" class="calibre1"></a>The console lets you easily execute JavaScript and examine
    the pages’ global variables. One of the major advantages to the console is
    that you can log directly to it, using the <code class="literal">console.log()</code> function. <a id="I_indexterm9_d1e9121" class="calibre1"></a><a id="I_indexterm9_d1e9124" class="calibre1"></a>The call is asynchronous, can take multiple arguments, and
    inspects those arguments, rather than converting them to strings:</p><pre class="screen">console.log("test");
console.log(1, 2, {3: "three"});</pre><p class="calibre3"><span class="calibre1">There are additional types of logging.
    You can use <code class="literal">console.warn()</code><a id="I_indexterm9_d1e9137" class="calibre1"></a> and <code class="literal">console</code></span><span class="calibre1"><code class="literal">.error()</code><a id="I_indexterm9_d1e9146" class="calibre1"></a> to elevate the logging level<a id="I_indexterm9_d1e9150" class="calibre1"></a>, giving an early indication that something might</span>
    be going wrong:</p><pre class="screen">console.warn("a diabolical warning");
console.error("something broke!");

try {
  // Raises something
} catch(e) {
  console.error("App error!", e);
}</pre><p class="calibre3">It’s also possible to namespace log calls by using a proxy
    function:</p><pre class="screen">var App = {trace: true};
App.log = function(){
  if (!this.trace) return;
  if (typeof console == "undefined") return;
  var slice = Array.prototype.slice;
  var args  = slice.call(arguments, 0);
  args.unshift("(App)");
  console.log.apply(console, args);
};</pre><p class="calibre3">The <code class="literal">App.log()</code> function <a id="I_indexterm9_d1e9166" class="calibre1"></a><a id="I_indexterm9_d1e9169" class="calibre1"></a>prepends the string <code class="literal">"App"</code>
    to its arguments and then passes the call onto <code class="literal">console.log()</code>.</p><p class="calibre3">Keep in mind that when using the console for logging, the variable
    <code class="literal">console</code> may not be defined. In browsers
    that don’t have support for the console—such as Internet Explorer or
    Firefox without Firebug—the <code class="literal">console</code>
    object won’t be defined, causing errors if you try to use it. This is a
    good reason for using a proxy function like <code class="literal">App.log()</code> when logging inside your
    application.</p><p class="calibre3">You can output the scripts’ current stack trace to the console using
    <code class="literal">console.trace()</code><a id="I_indexterm9_d1e9196" class="calibre1"></a>. This is especially useful if you’re trying to work out how
    a function is being called because it traces the stack back through the
    program:</p><pre class="screen">// Log stack trace
console.trace();</pre><p class="calibre3">The application’s errors will also appear in the console and, unless
    the browser’s JIT compiler has optimized the function call, the console
    will show a full stack trace.</p><div class="book" title="Console Helpers"><div class="book"><div class="book"><div class="book"><h2 class="title3"><a id="id2931387" class="calibre12"></a>Console Helpers</h2></div></div></div><p class="calibre3">The console also includes a number of shortcuts and helper
      functions to save some typing. For example, the <code class="literal">$0</code> to <code class="literal">$4</code>
      variables contain the current and previous three selected nodes in Web
      Inspector or Firebug. Believe me, this is extremely useful when you want
      to access and manipulate elements:</p><pre class="screen">// $0 is the currently selected element
$0.style.color = "green";

// Or, using jQuery
jQuery($0).css({background: "black"});</pre><p class="calibre3">The <code class="literal">$()</code> function <a id="I_indexterm9_d1e9223" class="calibre1"></a><a id="I_indexterm9_d1e9226" class="calibre1"></a>returns the element with the specified ID. It’s
      essentially a shortcut to <code class="literal">document.getElementById()</code>. jQuery, Prototype,
      or a similar library that already uses <code class="literal">$</code> will override this:</p><pre class="screen">$("user").addEventListener("click", function(){ /* ... */});</pre><p class="calibre3">The <code class="literal">$$()</code> function <a id="I_indexterm9_d1e9245" class="calibre1"></a><a id="I_indexterm9_d1e9248" class="calibre1"></a>returns the array of elements that match the given CSS
      selector. This is similar to <code class="literal">document.querySelectorAll()</code>. Again, if you use
      Prototype or MooTools, those libraries will override this:</p><pre class="screen">// Select elements with a class of .users
var users = $$(".users");
users.forEach(function(){ /* ... */ });</pre><p class="calibre3">The <code class="literal">$x()</code> function <a id="I_indexterm9_d1e9264" class="calibre1"></a><a id="I_indexterm9_d1e9267" class="calibre1"></a>returns the array of elements that matches the given XPath
      <span class="calibre1">expression</span>:</p><pre class="screen">// Select all forms
var checkboxes = $x("/html/body//form");</pre><p class="calibre3">The <code class="literal">clear()</code> function <a id="I_indexterm9_d1e9283" class="calibre1"></a>clears the console:</p><pre class="screen">clear();</pre><p class="calibre3"><code class="literal">dir()</code><a id="I_indexterm9_d1e9295" class="calibre1"></a><a id="I_indexterm9_d1e9298" class="calibre1"></a> prints an interactive listing of all the object’s
      properties:</p><pre class="screen">dir({one: 1});</pre><p class="calibre3"><code class="literal">inspect()</code><a id="I_indexterm9_d1e9309" class="calibre1"></a><a id="I_indexterm9_d1e9312" class="calibre1"></a> takes an element, database, or storage area as an
      argument, and automatically jumps to the appropriate panel to display
      the relevant information:</p><pre class="screen">inspect($("user"));</pre><p class="calibre3"><code class="literal">keys()</code><a id="I_indexterm9_d1e9323" class="calibre1"></a><a id="I_indexterm9_d1e9326" class="calibre1"></a> returns an array containing the names of all the object’s
      properties:</p><pre class="screen">// Returns ["two"]
keys({two: 2});</pre><p class="calibre3"><code class="literal">values()</code><a id="I_indexterm9_d1e9337" class="calibre1"></a><a id="I_indexterm9_d1e9340" class="calibre1"></a> returns an array containing the values of all the
      object’s properties—i.e., the opposite of <code class="literal">keys()</code>:</p><pre class="screen">// Returns [2]
values({two: 2});</pre></div></div></div>

{% endraw %}

