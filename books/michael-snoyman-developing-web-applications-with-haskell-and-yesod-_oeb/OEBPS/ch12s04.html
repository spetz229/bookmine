---
layout: page
title: "Developing Web Applications with Haskell and Yesod"
prev: OEBPS/ch12s03.html
next: OEBPS/ch12s05.html
book_path: books/michael-snoyman-developing-web-applications-with-haskell-and-yesod-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="book" title="Stateless"><div class="book"><div class="book"><div class="book"><h1 class="title2"><a id="I_sect11_d1e6512" class="calibre1"></a>Stateless</h1></div></div></div><p class="calibre7">I’ve saved this section for the last, not because it is less important, but rather because
            there are no specific features in Yesod to enforce this.</p><p class="calibre7">HTTP is a stateless protocol: each request is to be seen as the beginning of a
            conversation. This means, for instance, it doesn’t matter to the server if you requested
            five pages previously, it will treat your sixth request as if it’s your first
            one.</p><p class="calibre7">On the other hand, some features on websites won’t work without some kind of state. For
            example, how can you implement a shopping cart without saving information about items in
            between requests?</p><p class="calibre7">The solution to this is cookies, and built on top of this, sessions. We have a whole section addressing the sessions features in Yesod. However, I cannot stress enough that this should be used sparingly.</p><p class="calibre7">Let me give you an example. There’s a popular bug-tracking system that I deal with on a
            daily basis that horribly abuses sessions. There’s a little drop-down on every page to
            select the current project. Seems harmless, right? What that dropdown does is set the
            current project in your session.</p><p class="calibre7">The result of all this is that clicking on the “view issues” link is entirely dependent on
            the last project you selected. There’s no way to create a bookmark to your “Yesod”
            issues and a separate link for your “Hamlet” issues.</p><p class="calibre7">The proper RESTful approach to this is to have one resource for all of the Yesod issues and a separate one for all the Hamlet issues. In Yesod, this is easily done with a route definition like:</p><a id="I_programlisting1_d1e6529" class="firstname"></a><pre class="programlistinghaskell">/ ProjectsR GET
/projects/#ProjectID ProjectIssuesR GET
/issues/#IssueID IssueR GET</pre><p class="calibre7">Be nice to your users: proper stateless architecture means that basic features like
            bookmarks, permalinks, and the back/forward button will always work.</p></div></div>

{% endraw %}

