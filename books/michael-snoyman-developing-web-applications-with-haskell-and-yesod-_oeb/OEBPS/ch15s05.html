---
layout: page
title: "Developing Web Applications with Haskell and Yesod"
prev: OEBPS/ch15s04.html
next: OEBPS/ch15s06.html
book_path: books/michael-snoyman-developing-web-applications-with-haskell-and-yesod-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="book" title="Static Files"><div class="book"><div class="book"><div class="book"><h1 class="title2"><a id="I_sect14_d1e7821" class="calibre1"></a>Static Files</h1></div></div></div><p class="calibre7"></p><p class="calibre7">The scaffolded site automatically includes the static file subsite, optimized for
   serving files that will not change over the lifetime of the current build. What this means is
   that:</p><div class="book"><ul class="itemizedlist"><li class="listitem"><p class="calibre7">When your static file identifiers are generated (e.g.,
     <em class="calibre4">static/mylogo.png</em> becomes <code class="literal">mylogo_png</code>), a query-string
    parameter is added to it with a hash of the contents of the file. All of this happens at compile
    time.</p></li><li class="listitem"><p class="calibre7">When <code class="literal">yesod-static</code> serves your static files, it sets
          expiration headers far in the future, and includes an etag based on a hash of your
          content.</p></li><li class="listitem"><p class="calibre7">Whenever you embed a link to <code class="literal">mylogo_png</code>, the rendering includes the
    query-string parameter. If you change the logo, recompile, and launch your new app, the query
    string will have changed, causing users to ignore the cached copy and download a new
    version.</p></li></ul></div><p class="calibre7">Additionally, you can set a specific static root in your
    <em class="calibre4">Settings.hs</em> file to serve from a different domain name. This has the
   advantage of not requiring transmission of cookies for static file requests, and also lets you
   offload static file hosting to a CDN or a service like Amazon S3. See the comments in the file
   for more details.</p><p class="calibre7">Another optimization is that CSS and JavaScript included in your widgets will not be
      included inside your HTML. Instead, their contents will be written to an external file, and a
      link given. This file will be named based on a hash of the contents as well, meaning:</p><div class="book"><ol class="orderedlist"><li class="listitem"><p class="calibre7">Caching works properly.</p></li><li class="listitem"><p class="calibre7">Yesod can avoid an expensive disk write of the CSS/JavaScript file contents if a file
          with the same hash already exists.</p></li></ol></div><p class="calibre7">Finally, all of your JavaScript is automatically minified via <code class="function">hjsmin</code>.</p></div></div>

{% endraw %}

