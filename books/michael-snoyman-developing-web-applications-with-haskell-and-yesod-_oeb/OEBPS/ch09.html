---
layout: page
title: "Developing Web Applications with Haskell and Yesod"
prev: OEBPS/ch08s13.html
next: OEBPS/ch09s02.html
book_path: books/michael-snoyman-developing-web-applications-with-haskell-and-yesod-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="calibre8"></div><div class="book" title="Chapter 9. Sessions"><div class="book"><div class="book"><div class="book"><div class="calibre8"></div><h1 class="title1"><a id="I_chapter9_d1e4588" class="calibre1"></a>Chapter 9. Sessions</h1></div></div></div><p class="calibre7">HTTP is a stateless protocol. While some view this as a disadvantage, advocates of RESTful
    web development laud this as a plus. When state is removed from the picture, it is easier to
    scale applications, caching can happen automatically, and many other nice side effects occur.
    You can draw many parallels with the non-mutable nature of Haskell in general.</p><p class="calibre7">As much as possible, RESTful applications should avoid storing state about an interaction
            with a client. However, it is sometimes unavoidable. Features like shopping carts are
            the classic example, but other more mundane interactions like proper login handling can
            be greatly enhanced by proper usage of sessions.</p><p class="calibre7">This chapter will describe how Yesod stores session data,
            how you can access this data, and some special functions to help
            you make the most of sessions.</p><div class="book" title="Clientsession"><div class="book"><div class="book"><div class="book"><h1 class="title2"><a id="I_sect19_d1e4600" class="calibre1"></a>Clientsession</h1></div></div></div><p class="calibre7">One of the earliest packages spun off from Yesod was <code class="function">clientsession</code>. This package uses encryption and signatures to store data
            in a client-side cookie. The encryption prevents the user from inspecting the data, and
            the signature ensures that the session can be neither hijacked nor tampered with.</p><p class="calibre7">It might sound like a bad idea from an efficiency
            standpoint to store data in a cookie: after all, this means that
            the data must be sent on every request. However, in practice,
            clientsession can be a great boon for performance.</p><div class="book"><ul class="itemizedlist"><li class="listitem"><p class="calibre7">No server side database lookup is required to service a request.</p></li><li class="listitem"><p class="calibre7">We can easily scale horizontally: each request contains all the information we need to send a response.</p></li><li class="listitem"><p class="calibre7">To avoid undue bandwidth overhead, production sites can serve their static content from
                a separate domain name to avoid the overhead of transmitting the session cookie for
                each request.</p></li></ul></div><p class="calibre7">Storing megabytes of information in the session will be a bad idea. But for that matter,
            most session implementations recommend against such practices. If you really need
            massive storage for a user, it is best to store a lookup key in the session, and put the
            actual data in a database.</p><p class="calibre7">All of the interaction with clientsession is handled by Yesod internally, but there are a
            few spots where you can tweak the behavior just a bit.</p></div></div></div>

{% endraw %}

