---
layout: page
title: "Unknown"
prev: r22812.htm
next: r23024.htm
book_path: books/o-reilly-practical-postgresql_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="NAVHEADER"><table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0" class="calibre"><tr class="calibre1"><th colspan="3" class="calibre2">Practical PostgreSQL</th></tr><tr class="calibre1"><td width="10%" valign="bottom" class="calibre3"><a href="r22812.htm" accesskey="P">Prev</a></td><td width="80%" valign="bottom" class="calibre4"/><td width="10%" valign="bottom" class="calibre5"><a href="r23024.htm" accesskey="N">Next</a></td></tr></table><hr width="100%" class="calibre6"/></div><h1 class="calibre7"><a name="SQL-ALTERTABLE" class="calibre8">ALTER TABLE</a></h1><div class="NAVHEADER"><a name="AEN22875"></a><h2 class="SECT">Name</h2>ALTER TABLE -- Modifies table and column attributes.</div><div class="NAVHEADER"><a name="AEN22878"></a><h2 class="SECT">Synopsis</h2><pre class="SCREEN">ALTER TABLE <tt class="REPLACEABLE"><i class="EMPHASIS">table</i></tt> [ * ]
      ADD [ COLUMN ] <tt class="REPLACEABLE"><i class="EMPHASIS">column</i></tt> <tt class="REPLACEABLE"><i class="EMPHASIS">type</i></tt>
ALTER TABLE <tt class="REPLACEABLE"><i class="EMPHASIS">table</i></tt> [ * ]
      ALTER [ COLUMN ] <tt class="REPLACEABLE"><i class="EMPHASIS">column</i></tt> { SET DEFAULT <tt class="REPLACEABLE"><i class="EMPHASIS">defaultvalue</i></tt> | DROP DEFAULT }
ALTER TABLE <tt class="REPLACEABLE"><i class="EMPHASIS">table</i></tt> [ * ]
      RENAME [ COLUMN ] <tt class="REPLACEABLE"><i class="EMPHASIS">column</i></tt> TO <tt class="REPLACEABLE"><i class="EMPHASIS">newcolumn</i></tt>
ALTER TABLE <tt class="REPLACEABLE"><i class="EMPHASIS">table</i></tt>
      RENAME TO <tt class="REPLACEABLE"><i class="EMPHASIS">newtable</i></tt>
ALTER TABLE <tt class="REPLACEABLE"><i class="EMPHASIS">table</i></tt>
      ADD CONSTRAINT <tt class="REPLACEABLE"><i class="EMPHASIS">newconstraint</i></tt> <span><i class="EMPHASIS">definition</i></span>
ALTER TABLE <tt class="REPLACEABLE"><i class="EMPHASIS">table</i></tt>
      OWNER TO <tt class="REPLACEABLE"><i class="EMPHASIS">newowner</i></tt></pre><div class="NAVHEADER"><a name="R2-SQL-ALTERTABLE-1"></a><h3 class="AUTHOR">Parameters</h3><p class="calibre9"> </p><p class="calibre9"></p><div class="NAVHEADER"><dl class="calibre9"><dt class="NAVHEADER"><tt class="REPLACEABLE"><i class="EMPHASIS">table</i></tt></dt><dd class="calibre16"><p class="calibre9">The name of the (existing) table you intend to modify.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE"><i class="EMPHASIS">column</i></tt></dt><dd class="calibre16"><p class="calibre9">The name of a new column, or existing column that you intend to modify.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE"><i class="EMPHASIS">type</i></tt></dt><dd class="calibre16"><p class="calibre9">The data type of a new column being created.  (This is used only during the creation of a new column.)</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE"><i class="EMPHASIS">defaultvalue</i></tt></dt><dd class="calibre16"><p class="calibre9">A new default value for the specified column.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE"><i class="EMPHASIS">newcolumn</i></tt></dt><dd class="calibre16"><p class="calibre9">A new name for <tt class="REPLACEABLE"><i class="EMPHASIS">column</i></tt>.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE"><i class="EMPHASIS">newtable</i></tt></dt><dd class="calibre16"><p class="calibre9">A new name for <tt class="REPLACEABLE"><i class="EMPHASIS">table</i></tt>.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE"><i class="EMPHASIS">newconstraint definition</i></tt></dt><dd class="calibre16"><p class="calibre9">The name and definition of a new table constraint to be added to an existing table. See <a href="c13329.htm">Chapter 7</a> for more details on how to define a table constraint.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE"><i class="EMPHASIS">newowner</i></tt></dt><dd class="calibre16"><p class="calibre9">The new owner of <tt class="REPLACEABLE"><i class="EMPHASIS">table</i></tt> (when transferring ownership).</p></dd></dl></div>
</div><div class="NAVHEADER"><a name="R2-SQL-ALTERTABLE-2"></a><h3 class="AUTHOR">Results</h3><p class="calibre9"> </p><p class="calibre9"></p><div class="NAVHEADER"><dl class="calibre9"><dt class="NAVHEADER"><tt class="REPLACEABLE">ALTER</tt></dt><dd class="calibre16"><p class="calibre9">The message returned when a column or table modification is completed successfully. </p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE">ERROR</tt></dt><dd class="calibre16"><p class="calibre9">The message returned if the table or column modifications cannot be completed, along with an explanation of what failed, if possible.</p></dd></dl></div>
</div></div><div class="NAVHEADER"><a name="R1-SQL-ALTERTABLE-1"></a><h2 class="SECT">Description</h2><p class="calibre9">The <tt class="REPLACEABLE">ALTER TABLE</tt> command is used to modify the structure of tables existing within a database in various ways. To rename a column or table, use the <tt class="REPLACEABLE">RENAME</tt> keyword.  Renaming in this manner will not alter any of the data in either a column or a table. If you wish to add a new table constraint to a table, use the <tt class="REPLACEABLE">ADD CONSTRAINT</tt> clause with the same constraint syntax used with <tt class="REPLACEABLE">CREATE TABLE</tt> for a table constraint (see <a href="r24978.htm">CREATE TABLE</a>").</p><p class="calibre9">As of the most current version of PostgreSQL available at this printing (7.1.x), the only constraints that can be added to a table through the <tt class="REPLACEABLE">ADD CONSTRAINT</tt> clause are the <tt class="REPLACEABLE">CHECK</tt> and <tt class="REPLACEABLE">FOREIGN KEY</tt> constraints. To implicitly add a <tt class="REPLACEABLE">UNIQUE</tt> constraint, a workaround is to create a <tt class="REPLACEABLE">UNIQUE</tt> index, using the <tt class="REPLACEABLE">CREATE INDEX</tt> command (see <a href="r24254.htm">CREATE INDEX</a>").  To add any other constraints, you will have to recreate and reload data into the table in question.</p><p class="calibre9">To add a new column to a table, use <tt class="REPLACEABLE">ADD COLUMN</tt> with the same column syntax used in <tt class="REPLACEABLE">CREATE TABLE</tt> (see <a href="r24978.htm">CREATE TABLE</a>").  To modify or delete a column's default setting, use <tt class="REPLACEABLE">ALTER COLUMN</tt> with either the <tt class="REPLACEABLE">SET DEFAULT</tt> or <tt class="REPLACEABLE">DROP DEFAULT</tt> clause. (Remember that defaults are only applicable to newly added rows, and will not affect existing rows.)</p><p class="calibre9">As of PostgreSQL 7.1.x, you are not able to set the default value or constraint settings for a column at the same time as when it is added with the <tt class="REPLACEABLE">ADD COLUMN</tt> clause.  You can, however, use the <tt class="REPLACEABLE">SET DEFAULT</tt> clause of <tt class="REPLACEABLE">ALTER TABLE</tt> to set the default values <span><i class="EMPHASIS">after</i></span> the column is created. If you do this after the table has been in use for any period of time, be sure to use the <tt class="REPLACEABLE">UPDATE</tt> command to update the column's data in any existing rows to the new default.</p><div class="NAVHEADER"><blockquote class="NOTE"><p class="calibre9"><b class="calibre10">Note: </b>You must be the owner of a table, or a superuser, in order to modify it.</p><a name="AEN22989"></a><blockquote class="NOTE"><p class="calibre9"></p></blockquote></blockquote></div></div><div class="NAVHEADER"><a name="R1-SQL-ALTERTABLE-2"></a><h2 class="SECT">Examples</h2><p class="calibre9">The following example adds a <tt class="REPLACEABLE">text</tt> column named <tt class="REPLACEABLE">address</tt> to the <tt class="REPLACEABLE">employees</tt> table: </p><pre class="SCREEN">booktown=# <tt class="REPLACEABLE"><b class="calibre10">ALTER TABLE employees ADD COLUMN address text;</b></tt>
ALTER</pre><p class="calibre9">Next, the newly added <tt class="REPLACEABLE">address</tt> column is renamed to <tt class="REPLACEABLE">mailing_address</tt>:</p><pre class="SCREEN">booktown=# <tt class="REPLACEABLE"><b class="calibre10">ALTER TABLE employees RENAME COLUMN address TO mailing_address;</b></tt>
ALTER</pre><p class="calibre9">The following example renames the <tt class="REPLACEABLE">employees</tt> table to <tt class="REPLACEABLE">personnel</tt>: </p><pre class="SCREEN">booktown=# <tt class="REPLACEABLE"><b class="calibre10">ALTER TABLE employees RENAME TO personnel;</b></tt>
ALTER</pre><p class="calibre9">The following example then changes the owner of the <tt class="REPLACEABLE">personnel</tt> table to the PostgreSQL user <tt class="REPLACEABLE">jonathan</tt>:</p><pre class="SCREEN">booktown=# <tt class="REPLACEABLE"><b class="calibre10">ALTER TABLE personnel OWNER TO jonathan;</b></tt>
ALTER</pre><p class="calibre9">Finally, the following syntax adds a <tt class="REPLACEABLE">FOREIGN KEY</tt> constraint to the <tt class="REPLACEABLE">schedules</tt> table named <tt class="REPLACEABLE">valid_employee</tt>, which verifies the employee <tt class="REPLACEABLE">id</tt> column in the <tt class="REPLACEABLE">personnel</tt> table:</p><pre class="SCREEN">booktown=# <tt class="REPLACEABLE"><b class="calibre10">ALTER TABLE schedules ADD CONSTRAINT valid_employee</b></tt>
booktown-# <tt class="REPLACEABLE"><b class="calibre10">                      FOREIGN KEY (employee_id)</b></tt>
booktown-# <tt class="REPLACEABLE"><b class="calibre10">                      REFERENCES personnel (id) MATCH FULL;</b></tt>
NOTICE:  ALTER TABLE ... ADD CONSTRAINT will create implicit trigger(s) for
FOREIGN KEY check(s)
CREATE</pre></div><div class="NAVHEADER"><hr width="100%" class="calibre6"/><table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0" class="calibre"><tr class="calibre1"><td width="33%" valign="top" class="calibre3"><a href="r22812.htm" accesskey="P">Prev</a></td><td width="34%" valign="top" class="calibre4"><a href="book1.htm" accesskey="H">Home</a></td><td width="33%" valign="top" class="calibre5"><a href="r23024.htm" accesskey="N">Next</a></td></tr><tr class="calibre1"><td width="33%" valign="top" class="calibre3">ALTER GROUP</td><td width="34%" valign="top" class="calibre4"><a href="c22759.htm" accesskey="U">Up</a></td><td width="33%" valign="top" class="calibre5">ALTER USER</td></tr></table></div></div>

{% endraw %}

