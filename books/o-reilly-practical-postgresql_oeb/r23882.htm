---
layout: page
title: "Unknown"
prev: r23733.htm
next: r24039.htm
book_path: books/o-reilly-practical-postgresql_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="NAVHEADER"><table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0" class="calibre"><tr class="calibre1"><th colspan="3" class="calibre2">Practical PostgreSQL</th></tr><tr class="calibre1"><td width="10%" valign="bottom" class="calibre3"><a href="r23733.htm" accesskey="P">Prev</a></td><td width="80%" valign="bottom" class="calibre4"/><td width="10%" valign="bottom" class="calibre5"><a href="r24039.htm" accesskey="N">Next</a></td></tr></table><hr width="100%" class="calibre6"/></div><h1 class="calibre7"><a name="SQL-CREATEDATABASE" class="calibre8">CREATE DATABASE</a></h1><div class="NAVHEADER"><a name="AEN23886"></a><h2 class="SECT">Name</h2>CREATE DATABASE -- Creates a new database in PostgreSQL.</div><div class="NAVHEADER"><a name="AEN23889"></a><h2 class="SECT">Synopsis</h2><pre class="SCREEN">CREATE DATABASE <tt class="REPLACEABLE"><i class="EMPHASIS">name</i></tt>
  [ WITH [ LOCATION = { '<tt class="REPLACEABLE"><i class="EMPHASIS">dbpath</i></tt>' | DEFAULT } ]
         [ TEMPLATE = <tt class="REPLACEABLE"><i class="EMPHASIS">template</i></tt> | DEFAULT ]
         [ ENCODING = <tt class="REPLACEABLE"><i class="EMPHASIS">encoding_name</i></tt> | <tt class="REPLACEABLE"><i class="EMPHASIS">encoding_number</i></tt> | DEFAULT ] ]</pre><div class="NAVHEADER"><a name="R2-SQL-CREATEDATABASE-1"></a><h3 class="AUTHOR">Parameters</h3><p class="calibre9"> </p><p class="calibre9"></p><div class="NAVHEADER"><dl class="calibre9"><dt class="NAVHEADER"><tt class="REPLACEABLE"><i class="EMPHASIS">name</i></tt></dt><dd class="calibre16"><p class="calibre9">The name of the database you are creating.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE"><i class="EMPHASIS">dbpath</i></tt></dt><dd class="calibre16"><p class="calibre9">The directory in which to save the database. You may use the <tt class="REPLACEABLE">DEFAULT</tt> keyword to save the database in the default data directory, as specified by the <tt class="REPLACEABLE">PGDATA</tt> environment variable (or <span><i class="EMPHASIS">-D</i></span> flag, passed to the <span><i class="EMPHASIS">postmaster</i></span>).</p><p class="calibre9">Note that the <tt class="REPLACEABLE"><i class="EMPHASIS">dbpath</i></tt> value must normally be the name of system-level <span><i class="EMPHASIS">environment variable</i></span>, which is set within the PostgreSQL user's environment to a value describing an initialized database directory.However, if PostgreSQL was compiled by the <span><i class="EMPHASIS">gmake</i></span> command with the <span><i class="EMPHASIS">CPPFLAGS=-DALLOW_ABSOLUTE_DBPATHS</i></span> argument passed to it, you can also specify a complete, absolute directory path.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE"><i class="EMPHASIS">template</i></tt></dt><dd class="calibre16"><p class="calibre9">The name of the template you wish to base the new database off of. Use the <tt class="REPLACEABLE">DEFAULT</tt> keyword to specify the default template (usually <tt class="REPLACEABLE">template1</tt>).</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE"><i class="EMPHASIS">encoding_name</i></tt> | <tt class="REPLACEABLE"><i class="EMPHASIS">encoding_num</i></tt></dt><dd class="calibre16"><p class="calibre9">The multibyte encoding method to use for the database.  This can be entered as a string literal, or an encoding type's corresponding integer encoding number. See <a href="a29140.htm">Appendix A</a>, for a list of PostgreSQL's multibyte encoding types.</p><p class="calibre9">You may use the <tt class="REPLACEABLE">DEFAULT</tt> keyword to explicitly specify the default encoding method (this is already the default).</p></dd></dl></div>
</div><div class="NAVHEADER"><a name="R2-SQL-CREATEDATABASE-2"></a><h3 class="AUTHOR">Results</h3><p class="calibre9"> </p><p class="calibre9"></p><div class="NAVHEADER"><dl class="calibre9"><dt class="NAVHEADER"><tt class="REPLACEABLE">CREATE DATABASE</tt></dt><dd class="calibre16"><p class="calibre9">The message returned when a new database is created successfully.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE">ERROR: user '</tt><tt class="REPLACEABLE"><i class="EMPHASIS">username</i></tt><tt class="REPLACEABLE">' is not allowed to create/drop databases</tt></dt><dd class="calibre16"><p class="calibre9">The error returned if your PostgreSQL user does not have the <tt class="REPLACEABLE">createdb</tt> privilege necessary to create a database.  A database administrator can add permissions to a PostgreSQL user by using the <tt class="REPLACEABLE">ALTER USER</tt> command.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE">ERROR:  Absolute paths are not allowed as database locations</tt></dt><dd class="calibre16"><p class="calibre9">The error returned if <tt class="REPLACEABLE"><i class="EMPHASIS">dbpath</i></tt> is specified as an absolute system path, and PostgreSQL was not compiled with the <span><i class="EMPHASIS">CPPFLAGS=-DALLOW_ABSOLUTE_DBPATHS</i></span> argument to <span><i class="EMPHASIS">gmake</i></span>.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE">ERROR:  Relative paths are not allowed as database locations</tt></dt><dd class="calibre16"><p class="calibre9">The error returned if <tt class="REPLACEABLE"><i class="EMPHASIS">dbpath</i></tt> is specified as a relative system path, which is never allowed, as of PostgreSQL 7.1.x. You must set <tt class="REPLACEABLE"><i class="EMPHASIS">dbpath</i></tt> to the name of the <span><i class="EMPHASIS">postmaster</i></span>'s configured <span><i class="EMPHASIS">environment variable</i></span> describing the location of your intended database location.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE">ERROR: </tt> <tt class="REPLACEABLE"><i class="EMPHASIS">createdb</i></tt><tt class="REPLACEABLE">: database "</tt><tt class="REPLACEABLE"><i class="EMPHASIS">name</i></tt><tt class="REPLACEABLE">" already exists</tt></dt><dd class="calibre16"><p class="calibre9">The error returned if a database named <tt class="REPLACEABLE"><i class="EMPHASIS">name</i></tt> already exists within the system catalog.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE">ERROR: database path may not contain single quotes</tt></dt><dd class="calibre16"><p class="calibre9">The error returned if you use single quotes (') within the <tt class="REPLACEABLE"><i class="EMPHASIS">dbpath</i></tt> parameter (the location to save the database).  Such single quotes are not compatible with the system's directory creation program.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE">ERROR:  CREATE DATABASE: unable to create database directory '</tt><tt class="REPLACEABLE"><i class="EMPHASIS">/path</i></tt><tt class="REPLACEABLE">'</tt></dt><dd class="calibre16"><p class="calibre9">The error returned if it is not possible to save the database files in the path you specified.  This can be due to a full disk, insufficient permissions on the specified directory, or the directory not having been initialized by either <span><i class="EMPHASIS">initdb</i></span> or <span><i class="EMPHASIS">initlocation</i></span>.</p><p class="calibre9">The username under which PostgreSQL's <span><i class="EMPHASIS">postmaster</i></span> is running must have access to the path specified as the database location.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE">ERROR:  CREATE DATABASE: May not be called in a transaction block</tt></dt><dd class="calibre16"><p class="calibre9">The error returned if you attempt to use <tt class="REPLACEABLE">CREATE DATABASE</tt> during an explicit transaction block. You cannot use <tt class="REPLACEABLE">CREATE DATABASE</tt> within an open transaction block.</p></dd></dl></div>
</div></div><div class="NAVHEADER"><a name="R1-SQL-CREATEDATABASE-1"></a><h2 class="SECT">Description</h2><p class="calibre9">Use <tt class="REPLACEABLE">CREATE DATABASE</tt> to create a new database on the system.  When you create a new database, the PostgreSQL user you are logged in as will automatically become the owner of the new database, so be sure you are logged in correctly before using this command.</p><div class="NAVHEADER"><blockquote class="NOTE"><p class="calibre9"><b class="calibre10">Note: </b>If absolutely necessary, you can change the owner of a database by performing an <tt class="REPLACEABLE">UPDATE</tt> on the <tt class="REPLACEABLE">pg_database</tt> system table's <tt class="REPLACEABLE">datdba</tt> column to be a different user's PostgreSQL system ID).</p></blockquote></div><p class="calibre9">The <tt class="REPLACEABLE"><i class="EMPHASIS">dbpath</i></tt> usually describes an environment variable, which contains the location of the path to create the database in. This environment variable must exist in the environment of the user running the <span><i class="EMPHASIS">postmaster</i></span>. In this manner, administrators have more control over where on the filesystem databases can be created. See <a href="c16573.htm">Chapter 9</a>, for more information on this.</p><p class="calibre9">The directory you choose to store the database in must be prepared with the <span><i class="EMPHASIS">initlocation</i></span> (or <span><i class="EMPHASIS">initdb</i></span>) command beforehand. See <a href="c16573.htm">Chapter 9</a> for more on these commands.</p><div class="NAVHEADER"><blockquote class="NOTE"><p class="calibre9"><b class="calibre10">Note: </b>If PostgreSQL has been compiled with <span><i class="EMPHASIS">ALLOW_ABSOLUTE_DBPATHS</i></span> (by passing <span><i class="EMPHASIS">CPPFLAGS=-DALLOW_ABSOLUTE_DBPATHS</i></span> to <span><i class="EMPHASIS">gmake</i></span> after configuration), absolute pathnames are allowed.  This is not allowed by default, due to security and data integrity issues that can arise from using database locations specified as absolute paths.</p></blockquote></div><p class="calibre9">To create a new database, PostgreSQL clones a database template (<tt class="REPLACEABLE">template1</tt>, by default). If you wish to use a different database template, specify it with the <tt class="REPLACEABLE">TEMPLATE</tt> clause. To create a completely new database (with no cloned template objects), pass <tt class="REPLACEABLE">template0</tt> as the name of the template to clone from.</p></div><div class="NAVHEADER"><a name="R1-SQL-CREATEDATABASE-2"></a><h2 class="SECT">Examples</h2><p class="calibre9">The following example creates a database with the name of <tt class="REPLACEABLE">booktown</tt>:</p><pre class="SCREEN">template1=# <tt class="REPLACEABLE"><b class="calibre10">CREATE DATABASE booktown;</b></tt>
CREATE DATABASE</pre><p class="calibre9">This next example specifies the creation of a database with a different data directory location for the new database:</p><pre class="SCREEN">template1=# <tt class="REPLACEABLE"><b class="calibre10">CREATE DATABASE booktown WITH LOCATION = '/usr/local/pgsql/booktown';</b></tt>
CREATE DATABASE</pre></div><div class="NAVHEADER"><hr width="100%" class="calibre6"/><table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0" class="calibre"><tr class="calibre1"><td width="33%" valign="top" class="calibre3"><a href="r23733.htm" accesskey="P">Prev</a></td><td width="34%" valign="top" class="calibre4"><a href="book1.htm" accesskey="H">Home</a></td><td width="33%" valign="top" class="calibre5"><a href="r24039.htm" accesskey="N">Next</a></td></tr><tr class="calibre1"><td width="33%" valign="top" class="calibre3">CREATE AGGREGATE</td><td width="34%" valign="top" class="calibre4"><a href="c22759.htm" accesskey="U">Up</a></td><td width="33%" valign="top" class="calibre5">CREATE FUNCTION</td></tr></table></div></div>

{% endraw %}

