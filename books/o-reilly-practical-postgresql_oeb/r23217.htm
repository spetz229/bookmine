---
layout: page
title: "Unknown"
prev: r23165.htm
next: r23305.htm
book_path: books/o-reilly-practical-postgresql_oeb/
---
{% include JB/setup %}
{% raw %}
<div>
<div class="NAVHEADER"><table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0" class="calibre"><tr class="calibre1"><th colspan="3" class="calibre2">Practical PostgreSQL</th></tr><tr class="calibre1"><td width="10%" valign="bottom" class="calibre3"><a href="r23165.htm" accesskey="P">Prev</a></td><td width="80%" valign="bottom" class="calibre4"/><td width="10%" valign="bottom" class="calibre5"><a href="r23305.htm" accesskey="N">Next</a></td></tr></table><hr width="100%" class="calibre6"/></div><h1 class="calibre7"><a name="SQL-CLUSTER" class="calibre8">CLUSTER</a></h1><div class="NAVHEADER"><a name="AEN23221"></a><h2 class="SECT">Name</h2>CLUSTER -- Provides the backend server with clustering information about a table.</div><div class="NAVHEADER"><a name="AEN23224"></a><h2 class="SECT">Synopsis</h2><pre class="SCREEN">CLUSTER <tt class="REPLACEABLE"><i class="EMPHASIS">indexname</i></tt> ON <tt class="REPLACEABLE"><i class="EMPHASIS">tablename</i></tt></pre><div class="NAVHEADER"><a name="R2-SQL-CLUSTER-1"></a><h3 class="AUTHOR">Parameters </h3><p class="calibre9"> </p><p class="calibre9"></p><div class="NAVHEADER"><dl class="calibre9"><dt class="NAVHEADER"><tt class="REPLACEABLE"><i class="EMPHASIS">indexname</i></tt></dt><dd class="calibre16"><p class="calibre9">The name of the index to use in clustering.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE"><i class="EMPHASIS">tablename</i></tt></dt><dd class="calibre16"><p class="calibre9">The name of the table you wish to cluster.</p></dd></dl></div></div><div class="NAVHEADER"><a name="R2-SQL-CLUSTER-2"></a><h3 class="AUTHOR">Results </h3><p class="calibre9"> </p><p class="calibre9"></p><div class="NAVHEADER"><dl class="calibre9"><dt class="NAVHEADER"><tt class="REPLACEABLE">CLUSTER</tt></dt><dd class="calibre16"><p class="calibre9">The message returned when a table is successfully clustered.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE">ERROR:  CLUSTER: "</tt><tt class="REPLACEABLE"><i class="EMPHASIS">indexname</i></tt><tt class="REPLACEABLE">" is not an index for table "</tt><tt class="REPLACEABLE"><i class="EMPHASIS">tablename</i></tt><tt class="REPLACEABLE">"</tt></dt><dd class="calibre16"><p class="calibre9">The error returned if you attempt to cluster an index <tt class="REPLACEABLE"><i class="EMPHASIS">indexname</i></tt> which is not placed on the specified table (<tt class="REPLACEABLE"><i class="EMPHASIS">tablename</i></tt>).</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE">ERROR:  Index "</tt><tt class="REPLACEABLE"><i class="EMPHASIS">indexname</i></tt><tt class="REPLACEABLE">" does not exist</tt></dt><dd class="calibre16"><p class="calibre9">The error returned if the specified index (<tt class="REPLACEABLE"><i class="EMPHASIS">indexname</i></tt>) cannot be found in the connected database.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE">ERROR: Relation "</tt><tt class="REPLACEABLE"><i class="EMPHASIS">tablename</i></tt><tt class="REPLACEABLE">" does not exist</tt></dt><dd class="calibre16"><p class="calibre9">The error returned if the specified table (<tt class="REPLACEABLE"><i class="EMPHASIS">tablename</i></tt>) cannot be found in the connected database.</p></dd><dt class="NAVHEADER"><tt class="REPLACEABLE">ERROR:  Relation "</tt><tt class="REPLACEABLE"><i class="EMPHASIS">child_table</i></tt><tt class="REPLACEABLE">" inherits from "</tt><tt class="REPLACEABLE"><i class="EMPHASIS">tablename</i></tt><tt class="REPLACEABLE">"</tt></dt><dd class="calibre16"><p class="calibre9">The error returned if the specified table (<tt class="REPLACEABLE"><i class="EMPHASIS">tablename</i></tt>) is inherited by another table (<tt class="REPLACEABLE"><i class="EMPHASIS">child_table</i></tt>).</p></dd></dl></div>
</div></div><div class="NAVHEADER"><a name="R1-SQL-CLUSTER-1"></a><h2 class="SECT">Description</h2><p class="calibre9">Use the <tt class="REPLACEABLE">CLUSTER</tt> command to cluster a table on a specific index. The table (identified by the <tt class="REPLACEABLE"><i class="EMPHASIS">tablename</i></tt> parameter) must already, exist and the index (identified by the <tt class="REPLACEABLE"><i class="EMPHASIS">indexname</i></tt> parameter) must exist, and be placed on the table.</p><p class="calibre9">During clustering, a table is reordered for performance in an arrangement based on the specified index. A cluster is a one-time operation upon a table; to recluster a table, you must execute the command again. </p><div class="NAVHEADER"><p class="calibre9"></p><table class="calibre" border="1" width="100%"><tr class="calibre1"><td class="calibre23"><b class="calibre10">Warning</b></td></tr><tr class="calibre1"><td class="calibre15"><p class="calibre9">When a cluster is created, the rows of the table are actually copied to a temporary table according to an order derived from the specified index.  That temporary table is then renamed to the original table name. Because of this, all permissions and other indices are lost when clustering is performed.</p></td></tr></table></div></div><div class="NAVHEADER"><a name="R1-SQL-CLUSTER-2"></a><h2 class="SECT">Examples</h2><p class="calibre9">The following example clusters the <tt class="REPLACEABLE">subjects</tt> table on the basis of its <tt class="REPLACEABLE">subjects_pkey</tt> index:</p><pre class="SCREEN">booktown=# <tt class="REPLACEABLE"><b class="calibre10">CLUSTER subjects_ pkey ON subjects;</b></tt>
CLUSTER</pre></div><div class="NAVHEADER"><hr width="100%" class="calibre6"/><table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0" class="calibre"><tr class="calibre1"><td width="33%" valign="top" class="calibre3"><a href="r23165.htm" accesskey="P">Prev</a></td><td width="34%" valign="top" class="calibre4"><a href="book1.htm" accesskey="H">Home</a></td><td width="33%" valign="top" class="calibre5"><a href="r23305.htm" accesskey="N">Next</a></td></tr><tr class="calibre1"><td width="33%" valign="top" class="calibre3">CLOSE</td><td width="34%" valign="top" class="calibre4"><a href="c22759.htm" accesskey="U">Up</a></td><td width="33%" valign="top" class="calibre5">COMMENT</td></tr></table></div></div>

{% endraw %}

